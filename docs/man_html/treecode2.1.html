<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>TREECODE2(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
treecode2 - fortran version of hackcode, with Cray optimizations and
 no recursion 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
treecode2 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>treecode2</b> is the Hernquist version
(Version 2, November 1988) of the Barnes and Hut treecode (see also <a href='hackcode1.1.html'><i>hackcode1(1NEMO)</i></a>
.
This version is written in fortran,  has been optimized for supercomputers
and is fully vectorized, no recursion used. See the file <i>treecode.f</i> for 
many more details. <p>
Computational units can be anything, but the gravitational
constant G=1. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
Two files (both in ascii) determine the input parameters
and input condition, and must be present at the start of the program. <p>
The
first one is the input parameter file with the name <b>TREEPAR</b>. It  contains,
line by line, the input parameters for this run. In the table  below the
values for the benchmark input parameter file are given in square brackets:
<p>
<br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp; headline  <tt> </tt>&nbsp;<tt> </tt>&nbsp;Identification string for the run (max 50 char) [standard NEMO
bench]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; nsteps    <tt> </tt>&nbsp;<tt> </tt>&nbsp;Number of timesteps [64]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; noutbod   <tt> </tt>&nbsp;<tt> </tt>&nbsp;Output system state (file TREEBOA) once every nsteps/noutbod
steps [100]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; noutlog   <tt> </tt>&nbsp;<tt> </tt>&nbsp;Output logfile data (file TREELOG) once every nsteps/noutlog
steps [1]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; dtime     <tt> </tt>&nbsp;<tt> </tt>&nbsp;Integration timestep [0.03125]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; tol         <tt> </tt>&nbsp;<tt> </tt>&nbsp;Error tolerance; 0.0=exact [1.0]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; eps      <tt> </tt>&nbsp;<tt> </tt>&nbsp;Potential softening parameter [0.05]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; usequad   <tt> </tt>&nbsp;<tt> </tt>&nbsp;Option to include quadrupole terms (.TRUE./.FALSE.) [.FALSE.]
</pre><p>
The second file has to be named <b>TREEBI</b>, and contains the input  bodies
in a format described in <a href='stoa.1.html'><i>stoa(1NEMO)</i></a>
. <p>
Output files created are <b>TREEBOA</b>,
which contains all the requested (see <b>noutbod</b>) output snapshots  in ascii
<a href='atos.1.html'><i>atos(1NEMO)</i></a>
 format, <b>TREELOG</b>, which contains a log (see <b>noutlog</b>) of the
run and <b>TREEBO</b>, which contains a binary (machine dependable) dump of the
last snapshot. <i>Note that these three output files must not be present when
the  program is to be run.</i> (ANSI FORTRAN)  <p>
To avoid excessive overhead,
<b>noutlog</b> should be larger than 1, typically ~ 10, depending on total number
of steps though. 
<h2><a name='sect4' href='#toc4'>Running</a></h2>
A shell script <b>runtreecode2</b> is available to ease
running this program slightly, and also prevents you from running two versions
of <b>treecode2</b> in the same directory. Script usage: <p>
<b>runtreecode2</b> <i>input_snapshot
output_snapshot pars_file</i> <p>
The <i>input_snapshot</i> and  <i>output_snapshot</i> are now
in <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
 format, whereas the <i>pars_file</i> is in the format described
in the previous <b>PARAMETERS</b> section. <p>
A regular NEMO program <b>treecode0</b> can
also be used. Although very similar in operation to the abovementioned script,
it makes running multiple versions of the programs a bit more transparant,
and equal to running other programs in the NEMO environment. 
<h2><a name='sect5' href='#toc5'>Make</a></h2>
The accompanying
Makefile has targets to compile treecode2 on the Cray, Sun and Vax, by
appropiately defining the <b>OS=</b> macro in the Makefile, as well as running
benchmarks within NEMO&rsquo;s environment. See Makefile for details. 
<h2><a name='sect6' href='#toc6'>Benchmarks</a></h2>
Timings
from the running the standard benchmark (see also <a href='hackcode1.1.html'><i>hackcode1(1NEMO)</i></a>
 from
the makefile (cpu times are in seconds): <br>
<pre>machine <tt> </tt>&nbsp;<tt> </tt>&nbsp;cpu<tt> </tt>&nbsp;<tt> </tt>&nbsp;compiler<tt> </tt>&nbsp;<tt> </tt>&nbsp;OS
Cray YMP<tt> </tt>&nbsp;<tt> </tt>&nbsp;1.625<tt> </tt>&nbsp;<tt> </tt>&nbsp;cf77 -dp<tt> </tt>&nbsp;<tt> </tt>&nbsp;Unicos ...
SGI     <tt> </tt>&nbsp;<tt> </tt>&nbsp;8.5<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -O3     <tt> </tt>&nbsp;<tt> </tt>&nbsp;IRIX Release 4.0.5F System V<tt> </tt>&nbsp;<tt> </tt>&nbsp;
SGI     <tt> </tt>&nbsp;<tt> </tt>&nbsp;11.9<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -O     <tt> </tt>&nbsp;<tt> </tt>&nbsp;IRIX Release 4.0.5F System V<tt> </tt>&nbsp;<tt> </tt>&nbsp;
Sparc 10/30<tt> </tt>&nbsp;<tt> </tt>&nbsp;9.3<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -cg89 -dalign -fast -O<tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 4.1.3 - SC1.0
Sparc 10/30<tt> </tt>&nbsp;<tt> </tt>&nbsp;8.6<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -cg92 -dalign -fast -O<tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 4.1.3 - SC2.0.1
Sparc 10/30<tt> </tt>&nbsp;<tt> </tt>&nbsp;8.0<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -cg92 -dalign -fast -O4 -libmil<tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 4.1.3 - SC2.0.1
Sparc 10/51<tt> </tt>&nbsp;<tt> </tt>&nbsp;6.6<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -cg92 -dalign -fast -O4 -libmil<tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 5.3 - SC2.0.1
Sparc 1 (4/60)<tt> </tt>&nbsp;<tt> </tt>&nbsp;68.5<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -O      <tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 4.1.3 - SC1.0
Sparc 1 (4/60)<tt> </tt>&nbsp;<tt> </tt>&nbsp;56.2<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -cg89 -dalign -fast -O<tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 4.1.3 - SC1.0
Sun 3/60<tt> </tt>&nbsp;<tt> </tt>&nbsp;1784.0<tt> </tt>&nbsp;<tt> </tt>&nbsp;f77 -O     <tt> </tt>&nbsp;<tt> </tt>&nbsp;SUN OS 4.1.1 - SC1.0
</pre>
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Lars Hernquist 
<h2><a name='sect8' href='#toc8'>Files</a></h2>
<br>
<pre>~/usr/lars/treecode2/        <tt> </tt>&nbsp;<tt> </tt>&nbsp;original LARS version
~/src/nbody/evolve/treecode2/<tt> </tt>&nbsp;<tt> </tt>&nbsp;official NEMO version (ASCII atos/stoa I/O)
</pre>
<h2><a name='sect9' href='#toc9'>See Also</a></h2>
<a href='hackcode1.1.html'>hackcode1(1NEMO)</a>
, <a href='treecode.1.html'>treecode(1NEMO)</a>
, <a href='nbody0.1.html'>nbody0(1NEMO)</a>
, <a href='atos.1.html'>atos(1NEMO)</a>
,
<a href='tabtos.1.html'>tabtos(1NEMO)</a>
 
<h2><a name='sect10' href='#toc10'>History</a></h2>
<br>
<pre>xx-xxx-xx<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2 allows quadrupole terms<tt> </tt>&nbsp;<tt> </tt>&nbsp;Lars Hernquist (@UCB)
xx-xxx-xx<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1 optimized 2D and 3D versions of the code<tt> </tt>&nbsp;<tt> </tt>&nbsp;LH
1-sep-86<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.2 allow arbitrary large values of tol=<tt> </tt>&nbsp;<tt> </tt>&nbsp;LH
18-nov-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;&rsquo;V2&rsquo; non-recursive vectorized version         <tt> </tt>&nbsp;<tt> </tt>&nbsp;LH (@IAS)
xx-apr-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;Directory made for NEMO&rsquo;s export           <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
5-jun-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;Document created                        <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
23-oct-91<tt> </tt>&nbsp;<tt> </tt>&nbsp;Cray tests - disabled SECOND in treeutil.f<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-apr-94<tt> </tt>&nbsp;<tt> </tt>&nbsp;added benchmark docs                    <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Running</a></li>
<li><a name='toc5' href='#sect5'>Make</a></li>
<li><a name='toc6' href='#sect6'>Benchmarks</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Files</a></li>
<li><a name='toc9' href='#sect9'>See Also</a></li>
<li><a name='toc10' href='#sect10'>History</a></li>
</ul>
</body>
</html>
