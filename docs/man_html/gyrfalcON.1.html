<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>gyrfalcON(1falcON) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>name</a></h2>
gyrfalcON - a superberb N-body code (public version) 
<p> 
<h2><a name='sect1' href='#toc1'>synopsis</a></h2>
<b>gyrfalcON</b>
[parameter=value] 
<p> 
<h2><a name='sect2' href='#toc2'>requirement</a></h2>
requires NEMO version 3.2.1 or higher, see
<a href='http://www.astro.umd.edu/nemo.'>http://www.astro.umd.edu/nemo.</a>
 It is recommended to configure NEMO with <b>configure
--enable-single --enable-lfs</b>. 
<p> 
<h2><a name='sect3' href='#toc3'>description</a></h2>
<b>gyrfalcON</b> stands for "GalaxY simulatoR
using <b>falcON</b>". It is a full-fledged N-body code using Walter Dehnen&rsquo;s force
algorithm of complexity O(N) (<b>falcON</b>), which is about 10 times faster than
an optimally coded tree code. <b>gyrfalcON</b> features individual adaptive time
steps and individual (but fixed) softening lengths. 
<p> 
<h2><a name='sect4' href='#toc4'>parameters controlling
I/O</a></h2>

<p> 
<dl>

<dt><b>in=</b><i>file</i> </dt>
<dd>Input data is read from <i>file</i>, which must be in NEMO snapshot
format.  If <i>file</i>=-, input is expected from stdin, useful for piping data
from another program. Default: <b>required</b>. </dd>

<dt><b>out=</b><i>file</i> </dt>
<dd>Unless <b>resume=t</b> (see below),
primary output is written to <i>file</i> in NEMO snapshot format. If <i>file</i>=-, output
is written to stdout; If <i>file</i>=., no output is made. Default: <b>required</b> unless
<b>resume=t</b>. </dd>

<dt><b>give=</b><i>IOstring</i> </dt>
<dd>Specifies which data are given with primary data
output. <i>IOstring</i> must be an unbroken string of characters, each of which
indicates a datum (per body) to be written. The meanings are as follows.
<b>m</b>=mass, <b>x</b>=position, <b>v</b>=velocity, <b>p</b>=N-body potential, <b>q</b>=external potential
(to be added to the N-body potential), <b>a</b>=acceleration, <b>e</b>=individual softening
lengths, and <b>l</b>=time-step levels. Default: <b>mxv</b>. </dd>

<dt><b>step=</b><i>val</i> </dt>
<dd>Primary data output
is made every <i>val</i> simulation time units. If <i>val</i>=0 output is made every blockstep.
Default: <b>1</b>. </dd>

<dt><b>startout=t|f</b> </dt>
<dd>Write primary output at the initial simulation time.
Default <b>t</b>. </dd>

<dt><b>lastout=t|f</b> </dt>
<dd>Write primary output at the last simulation time,
even if not at an ordinary output step. Default: <b>t</b>. </dd>

<dt><b>out2=</b><i>file</i> </dt>
<dd>If given, secondary
output is written to <i>file</i> in NEMO snapshot format. If <i>file</i>=-, output is written
to stdout; If <i>file</i>=., no secondary output is made. No default. </dd>

<dt><b>give2=</b><i>IOstring</i>
</dt>
<dd>Specifies which data are given with primary data output; same format as
for <b>give</b>. Default: <b>mxv</b>. </dd>

<dt><b>step2=</b><i>val</i> </dt>
<dd>Scondary data output is made every <i>val</i>
simulation time units. If <i>val</i>=0, output is made every blockstep. Useful for
piping results to an analysing programm. Default: <b>mxv</b>. </dd>

<dt><b>logfile=</b><i>file</i> </dt>
<dd>Log output
(time, total energy, angular momentum, CPU time consumption etc) is written
to <i>file</i>. If <i>file</i>=-, log output is made to stdout. Default: <b>-</b>. </dd>

<dt><b>logstep=</b><i>num</i> </dt>
<dd>Log
output is made every <i>num</i> blocksteps. Default <b>1</b>. </dd>

<dt><b>resume=t|f</b> </dt>
<dd>Resume an old simulation:
input is read from the last snapshot in the <b>in</b>put file; primary data output
is appended to the same file (<i>out</i> is ignored). Default: <b>f</b>. 
<p> </dd>
</dl>

<h2><a name='sect5' href='#toc5'>parameters controlling
the time integration</a></h2>

<p> 
<dl>

<dt><b>tstop=</b><i>val</i> </dt>
<dd>The simulation shall be halted at simulation
time=<i>val</i>. By default, the simulation will not be stopped at a pre-defined
time, see also <b>stopfile</b>. If <i>val</i> equals the initial simulation time, the
initial forces are computed and, if so desired, output is made for this
time only. No Default. </dd>

<dt><b>stopfile=</b><i>file</i> </dt>
<dd>If given, the code stops as soon as
<i>file</i> is found to exist. If <b>lastout=t</b>, a final output is made. This mechanism
allows a controlled end of a simulation: an analyzing tool, which obtains
the simulation data via the pipe from gyrfalcON&nbsp;may find that a pre-set condition
for ending the simulation is satisfied and create a stopfile. No Default.
</dd>

<dt><b>kmax=</b><i>val</i> </dt>
<dd>The longest time step is taken to be <b>tau</b>=2^(-<i>val</i>) simulation time
units long. Default: <b>required</b>. </dd>

<dt><b>Nlev=</b><i>num</i> </dt>
<dd><i>num</i> time-step levels will be used.
If <i>num</i>=1, a leap-frog integrator with constant global time step <b>tau</b> is used.
Otherwise, if <i>num</i>&gt;1, a block-step scheme with <i>num</i> time-step levels is used,
i.e. the longest step contains 2^(<i>num</i>-1) shortest steps. The bodies&rsquo; individual
time-step levels are adapted in an (almost) time symmetric fashion as controlled
by the parameters <b>fac</b>, <b>fph</b>, <b>fpa</b>, and <b>fea</b>. </dd>

<dt><b>fac=</b><i>fac</i> <b>fph=</b><i>fph</i> <b>fpa=</b><i>fpa</i> <b>fea=</b><i>fea</i>
</dt>
<dd>
<p>These factors control the average time step of a body to be the minimum

<p>of 
<p> <i>fac</i>/|<b>a</b>|, 
<p> <i>fph</i>/|<b>Phi</b>|, 
<p> <i>fpa</i>*sqrt(|<b>Phi</b>|)/|<b>a</b>|, and 
<p> <i>fea</i>*sqrt(<b>e</b>/|<b>a</b>|), 
<p> where <b>a</b>, <b>Phi</b>,
and <b>e</b> denote the acceleration, potential and softening length, respectively.
If either of these factors is zero, it is ignored. 
<p> In order to make a sensible
choice for <b>hmin</b>, <b>Nlev</b>, <b>fac</b>, <b>fph</b>, <b>fpa</b>, and <b>fea</b>, use the following method.
(1) Decide on the smallest time step: think what time step you would use
in a single-time-step leap-frog scheme and then set <b>tau</b> (via <b>hmin</b>) to about
half of that. (2) Decide on the largest time step, whereby ensuring that
orbits in regions of very low density are accurately integrated when using
the above criterion.  (3) Do some tests with varying <b>fac</b>, <b>fph</b>, <b>fpa</b>, and
<b>fea</b> (set <b>tstop=0</b>), in order to check that the distribution of bodies over
the time steps is reasonable, in particular there should be a few percent
in the smallest time step. 
<p> Note that using this scheme is sensible only
if you really have a very inhomogeneous stellar system, because otherwise,
the simple single-time-step leap-frog is only slightly less efficient but
somewhat more accurate. In particular, with the block-step scheme, the total
momentum is not conserved, but with the single-time-step leap-frog it is. No
defaults. 
<p> </dd>
</dl>

<h2><a name='sect6' href='#toc6'>parameters controlling  Gravity</a></h2>

<p> 
<dl>

<dt><b>theta=</b><i>val</i> </dt>
<dd>The tolerance parameter
for <b>falcON</b> is set to <i>val</i>. It is recommended to stick to the default or smaller
value, but see the discussion in the <b>falcON</b> user guide Default: <b>0.6</b>. </dd>

<dt><b>Ncrit=</b><i>num</i>
</dt>
<dd>In building the tree, a cell containg <i>num</i> bodies or less is not splitted.
This parameter controls the speed with which the tree is build. The default
is chosen to yield best performance for a single time step leap-frog scheme.
If you are using individual adaptive time steps (see above), you may consider
to increase <i>num</i> somewhat. This has little effect on the forces (actually
makes them slightly more accurate) but may reduce the CPU time consumption
(only with individual adaptive time steps). Default: <b>6</b>. </dd>

<dt><b>eps=</b><i>val</i> </dt>
<dd>If <i>val</i>&gt;=0,
<i>val</i> is taken to be the (globally constant) softening length. If <i>val</i>&lt;0, bodies
are assumed to have inidividual softening lengths, which must be provided
with the input data. The individual softening lengths will be kept fixed
at their initial values throughout the simulation. With this method, you
can have larger softening length for more massive bodies, in order to have
the same maximum force (requiring individual softening lengths proporptional
to the square root of the body mass). Default: <b>0.05</b>. </dd>

<dt><b>kernel=</b><i>num</i> </dt>
<dd>The softening
kernel is taken to be the P<i>num</i> kernel (see the documentation in the user
guide). Default: <b>1</b>. </dd>

<dt><b>Grav=</b><i>val</i> </dt>
<dd>The numerical value of Newton&rsquo;s constant of gravity
is set to <i>val</i>. Default: <b>1</b>. </dd>

<dt><b>hgrow=</b><i>num</i> </dt>
<dd>With this option you can suppress the
re-growing of the tree every (shortest) time step. Instead, the tree is grown
only every 2^(<i>num</i>) shortest steps and re-used otherwise. Note, however that
re-using the tree violates time symmetry. I have not much experience with
this option and recommend not to use it, unless you want to validate it
first. </dd>

<dt><b>root_center=</b><i>x,y,z</i> </dt>
<dd>If given, the root cell of the oct-tree used in
the <b>falcON</b> algorithm is centred on the position <i>x,y,z</i>. No default. </dd>

<dt><b>accname=</b><i>name</i>
</dt>
<dd>If given, an external acceleration field with that name is used. The code
searches for a shared object file and loads it dynamically. If the shared
object file does not contain functionality for an external acceleration
field, but for an external old-style <b>NEMO</b> potential, that is used to construct
an acceleration field (fall-back mechanism).  Several acceleration fields
may be added by the syntax <b>accname=</b><i>name1</i><b>+</b><i>name2</i><b>+</b><i>name3</i>.  No default. 
<p> </dd>

<dt><b>accpars=</b><i>parameter
list</i> </dt>
<dd>If <b>accname</b> is given, the external acceleration field is using the
<i>parameter list</i>, a comma-separated list of floating point numbers, for initialisation.
If more than one <b>accname</b> is given, a parameter list (possibly empty) must
be given for each, separated by either <b>;</b> or <b>#</b>. No default. </dd>

<dt><b>accfile=</b><i>file</i> If
<b>accname</b> is given, the external </dt>
<dd>acceleration field is using the the <i>file</i>,
if any, for initialisation. If more than one <b>accname</b> is given, a file name
(possibly empty) must be given for each, separated by either <b>;</b> or <b>#</b>. No
default. 
<p> </dd>
</dl>

<h2><a name='sect7' href='#toc7'>other parameters</a></h2>

<dl>

<dt><b>manipname=</b><i>name</i> </dt>
<dd>If given, a run-time manipulator
with that name is used. The code searches for a shared object file and loads
it dynamically. Several manipulators may be concatinated by the syntax <b>manipname=</b><i>name1</i><b>+</b><i>name2</i><b>+</b><i>name3</i>.
No default. </dd>

<dt><b>manippars=</b><i>parameter list</i> </dt>
<dd>If <b>manipname</b> is given, the run-time
manipulator is using the <i>parameter list</i>, a comma-separated list of floating
point numbers, for initialisation. If more than one <b>manipname</b> is given,
a parameter list (possibly empty) must be given for each, separated by
either <b>;</b> or <b>#</b>. No default. </dd>

<dt><b>manipfile=</b><i>file</i> </dt>
<dd>If <b>manipname</b> is given, the run-time
manipulator is using the the <i>file</i>, if any, for initialisation. If more than
one <b>manipname</b> is given, a file name (possibly empty) must be given for
each, separated by either <b>;</b> or <b>#</b>. No default. </dd>

<dt><b>manippath=</b><i>path</i> </dt>
<dd>If <b>manipname</b>
is given, the path <i>path</i> is searched for a file <b>manipname.so</b> to lead the
manipulator. By default, the path searched is ".:$FALCON/manip". 
<p> </dd>
</dl>

<h2><a name='sect8' href='#toc8'>example</a></h2>

<p>
In order to integrate a Plummer sphere with N=10^5 particles, you may issue
the command <p>
<b>mkplum - 100000 seed=1 | gyrfalcON - plum.snp tstop=10 kmax=6 eps=0.1
<p>
which first creates initial conditions from a Plummer model, which are
then piped into <b>gyrfalcON</b></b>. <b>gyrfalcON</b> creates an output file <b>plum.snp</b> containing
output every full time unit until time t=10. The log output looks like this:
<p>
<br>
<pre># ---------------------------------------------------------------------------------------------------------------------------
# "gyrfalcON - plum.snp tstop=10 kmax=6 eps=0.1"
#
# run at  Wed Feb 28 09:36:44
#     by  "wd11"
#     on  "virgo"
#     pid  5620
#
#    time       E=T+V        T          V_in        W         -2T/W    
|L|      |v_cm| l2R  D  tree  grav  step  accumulated
# ---------------------------------------------------------------------------------------------------------------------------
 0.0000     -0.1461342    0.14677    -0.29290    -0.29161    1.0066  0.0021715  0.0017
   9 16  0.07  0.94  1.02   0:00:01.02
 0.015625   -0.1461343    0.14677    -0.29290    -0.29161    1.0066  0.0021715  0.0017
   9 16  0.05  0.95  1.02   0:00:02.04
 0.031250   -0.1461347    0.14677    -0.29290    -0.29161    1.0066  0.0021714  0.0017
   9 16  0.04  0.95  1.02   0:00:03.06
 0.046875   -0.1461345    0.14677    -0.29290    -0.29161    1.0066  0.0021714  0.0017
   9 16  0.04  0.96  1.02   0:00:04.08
 .
 .
 .
 9.9531     -0.1461328    0.14451    -0.29065    -0.28940    0.99873 0.0021646  0.0017
   9 16  0.05  0.96  1.03   0:10:47.70
 9.9688     -0.1461329    0.14451    -0.29065    -0.28939    0.99873 0.0021646  0.0017
   9 16  0.05  0.95  1.01   0:10:48.71
 9.9844     -0.1461329    0.14451    -0.29064    -0.28939    0.99872 0.0021646  0.0017
   9 16  0.06  0.95  1.02   0:10:49.73
 10.000     -0.1461333    0.14451    -0.29064    -0.28940    0.99870 0.0021647  0.0017
   9 16  0.04  0.95  1.01   0:10:50.74

output data warning (NEMO)gyrfalcON, much like ZENO programs, writes a
new type of SnapShot files, in which the PhaseSpace array has been split
into a Position and Velocity array. The get_snap macros  understand this
flavor, but will - for now - convert the data back into the less flexible
type with combined PhaseSpace coordinates.  see alsoaddgravity(1falcON),
getgravity(1falcON) 
Dehnen, W., 2000, ApJ, 536, L39
Dehnen, W., 2001, MNRAS, 324, 273
Dehnen, W., 2002, JCP, 179, 27

files
falcON/doc/user_guide.pdf                         User Guide for falcON
</pre>
<p> 
<h2><a name='sect12' href='#toc12'>Ads</a></h2>
@ads <A HREF=https://ui.adsabs.harvard.edu/abs/2002JCoPh.179...27D> 2002JCoPh.179...27D </A>
<p> 
<h2><a name='sect13' href='#toc13'>author</a></h2>
<br>
<pre>Walter Dehnen                              walter.dehnen@astro.le.ac.uk
update history of this man page
18-may-2004<tt> </tt>&nbsp;<tt> </tt>&nbsp;first version of manual    WD
01-jul-2004<tt> </tt>&nbsp;<tt> </tt>&nbsp;version 2.2 of gyrfalcON   WD
27-sep-2005<tt> </tt>&nbsp;<tt> </tt>&nbsp;version 3.0.4 of gyrfalcON WD
28-feb-2007     version 3.0.9 of gyrfalcON WD
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>name</a></li>
<li><a name='toc1' href='#sect1'>synopsis</a></li>
<li><a name='toc2' href='#sect2'>requirement</a></li>
<li><a name='toc3' href='#sect3'>description</a></li>
<li><a name='toc4' href='#sect4'>parameters controlling I/O</a></li>
<li><a name='toc5' href='#sect5'>parameters controlling the time integration</a></li>
<li><a name='toc6' href='#sect6'>parameters controlling  Gravity</a></li>
<li><a name='toc7' href='#sect7'>other parameters</a></li>
<li><a name='toc8' href='#sect8'>example</a></li>
<li><a name='toc9' href='#sect9'>output data warning (NEMO)</a></li>
<li><a name='toc10' href='#sect10'>see also</a></li>
<li><a name='toc11' href='#sect11'>files</a></li>
<li><a name='toc12' href='#sect12'>Ads</a></li>
<li><a name='toc13' href='#sect13'>author</a></li>
<li><a name='toc14' href='#sect14'>update history of this man page</a></li>
</ul>
</body>
</html>
