<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>COMMAND(3NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
command_init, command_register, command_get, command_read, command_close
- command parser 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<br>
<pre>#include &lt;command.h&gt;command *command_init(string name);void command_register(command
*c, string cmd, string argtypes, string help);string *command_get(command
*c);void command_close(command *c);</pre>
<h2><a name='sect2' href='#toc2'></b>Description</a></h2>
These routines allow you
to define a set of commands that can be used to interactively marshall
a set of functions with checked and optional arguments. All information
 is stored in a data structure <b>command</b> (which should remain opaque). <p>
After
obtaining this data structure with <b>command_init</b> (the <b>name</b> is merely used
to allow multiple commands to live peacefully together when doing disk
I/O operations), commands (or actions if you wish) need to be registered
with <b>command_register</b>. In addition to the command, the argument types also
need to be supplied. Currently only integer, real, string and optional arguments
are allowed, designated by the characters <b>"irs."</b> resp. If no arguments are
allowed, the <b>argtypes</b> string should be left blank (but not NULL). <p>
The command
parser returns a valid <i>argv</i> like array of strings from command_get, but
it is currentlyu left to the user to parse these correctly, despite the
earlier registration requirements (e.g. they lack a function pointer). <p>
command_close
is called to free up all memory associated with the command parser. 
<h2><a name='sect3' href='#toc3'>Example</a></h2>
A
good full example can be found in the TESTBED section of command.c, producing
a commandtest executable with which features can be excersized. Here is
a  brief outline: <br>
<pre>  #include &lt;command.h&gt;
  ...
  void do_a(int), do_b(int, double);
  ...
  string *argv;
  ..
  command cmd = command_init(name);                 /* initialize */
  command_register(cmd,"a","i",  "foo bar");        /* register commands
*/
  command_register(cmd,"b","ir", "fum bar");
  command_register(cmd,"quit","","alternate form of quit");
  while((argv=command_get(cmd))) {                  /* loop getting arguments
*/
    na = xstrlen(argv,sizeof(string))-1;
    if (streq(argv[0],"quit")) {
<tt> </tt>&nbsp;<tt> </tt>&nbsp;break;
    } else if (streq(argv[0],"a")) {
      do_a(natoi(argv[1]));
    } else if (streq(argv[0],"b")) {
      do_b(natoi(argv[1]), natof(argv[2]));
    } 
    freestrings(argv);
  }
  command_close(cmd);
</pre>
<h2><a name='sect4' href='#toc4'>Files</a></h2>
NEMO/src/kernel/io/command.c 
<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='getparam.3NEMO.html'>getparam(3NEMO)</a>
, <a href='promptparam.3NEMO.html'>promptparam(3NEMO)</a>


<h2><a name='sect6' href='#toc6'>Caveats</a></h2>
There is no programming language associates with this command parser.
The user is responsible to correctly matching commands to actions. 
<h2><a name='sect7' href='#toc7'>History</a></h2>
<br>
<pre>24-dec-2003<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 - written for SIRTF&rsquo;s map2 project<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
18-feb-2004<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1 - implemented command_read<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre>
<p> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Example</a></li>
<li><a name='toc4' href='#sect4'>Files</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Caveats</a></li>
<li><a name='toc7' href='#sect7'>History</a></li>
</ul>
</body>
</html>
