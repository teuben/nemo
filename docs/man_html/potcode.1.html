<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>POTCODE(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
potcode - non-selfconsistent N-body code with options to dissipate/diffuse
orbits 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>potcode</b> [<i>parameter</i>=<i>value</i>] ... 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>potcode</i> is an equal-timestep
N-body integrator which is not  self-consistent. The forces and potential
are obtained from a standard potential descriptor, given by the three keywords
<b>potname=,potpars=,potfile=</b> (See also <i>potential(3,5NEMO)</i>). If the potential
is conservative, the energy will (should) be conserved, but the user is
of course free to pick any potential. <p>
In addition to integrating the equations
of motion, the particles are allowed to loose some (<b>eta</b>) of their random
energy (smoothed over a certain &lsquo;&lsquo;box&rsquo;&rsquo; size (<b>cell</b>)), and turn it into mean
orbital motion.  <p>
Orbits can also be diffused: each timestep the velocity
vector  can be rotated over the randomly gaussian distributed angle (<b>sigma</b>).
<p>
A special integration mode (mode=-1) will advance particles assuming their
orbits are epicycles, and launched with velocities deviating from the angular
velocity consistent with rotation. The supplied potential should be axisymmetric
and numerical derivatives are used to calculate the  angular, radial and
vertical frequencies such that the orbital motions can be solved for analytically.
from their guidance center. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
 The following parameters are recognized
in order; they may be given in any order if the keyword is also given. Use
--help to confirm this man page is up to date.  
<dl>

<dt><b>in=</b><i>in-file</i> </dt>
<dd>Initial conditions
will be read from <i>in-file</i> in snapshot format [default: none - but is required].
</dd>

<dt><b>out=</b><i>out-file</i> </dt>
<dd>If given, results are written to <i>out-file</i> in snapshot format
[default: empty, no snapshot output file produced]. </dd>

<dt><b>potname=</b><i>name</i> </dt>
<dd>name of
file of <a href='potential.5.html'><i>potential(5NEMO)</i></a>
 descriptor  [default: <b>harmonic</b>]. </dd>

<dt><b>potpars=</b><i>par-list</i>
</dt>
<dd>List of parameters to the potential descriptor. The first parameter must
be the pattern speed in the x-y plane, although rotating frames of reference
are not yet supported. The remaining parameters are used by the <i>_inipotential()</i>
routine in the potential descriptor. [default: none - let them be defined
by routine itself]. </dd>

<dt><b>potfile=<i>file-name</i></b> </dt>
<dd>name of an optional datafile to the
potential descriptor. This might be an N-body snapshot or list of spline
fit coefficients etc. [default: none]. </dd>

<dt><b>save=</b><i>state-file</i> </dt>
<dd>If given, the system
state will be saved in <i>state-file</i> after each timestep. Useful for some recovery
after system crashes. </dd>

<dt><b>freq=</b><i>integ-freq</i> </dt>
<dd>Inverse time-step, to be used with the
time integrator. [Default: <b>64.0</b> (64 steps per unit time)]. </dd>

<dt><b>mode=</b><i>mode-number</i>
</dt>
<dd>Integration modes, must be a number: <br>
<pre>0=Euler (kick and drift at same time)
1=PC (Predictor Corrector) algorithm, 
2=modified PC algorithm, 
3=Runge-Kutta (JEB modified)
4=4th order Runge-Kutta.
5=leapfrog
6=modified Euler (kick done after drift)
-1=special epicyclic motion, full motion)
-2=special epicyclic motion, shows only epi motion
</pre>[default: <b>3]. </dd>

<dt><b>tstop=</b></b><i>stop-time</i> </dt>
<dd>Time to stop integration in N-body model units.
Default is <b>2.0</b>. </dd>

<dt><b>freqout=</b><i>out-freq</i> </dt>
<dd>Frequency of major N-body data outputs. Default
is <b>4.0</b> (4 frames per unit time). </dd>

<dt><b>minor_freqout=</b><i>out-freq</i> </dt>
<dd>Frequency of minor
diagnostic outputs. Default is <b>32.0</b> (32 diagnostic measurements per unit
time). </dd>

<dt><b>options=</b><i>option-string</i> </dt>
<dd>Miscellaneous control options, specified as
a comma-separated list of keywords. Currently recognized keywords are: <b>reset_time</b>:
when reading initial data, set <i>tnow</i> to zero; <b>new_tout</b>: when restarting,
set new output times; <b>mass</b>, <b>phi</b>, <b>acc</b>: output mass, potential, acceleration
data with major data outputs. </dd>

<dt><b>eta=</b><i>loss-fraction</i> </dt>
<dd>Fraction of random energy
that is dissipated [Default: <b>0.0</b>]. </dd>

<dt><b>cell=</b><i>box-size</i> </dt>
<dd>Cell size in which dissipation
is performed after every timestep. Dissipation is current performed on a
cartesian grid, in which  cells are <a href='square.2D.html'>square (2D)</a>
 or a <a href='cube.3D.html'>cube (3D)</a>
. [Default:
<b>0.1</b>]. </dd>

<dt><b>rmax=</b><i>max_box-size</i> </dt>
<dd>Maximum size of the "box" (actually cube) within which
dissipation is performed. If a negative number is given, the box is allow
to grow as large as is needed, though this may consume a lot of memory.
Default: <b>-1</b>, i.e. box can grow indefinite. </dd>

<dt><b>fheat=</b><i>fheat</i> </dt>
<dd>The ratio of diffusion
angle to rms velocity dispersion in a cell. If <i>fheat&gt;0</i>, each time dissipation
is applied, the rms velocity dispersion in a cell is computed, and a diffusion
angle computed. The velocity vector of each particle is then rotated with
a gaussian distributed value with rms <i>fheat*velsig</i>. This in effect gives
a dissipation dependant heating source. See also <b>sigma=</b>, which is position
independant. [Default: <b>0</b>]. </dd>

<dt><b>sigma=</b><i>angle</i> </dt>
<dd>Diffusion angle, gaussian distributed
with this sigma, about which each velocity vector is rotated after each
timestep. [Default: <b>0</b>]. </dd>

<dt><b>seed=</b><i>random-seed</i> </dt>
<dd>Random number seed, only used when
diffusion (<b>sigma=</b>) is used. 0 must be used to get the random seed from the
time of the day. [Default: <b>0</b>]. </dd>

<dt><b>headline=</b> </dt>
<dd>Identifying text for this run. Default:
not used. 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Bugs</a></h2>
RK, PC and PC1 don&rsquo;t work in rotating potential - use EULER
or RK4. <p>
Since <b>cell</b> is a fixed number throughout the execution, is doesn&rsquo;t
deal well with systems who&rsquo;s lenght-scale changes, in particular, expanding
systems will allocate more and more space to hold the dissipation grid.

<p> 
<h2><a name='sect5' href='#toc5'>Dissipation</a></h2>
Various schemes of dissipation can be invoked. Here&rsquo;s one, see
also Lin &amp; Pringle (1974): <p>
For each cell the relative position and velocity
for each particle within that cell is computed: <br>
<pre>        R   =  r  - &lt;r &gt;
         i      i     i
        V   =  v  - &lt;v &gt;
         i      i     i
</pre>after which the dimensionless viscosity parameter &rsquo;alpha&rsquo; controls the new
velocity for each particle after a timestep: <br>
<pre>                                 &lt; R  x  V &gt;
                                    j     j
        u  =  &lt;v&gt;  - alpha  R  x ------------   +  (1-alpha) V
         i      i            i                                i
                                 &lt; R  .  R &gt;
                                    j     j  
</pre>
<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='newton0.1.html'>newton0(1NEMO)</a>
, <a href='hackcode1.1.html'>hackcode1(1NEMO)</a>
, <a href='hackcode3.1.html'>hackcode3(1NEMO)</a>
, <a href='nbody0.1.html'>nbody0(1NEMO)</a>
,
<a href='snappot.1.html'>snappot(1NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
 <br>
<pre>https://ui.adsabs.harvard.edu/abs/2004MNRAS.352.1199M (mode=-1)
</pre>
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Peter Teuben 
<h2><a name='sect8' href='#toc8'>Update History</a></h2>
<br>
<pre>5-feb-89<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 written  <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
3-apr-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0 new potential(5), renamed keywords<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
9-jun-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.0 rotating pattern are now allowed - made rk4<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
17-jun-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.1 fix energy conservation in &rsquo;dissipation&rsquo;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
19-jun-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.2 added diffusion<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-oct-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.0 added rmax=, made options= same as hackcode1<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
24-oct-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.1 added fheat=        <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
5-mar-03<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.0 added mode=-1 to "integrate" orbits numerically on epicyclic orbits<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-jul-03<tt> </tt>&nbsp;<tt> </tt>&nbsp;(V5.1) compute guiding center<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT/RPO
12-aug-09<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.1 added leapfrog and modified euler<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
2-jul-21<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.2 fheat added, but not implemented<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Bugs</a></li>
<li><a name='toc5' href='#sect5'>Dissipation</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Update History</a></li>
</ul>
</body>
</html>
