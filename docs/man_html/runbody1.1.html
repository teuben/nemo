<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>RUNBODY1(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
runbody1, nbody1 - (frontend to) Aarseth N-body code 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<br>
<pre>runbody1 [parameter=value]
nbody1   &lt; nbody1.in
</pre>
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>runbody1</b> is a NEMO frontend to Aarseth&rsquo;s NBODY1 (fortran) program,
running the code in a run directory where all files are stored. <p>
The new
version 2.x interface tries to mimic to run NBODY1 in virial units with
a default input and output. In previous versions the defaults were more
geared towards running the classic interface where data were scaled and
times were measured in crossing times, making comparisons with other codes
in NEMO much harder. This however means it is now more work to make NBODY1
run in classic mode. Parameters names and meaning have not changed, except
for the introduction of kz(15), to work in code (virial) units. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The
following parameters are recognized in any order if the keyword is also
given: 
<dl>

<dt><b>in=</b> </dt>
<dd>input file (optional, see <b>nbody=</b> to generate your own input
 data on the fly). If input data are given, you must also set <a href='KZ.4.html'>KZ(4)</a>
=2 (see
 below).   WARNING:  The input snapshot will be mass-weight centered before
the integration started by NBODY1. Default: not used. </dd>

<dt><b>outdir=</b> </dt>
<dd>Output run
directory. This directory should not exist, although can be overriden with
NEMO&rsquo;s standard <b>error=</b> system keyword. No default. </dd>

<dt><b>nbody=</b> </dt>
<dd>** Total particle
number. The maximum value (NMAX) is compiled into the NBODY1 program. Note
that even if input files are supplied, this parameter is needed. No default.
</dd>

<dt><b>nfix=</b> </dt>
<dd>Output frequency of data save (<a href='KZ.3.html'>KZ(3)</a>
) or binaries (<a href='KZ.6.html'>KZ(6)</a>
). [Default:
1] </dd>

<dt><b>nrand=</b> </dt>
<dd>Random number sequence skip. [Default: 0] </dd>

<dt><b>nrun=</b> </dt>
<dd>Run identification
index. Not really used for anything, just a relic from nameless Aarseth-type
files. The <b>outdir</b> now has this function. [Default: 1] </dd>

<dt><b>eta=</b> </dt>
<dd>** Time-step parameter
for force polynomial. [Default: 0.02] </dd>

<dt><b>deltat=</b> </dt>
<dd>Output time interval in units
of the crossing time (M**2.5/(2E)**1.5). [Default: 0.25] </dd>

<dt><b>tcrit=</b> </dt>
<dd>Termination
time in units of the crossing time. [Default: 5] </dd>

<dt><b>qe=</b> </dt>
<dd>Energy tolerance (restart
if DE/E &gt; 5*QE &amp; <a href='KZ.2.html'>KZ(2)</a>
 &gt; 1) [Default: 2e-5] </dd>

<dt><b>eps=</b> </dt>
<dd>Potential softening parameter
     [Default: 0.01] </dd>

<dt><b>kz=</b> </dt>
<dd>** Non-zero options for alternative paths (see below)
 [Default: 1,2,1,2,0,0,0,0,0,1,1,0,0,0,1] <br>
<pre>   1  COMMON save on unit 1 if TCOMP &gt; CPU or if TIME &gt; TCRIT. [1]
   2  COMMON save on unit 2 at output (=1); restart if DE/E &gt; 5*QE (=2).
[2]
   3  Basic data written to unit 3 at output time (frequency NFIX). [1]
   4  Initial conditions on unit 4 (=1: output; =2: input). [2]
   5  Initial conditions (=0: uniform &amp; isotropic; =1: Plummer). [0]
   6  Output of significant binaries. [0]
   7  Output of movie frames on unit 7. [0]
   8  Generation of two subsystems (merger experiment). [0]
   9  Individual bodies printed at output time (MIN(5**KZ9,N)). [0]
  10  No scaling of initial conditions. [1]
  11  Modification of ETA by tolerance QE. [1]
  12  Initial parameters for binary orbit. [0]
  13  Escaper removal (R &gt; 2*RTIDE; RTIDE = 10*RSCALE). [0]
  14  Adjustment of coordinates &amp; velocities to c.m. condition. [0]
  15  Use code units for tcrit/deltat [1]
</pre></dd>

<dt><b>alphas=</b> </dt>
<dd>** Power-law index for initial mass function (routine DATA) [Default:
2.3] </dd>

<dt><b>body1=</b> </dt>
<dd>Maximum particle mass before scaling    [Default: 5.0] </dd>

<dt><b>bodyn=</b>
</dt>
<dd>Minimum particle mass before scaling    [Default: 1.0] </dd>

<dt><b>q=</b> </dt>
<dd>** Virial ratio
(q=0.5 for virial equilibrium)   [Default: 0] </dd>

<dt><b>vxrot=</b> </dt>
<dd>XY-velocity scaling
factor (&gt; 0 for solid-body rotation) [Default: 0] </dd>

<dt><b>vzrot=</b> </dt>
<dd>Z-velocity scaling
factor (not used if VXROT = [Default: 0] </dd>

<dt><b>rbar=</b> </dt>
<dd>Virial radius in pc (for
scaling to physical [Default: 1] </dd>

<dt><b>zmbar=</b> </dt>
<dd>Mean mass in solar units    [Default:
1] </dd>

<dt><b>xcm=</b> </dt>
<dd>** Displacement for subsystem (routine SCALE; <a href='KZ.8.html'>KZ(8)</a>
)  </dd>

<dt><b>ecc=</b> </dt>
<dd>Eccentricity
of relative motion for subsystem (ECC =&lt; 1) </dd>

<dt><b>kstart=</b> </dt>
<dd>** Run mode: 1=new &gt;1
restart, with increasing options of resetting  variables. Only new runs
are currently supported. </dd>

<dt><b>tcomp=</b> </dt>
<dd>not supposed to be used, but counts max
computing time alotted. </dd>

<dt><b>KZ#=</b> </dt>
<dd>Special indexed keyword to override <b>kz=</b>, for
example KZ4=1. </dd>

<dt><b>exe=</b> </dt>
<dd>Name of the (fortran) executable to run. [Default: nbody1]

<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Bugs</a></h2>
Scaling can cause output to become out of bounds. <p>
Coding the the input-order
logic in the frontend program can be hazardous to your health. It will depend
on how the NBODY1 main program is structured. 
<h2><a name='sect5' href='#toc5'>Input</a></h2>
Order of input lines
in "nbody1.in" for a new run (KSTART=1) <br>
<pre>          variables                   condition             where
  ----------------------------    -------------------<tt> </tt>&nbsp;<tt> </tt>&nbsp;  ---------
  KSTART TCOMP                                            MAIN
  Nbody NFIX NRAND NRUN                                   INPUT
  ETA DELTAT TCRIT QE EPS                                 INPUT
  KZ(1..15)                                               INPUT
      ALPHAS BODY1 BODYN          KZ(4).NE.2              DATA
      SEMI ECC                    KZ(12).NE.0             DATA
  Q VXROT VZROT RBAR ZMBAR                                SCALE
      NFRAME DELTAF               KZ(7).GT.0              SCALE
      XCM ECC                     KZ(8).GT.0              SUBSYS
</pre>
<h2><a name='sect6' href='#toc6'>Caveats</a></h2>
The input snapshot is (mass-weighted) centered before integration
is started. Not clear why kz(14) still gives some different answers. <p>
By decreasing
TCRIT, you <i>observe</i> the integrations at finer details, thus re-syncing all
particles again. This will have an effect on orbits 
<h2><a name='sect7' href='#toc7'>Examples</a></h2>
If you want
to use runnbody1 as a NEMO tool with snapshots in and out, here is an example
with a 128-body plummer sphere: <br>
<pre>   mkplummer p128 128
   runbody1 p128 run1 deltat=0.1 tcrit=10
</pre>This will create a run1/OUT3.snap. Code units are now used, not crossing
time units. 
<p> <p>
If however you want to use the more original NBODY1 flavored
run, pay attention to the kz= vector as the default will not suffice anymore.
<br>
<pre>   runbody1 outdir=run2 nbody=128 deltat=0.1 tcrit=10 kz=1,2,1,1,1
</pre>Note that requesting tcript=10 you will see the final snapshot written
at time=28.2843 because the crossing time is about 2.828 and tcrit is measured
in terms of crossing times, as opposed to code times for the default run
with kz(15)=1. 
<h2><a name='sect8' href='#toc8'>Benchmark</a></h2>
The command <br>
<pre>     make bench
</pre>will run a standard 1280 body plummer sphere benchark to T=10. 
<h2><a name='sect9' href='#toc9'>Caveats</a></h2>
<b>nbody1</b>
still uses the old-style individual time-steps with force polynomials, not
the <i>improved</i> hermite integrater that is embedded in later versions of the
NBODYx series. However, Sverre has made versions available with a hermite
integrator, see for example the micky-mouse version <i>nbody04h</i> described in
<a href='nbody0.1.html'><i>nbody0(1NEMO)</i></a>
. 
<h2><a name='sect10' href='#toc10'>See Also</a></h2>
<a href='nbody0.1.html'>nbody0(1NEMO)</a>
, <a href='runbody2.1.html'>runbody2(1NEMO)</a>
, <a href='runbody4.1.html'>runbody4(1NEMO)</a>
,
<a href='runbody6.1.html'>runbody6(1NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
, <a href='u3tos.1.html'>u3tos(1NEMO)</a>
, <a href='stou4.1.html'>stou4(1NEMO)</a>
 
<h2><a name='sect11' href='#toc11'>Files</a></h2>
<br>
<pre>$NEMO/src/nbody/evolve/aarseth/nbody1<tt> </tt>&nbsp;<tt> </tt>&nbsp;nbody code
$NEMO/src/nbody/evolve/aarseth/tools<tt> </tt>&nbsp;<tt> </tt>&nbsp;various tools code
$outdir/fort.1                       <tt> </tt>&nbsp;<tt> </tt>&nbsp;restart dump (compile time dep. size)
$outdir/fort.2                         <tt> </tt>&nbsp;<tt> </tt>&nbsp;restart dump (compile time dep. size)
$outdir/fort.4                         <tt> </tt>&nbsp;<tt> </tt>&nbsp;restart dump (compile time dep. size)
(see stou4(1NEMO) and u4tos(1NEMO))
$outdir/fort.7                         <tt> </tt>&nbsp;<tt> </tt>&nbsp;formatted frame files (option KZ(7))
$outdir/OUT3                        <tt> </tt>&nbsp;<tt> </tt>&nbsp;particle dump (see u3tos(1NEMO))
</pre>
<h2><a name='sect12' href='#toc12'>Author</a></h2>
Peter Teuben 
<h2><a name='sect13' href='#toc13'>Update History</a></h2>
<br>
<pre>4-mar-98<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1 documented, and changed out= to outdir=, n= to nbody= PJT
17-mar-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1a fixed bug when in= was specified
17-mar-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2 using fullname for in=
7-feb-2019<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0 better defaults for snapshot input<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
14-feb-2019<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1 default run now computes nbody= and converts to snapshot<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Bugs</a></li>
<li><a name='toc5' href='#sect5'>Input</a></li>
<li><a name='toc6' href='#sect6'>Caveats</a></li>
<li><a name='toc7' href='#sect7'>Examples</a></li>
<li><a name='toc8' href='#sect8'>Benchmark</a></li>
<li><a name='toc9' href='#sect9'>Caveats</a></li>
<li><a name='toc10' href='#sect10'>See Also</a></li>
<li><a name='toc11' href='#sect11'>Files</a></li>
<li><a name='toc12' href='#sect12'>Author</a></li>
<li><a name='toc13' href='#sect13'>Update History</a></li>
</ul>
</body>
</html>
