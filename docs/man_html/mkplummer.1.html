<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>MKPLUMMER(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
This HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A> for <A HREF=https://astronemo.readthedocs.io>NEMO</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
mkplummer - construct a Plummer model 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>mkplummer</b> [parameters=values...]

<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>mkplummer</i> constructs an N-body realization of a Plummer model,
with a spatial or mass based cut-off, after which it (optionally) performs
a coordinate transformation to the center-of-mass coordinate system. The data
are then written into a file <i>snap-file</i>, in a standard N-body <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>

format.   The model is constructed in VIRIAL or NBODY units (M=G=-4E=1, with
E the total energy), and finite spatial extent which can be regulated by
specifying <i>mfrac</i> or <i>rfrac</i> or using their default values.  The distribution
function of a Plummer model is spherically symmetric and isotropic, and
is a polytrope of index n = 5.  See also Aarseth et al. (1974) and Plummer
(1911). <p>
There is also an implementation in Dehnen&rsquo;s falcON suite: <a href='mkplum.1falcON.html'><i>mkplum(1falcON)</i></a>

<p>
For more advanced Plummer models, see <a href='mcluster.1.html'><i>mcluster(1NEMO)</i></a>
. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
 The following
parameters are recognized in order; they may be given in any order if the
keyword is also given. Use <b>--help</b> to confirm this man page is up to date. 

<dl>

<dt><b>out=</b><i>snapfile</i> </dt>
<dd>Output data is written into <i>snapfile</i>, in standard <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>

format. <br>
No default </dd>

<dt><b>nbody=</b><i>integer</i> </dt>
<dd>Number of particles in the model. <br>
No default. </dd>

<dt><b>mlow=</b><i>real</i> </dt>
<dd>inner core mass fraction within which no stars will
be populated. <br>
[Default: 0] </dd>

<dt><b>mfrac=</b><i>real</i> </dt>
<dd>mass fraction of the (otherwise infinitely extended)
Plummer model; see  rfrac immediately below  Note that the total mass is
still normalized to 1. <br>
[Default: <i>rfrac</i>=22.8042468] </dd>

<dt><b>rfrac=</b><i>real</i> </dt>
<dd>radius fraction of the (otherwise
infinitely extended) Plummer model. If <i>mfrac = 1.0</i> then particles will be
sprinkled in all over space. If <i>mfrac</i> &lt; 1.0 or <i>rfrac</i> &gt; 0.0 then each particle
is constrained to lie within both the radial and (cumulative) mass bound.
For example, if <i>rfrac</i>( <i>mfrac</i> ) &gt; <i>rfrac</i> then <i>rfrac</i> is the limiting factor,
but if <i>rfrac</i>( <i>mfrac</i> ) &lt; <i>rfrac</i> then <i>mfrac</i> limits the extent of the Plummer
realization.  Note: specifying either value may have no effect if the default
value of the other parameter is still the limiting factor; Beware! (Default:
<i>mfrac</i>=0.999; <i>rfrac</i>=22.8042468 , chosen so that the cumulative mass at <i>rfrac</i>
is <i>mfrac</i>). <br>
Default: .... </dd>

<dt><b>seed=</b><i>integer</i> </dt>
<dd>seed for the random number generator. A value of
0 (the default) will be converted into a unique new value using UNIX&rsquo;s clock
time, in seconds since 1970.0). See also <a href='xrandom.1.html'><i>xrandom(1NEMO)</i></a>
 for more options.
<br>
[Default: 0] </dd>

<dt><b>time=</b><i>time</i> </dt>
<dd>Time at which the snapshot applies <br>
[Default: 0.0] </dd>

<dt><b>zerocm=t|f</b> </dt>
<dd>Reset center of mass to zero? <br>
[Default: <b>t</b>]. </dd>

<dt><b>scale=</b><i>scale_factor</i> </dt>
<dd>A scale factor or scale to virial units
(M=G=-4E=1). Use -1 for virial units (see also UNITS below), and 1 to get
a model in structural (natural) units. Note: large scale factors means small
systems with large velocity disperson. <br>
[Default: <b>-1</b>]. </dd>

<dt><b>quiet=<i>level</i></b> </dt>
<dd>Level of quit start. 0 is noisy, 1=somewhat quiet,
2=more quiet. See "QUIET START" below <br>
[Default: <b>0</b>]. </dd>

<dt><b>massname=<i>name</i></b> </dt>
<dd>Identification of the mass spectrum. It is normally
only a function of mass, so <b>n(m)</b> will suffice. If nothing specified, all
stars will have the same mass (total mass M=1). <br>
[Default: not used]. </dd>

<dt><b>massexpr=<i>expr</i></b> </dt>
<dd>Expression for the mass-spectrum. In addition
to the mass <i>m</i> from the <b>massname</b> it may contain any variables contained
in the  <b>masspars</b> to be specified next. <br>
[Default: <b>pow(m,p)</b>]. </dd>

<dt><b>masspars=<i>pars</i></b> </dt>
<dd>List of parameters and their values. They
can be used by name in the <b>massexpr</b> specified before. <br>
[Default: <b>p,0.0</b>]. </dd>

<dt><b>massrange=<i>mlow,mhigh</i></b> </dt>
<dd>Valid massrange. A lower and higher
cutoff must be supplied. The massrange has arbitrary units, since all masses
will be rescaled to set the total mass M=1. <br>
[Default: <b>1,1</b>]. </dd>

<dt><b>headline=</b><i>string</i> </dt>
<dd>Optional headline, which is written as the
first item in the snapshot file, the next item being the snapshot itself.
<br>
[Default: not used]. </dd>

<dt><b>nmodel=</b><i>integer</i> </dt>
<dd>Number of models to generate. All models
will be different here. Although mostly meant for benchmarks, generating
more then 1 model can be useful to process very large snapshots (that normally
won&rsquo;t fit in memory) in a serialized fashion. See also <i>snapsplit</i>. Most NEMO
programs will only read the first snapshot. See also <b>mkgrid nmodel=</b> for
a faster way to benchmark. <br>
[Default: <b>1</b>] </dd>

<dt><b>mode=0|1|2</b> </dt>
<dd>The processing mode, purely for debugging benchmarks.
0=no data written. 1=data written, but no extra analysis. 2=data written,
and extra analysis done. <br>
[Default: 1] 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Units</a></h2>
The scale length of a Plummer sphere in virial units
is <b>3.pi/16</b> ~ 0.589.  As an example the following two commands should plot
the same "rotation" curve:  
<p>  mkplummer - 10000 | radprof - tab=t | tabplot
- 1 3 0 2 0 1 yapp=1/xs<br>
  rotcurves plummer &rsquo;0,1,3*pi/16&rsquo; xrange=0,2 yrange=0,1       yapp=2/xs <br>
 
<p>  
<p> 
<h2><a name='sect5' href='#toc5'>Quiet Start</a></h2>
For small N-body systems it can easily happen that small
random fluctuations cause a unacceptabel large deviation from an ideal
Plummer sphere. One way to achieve more "quiet" initial conditions is by
positioning the particles more "uniformly" in their 1/N mass shells, instead
of uniformly filling the space between 0 and 1. This is controlled by the
<b>quiet=1</b> setting.   An even more quiet start can be achieved by placing the
particles on exactly the radius compatible with its mass fraction, this
is achieved with the the <b>quiet=2</b> setting. <p>
In this example you can clearly
see the difference between the radii selected:  
<p>  mkplummer - 10 quiet=0
zerocm=f | snapsort - - r | snapprint - r | tabplot - 0 1 line=1,1 point=2,0.1<br>
  mkplummer - 10 quiet=1 zerocm=f | snapsort - - r | snapprint - r | tabplot -
0 1 line=1,1 point=2,0.1<br>
  mkplummer - 10 quiet=2 zerocm=f | snapsort - - r | snapprint - r | tabplot -
0 1 line=1,1 point=2,0.1<br>
 
<p>  Important to note that with <b>zerocm=f</b> the center of mass will drift,
while the "mathematical center" was placed at the origin. This will counter
the quietness, if you will. 
<p> 
<h2><a name='sect6' href='#toc6'>Caveats</a></h2>
A non-delta function mass-spectrum will
not create a properly virialized system yet. See <a href='snapvirial.1.html'><i>snapvirial(1NEMO)</i></a>
 <p>
For very
large (&gt;1000) ratio in the mass ranges the spline interpolation, used in
<a href='frandom.3.html'><i>frandom(3NEMO)</i></a>
, can fail using a valid [0,1] range. 
<p> 
<h2><a name='sect7' href='#toc7'>Examples</a></h2>
mkplummer can
also be used to create a plummer sphere with a mass spectrum, e.g. a Salpeter
mass spectrum with  
<p>  mkplummer salpeter.dat 10000 massname=&rsquo;n(m)&rsquo; massexpr=&rsquo;pow(m,p)&rsquo;
masspars=p,-2.35 massrange=0.1,10<br>
 
<p>  Another method to create a Plummer sphere is by using the Osipkov-Merritt
tables in NEMO, e.g.  
<p>  plummer plum.dat ntab=1024<br>
  mkommod plum.dat plum.snap nbody=10000<br>
 
<p>  or in ZENO their new General Spherical Profile:  
<p>  plumsnap plum1.snap<br>
 
<p>  plumgsp plum.gsp<br>
  gsprealize plum.gsp plum.snap zerocm=true<br>
  snapcopy plum.snap plum2.snap<br>
 
<p>  with a note that ZENO files may need an extra <a href='snapcopy.1.html'><i>snapcopy(1NEMO)</i></a>
 to be
compatible with NEMO <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
 files. 
<p> 
<h2><a name='sect8' href='#toc8'>Benchmarks</a></h2>
The default benchmark
(see Benchfile) creates a 10,000,000 snapshot in double precision, with
and without writing to a local file:  
<p>  cd $NEMO/nemo/src/nbody/init/<br>
  make -f Benchfile bench0 bench1<br>
 
<p>     or<br>
     <br>
  /usr/bin/time mkplummer . 10000000<br>
  /usr/bin/time mkplummer bench1.snap 10000000<br>
 
<p>  with some sample CPU for bench0:     xps13       3.1s  or 171 MB/s<br>
    t480        4.9s  or  72 MB/s<br>
  the time difference betweeen bench0 and bench1 can be interpreted as
the time needed to write 535MB (for 10M particles) 
<p> 
<p> 
<h2><a name='sect9' href='#toc9'>Files</a></h2>
NEMO/src/nbody/init/mkplummer.c

<p> 
<h2><a name='sect10' href='#toc10'>See Also</a></h2>
<a href='mkpolytrope.1.html'>mkpolytrope(1NEMO)</a>
, <a href='snapvirial.1.html'>snapvirial(1NEMO)</a>
, <a href='mkplummer.3.html'>mkplummer(3NEMO)</a>
, <a href='snapmass.1.html'>snapmass(1NEMO)</a>
,
<a href='snapsplit.1NEM0.html'>snapsplit(1NEM0)</a>
, <a href='mkgrid.1.html'>mkgrid(1NEMO)</a>
, <a href='mkplum.1.html'>mkplum(1NEMO)</a>
, <a href='mcluster.1.html'>mcluster(1NEMO)</a>
, <a href='xrandom.3.html'>xrandom(3NEMO)</a>

<p>
H.C.Plummer (1911), <i>MNRAS</i>, <b>71</b>, 460. <p>
S.J. Aarseth, M. Henon and R.  Wielen (1974),
 <i>Astron. and Astrophys.<b> 37</b></i>, p. 183. <p>
A.H.W. Kuepper, Th. Maschberger, P. Kroupa and
H. Baumgardt, 2011, MNRAS, 417, 2300 (McLuster) <p>
Arnold et al. (2022) - <a href='https://arxiv.org/abs/2207.10681'>https://arxiv.org/abs/2207.10681</a>

-  <a href='https://github.com/r-j-arnold/gen_fractal_star_clusters'>https://github.com/r-j-arnold/gen_fractal_star_clusters</a>
 
<p> 
<h2><a name='sect11' href='#toc11'>Ads</a></h2>
@ads <A HREF=https://ui.adsabs.harvard.edu/abs/1974A&amp;A....37..183A> 1974A&amp;A....37..183A </A>

<p> 
<h2><a name='sect12' href='#toc12'>Author</a></h2>
Piet Hut (Peter Teuben) 
<p> 
<h2><a name='sect13' href='#toc13'>Files</a></h2>
<br>
<pre>~/src/nbody/init<tt> </tt>&nbsp;<tt> </tt>&nbsp;mkplummer.c
</pre>
<p> 
<h2><a name='sect14' href='#toc14'>History</a></h2>
<br>
<pre>23-Apr-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;Version 1.0: created         <tt> </tt>&nbsp;<tt> </tt>&nbsp;PIET
10-Jun-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;Version 1.1: created         <tt> </tt>&nbsp;<tt> </tt>&nbsp;PIET
xx-xxx-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2: zerocm keyword added<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
xx-Mar-89<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0: full new snapshot version+doc<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-nov-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.3: mass-spectrum and cleanup for NEMO 2.x<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-jun-96<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.5d: report total mass before scaling<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
21-mar-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.7: added mlow=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT+NCM
11-apr-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.8: added nmodel=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-sep-10<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.9: clarified rfrac and allow rfrac&lt;0<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
2-dec-2017<tt> </tt>&nbsp;<tt> </tt>&nbsp;documented mcluster<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
29-mar-2021<tt> </tt>&nbsp;<tt> </tt>&nbsp;benchmark<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
25-sep-2023<tt> </tt>&nbsp;<tt> </tt>&nbsp;describe quiet starts<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
1-apr-2024<tt> </tt>&nbsp;<tt> </tt>&nbsp;experimenting with how to place defaults<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Units</a></li>
<li><a name='toc5' href='#sect5'>Quiet Start</a></li>
<li><a name='toc6' href='#sect6'>Caveats</a></li>
<li><a name='toc7' href='#sect7'>Examples</a></li>
<li><a name='toc8' href='#sect8'>Benchmarks</a></li>
<li><a name='toc9' href='#sect9'>Files</a></li>
<li><a name='toc10' href='#sect10'>See Also</a></li>
<li><a name='toc11' href='#sect11'>Ads</a></li>
<li><a name='toc12' href='#sect12'>Author</a></li>
<li><a name='toc13' href='#sect13'>Files</a></li>
<li><a name='toc14' href='#sect14'>History</a></li>
</ul>
</body>
</html>
