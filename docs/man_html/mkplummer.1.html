<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>MKPLUMMER(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
mkplummer - generates a snapshot according to a truncated Plummer model

<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>mkplummer</b> [parameters=values...] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>mkplummer</i> constructs a
Plummer model, with a spatial or mass cut-off, after which it performs a
coordinate transformation to the center-of-mass coordinate system. The data
are then written into a file <i>snap-file</i>, in a standard N-body snapshot format.
  The model is constructed in VIRIAL units (M=G=-4E=1, with E the total
energy), and finite spatial extent which can be regulated by specifying
<i>mfrac</i> or <i>rfrac</i> or using their default values.  The distribution function
of a Plummer model is spherically symmetric and isotropic, and is a polytrope
of index n = 5.  See also Aarseth et al. (1974) and Plummer (1911) <p>
There
is also an implementation in Dehnen&rsquo;s falcON suite: <a href='mkplum.1.html'><i>mkplum(1NEMO)</i></a>
 <p>
For more
advanced Plummer models, see <a href='mcluster.1.html'><i>mcluster(1NEMO)</i></a>
. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
 The following
parameters are recognized in order; they may be given in any order if the
keyword is also given. Use --help to confirm this man page is up to date. 

<dl>

<dt><b>out=</b><i>snapfile</i> </dt>
<dd>Output data is written into <i>snapfile</i>, in standard snapshot
format. </dd>

<dt><b>nbody=</b><i>integer</i> </dt>
<dd>Number of particles <i>nobj</i> in Nbody snapshot realization
of the Plummer model. </dd>

<dt><b>mlow=</b><i>real</i> </dt>
<dd>inner core mass fraction within which no
stars will be populated. (Default: 0) </dd>

<dt><b>mfrac=</b><i>real</i> </dt>
<dd>mass fraction of the (infinitely
extended) Plummer model; see  rfrac immediately below (Default: <i>rfrac</i>=22.8042468).
</dd>

<dt><b>rfrac=</b><i>real</i> </dt>
<dd>radius fraction of the (infinitely extended) Plummer model. If
<i>mfrac = 1.0</i> then particles will be sprinkled in all over space. If <i>mfrac</i>
&lt; 1.0 or <i>rfrac</i> &gt; 0.0 then each particle is constrained to lie within both the
radial and (cumulative) mass bound. For example, if <i>rfrac</i>( <i>mfrac</i> ) &gt; <i>rfrac</i>
then <i>rfrac</i> is the limiting factor, but if <i>rfrac</i>( <i>mfrac</i> ) &lt; <i>rfrac</i> then <i>mfrac</i>
limits the extent of the Plummer realization.  Note: specifying either value
may have no effect if the default value of the other parameter is still
the limiting factor; Beware! (Default: <i>mfrac</i>=0.999; <i>rfrac</i>=22.8042468 , chosen
so that the cumulative mass at <i>rfrac</i> is <i>mfrac</i>). </dd>

<dt><b>seed=</b><i>integer</i> </dt>
<dd>seed for the
random number generator (default: a value 0, which will be converted into
a unique new value using UNIX&rsquo;s clock time, in seconds since once-upon-a-time-in-the-seventies).
See also <a href='xrandom.1.html'><i>xrandom(1NEMO)</i></a>
. </dd>

<dt><b>time=</b><i>time</i> </dt>
<dd>Time at which the snapshot applies (default:
<i>time</i>=0.0). </dd>

<dt><b>zerocm=t|f</b> </dt>
<dd>Reset center of mass to zero? [default: <b>t</b>]. </dd>

<dt><b>scale=</b><i>scale_factor</i>
</dt>
<dd>A scale factor or scale to virial units (M=G=-4E=1). Use -1 for virial units,
and 1 to get a model in structural (natural) units. Note: large scale factors
means small systems with large velocity disperson. [Default: <b>-1</b>]. </dd>

<dt><b>quiet=<i>level</i></b>
</dt>
<dd>Level of quit start. 0 is noisy, 1=somewhat quiet, 2=more quiet [default:
<b>0</b>]. </dd>

<dt><b>massname=<i>name</i></b> </dt>
<dd>Identification of the mass spectrum. It is normally only
a function of mass, so <b>n(m)</b> will suffice. If nothing specified, all stars
will have the same mass (total mass M=1). [default: not used]. </dd>

<dt><b>massexpr=<i>expr</i></b>
</dt>
<dd>Expression for the mass-spectrum. In addition to the mass <i>m</i> from the <b>massname</b>
it may contain any variables contained in the  <b>masspars</b> to be specified
next. [default: <b>pow(m,p)</b>]. </dd>

<dt><b>masspars=<i>pars</i></b> </dt>
<dd>List of parameters and their values.
They can be used by name in the <b>massexpr</b> specified before. [default: <b>p,0.0</b>].
</dd>

<dt><b>massrange=<i>mlow,mhigh</i></b> </dt>
<dd>Valid massrange. A lower and higher cutoff must be
supplied. The massrange has arbitrary units, since all masses will be rescaled
to set the total mass M=1. [default: <b>1,1</b>]. </dd>

<dt><b>headline=</b><i>string</i> </dt>
<dd>Optional headline,
which is written as the first item in the snapshot file, the next item
being the snapshot itself. [default: not used]. </dd>

<dt><b>nmodel=</b><i>integer</i> </dt>
<dd>Number of
models to generate. Although mostly meant for benchmarks, generating more
then 1 model can be useful to process very large snapshots (which won&rsquo;t
fit in memory) in a serialized fashion. See also <i>snapsplit</i>.  Default: <b>1</b>. </dd>

<dt><b>mode=0|1|2</b>
</dt>
<dd>The processing mode, purely for debugging. 0=no data written. 1=data written,
but no extra analysis. 2=data written, and extra analysis done. [Default:
1]. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Bugs</a></h2>
A non-delta function mass-spectrum will not create a properly virialized
system yet. See <a href='snapvirial.1.html'><i>snapvirial(1NEMO)</i></a>
 <p>
For very large (&gt;1000) ratio in the mass
ranges the spline interpolation, used in <a href='frandom.3.html'><i>frandom(3NEMO)</i></a>
, can fail using
a valid [0,1] range. 
<p> 
<h2><a name='sect5' href='#toc5'>Examples</a></h2>
mkplummer can also be used to create a plummer
sphere with a mass spectrum, e.g. a Salpeter mass spectrum with <br>
<pre>  % mkplummer salpeter.dat 10000 massname=&rsquo;n(m)&rsquo; massexpr=&rsquo;pow(m,p)&rsquo; masspars=p,-2.35
massrange=0.1,10
</pre>
<p> 
<h2><a name='sect6' href='#toc6'>Benchmarks</a></h2>
The default benchmark (see Benchfile) creates a 10,000,000 snapshot
in double precision, with and without writing to a local file: <br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;make -f Benchfile bench0 bench1
   or
<tt> </tt>&nbsp;<tt> </tt>&nbsp;/usr/bin/time mkplummer . 10000000
<tt> </tt>&nbsp;<tt> </tt>&nbsp;/usr/bin/time mkplummer bench1.snap 10000000
</pre>with some sample CPU for bench0: <br>
<pre>   xps13       3.1s  or 171 MB/s
   t480        4.9s  or  72 MB/s
</pre>the time difference betweeen bench0 and bench1 can be interpreted as the
time needed to write 535MB (for 10M particles) 
<p> 
<p> 
<h2><a name='sect7' href='#toc7'>Files</a></h2>
NEMO/src/nbody/init/mkplummer.c

<p> 
<h2><a name='sect8' href='#toc8'>See Also</a></h2>
<a href='snapvirial.1.html'>snapvirial(1NEMO)</a>
, <a href='mkplummer.3.html'>mkplummer(3NEMO)</a>
, <a href='snapmass.1.html'>snapmass(1NEMO)</a>
, <a href='snapsplit.1NEM0.html'>snapsplit(1NEM0)</a>
,
<a href='mkplum.1.html'>mkplum(1NEMO)</a>
, <a href='mcluster.1.html'>mcluster(1NEMO)</a>
, <a href='xrandom.3.html'>xrandom(3NEMO)</a>
 <p>
H.C.Plummer (1911), <i>MNRAS</i>,
<b>71</b>, 460. <p>
S.J. Aarseth, M. Henon and R.  Wielen (1974),  <i>Astron. and Astrophys.<b>
37</b></i>, p. 183. <p>
A.H.W. Kuepper, Th. Maschberger, P. Kroupa and H. Baumgardt, 2011,
MNRAS, 417, 2300 (McLuster) 
<p> 
<h2><a name='sect9' href='#toc9'>Ads</a></h2>
@ads <A HREF=https://ui.adsabs.harvard.edu/abs/1974A&amp;A....37..183A> 1974A&amp;A....37..183A </A>
<p> 
<h2><a name='sect10' href='#toc10'>Author</a></h2>
Piet Hut (Peter
Teuben) 
<p> 
<h2><a name='sect11' href='#toc11'>Files</a></h2>
<br>
<pre>~/src/nbody/init<tt> </tt>&nbsp;<tt> </tt>&nbsp;mkplummer.c
</pre>
<p> 
<h2><a name='sect12' href='#toc12'>Update History</a></h2>
<br>
<pre>23-Apr-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;Version 1.0: created         <tt> </tt>&nbsp;<tt> </tt>&nbsp;PIET
10-Jun-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;Version 1.1: created         <tt> </tt>&nbsp;<tt> </tt>&nbsp;PIET
xx-xxx-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2: zerocm keyword added<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
xx-Mar-89<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0: full new snapshot version<tt> </tt>&nbsp;<tt> </tt>&nbsp;+ doc PJT
15-nov-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.3: mass-spectrum and cleanup<tt> </tt>&nbsp;<tt> </tt>&nbsp;for NEMO 2.x<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-jun-96<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.5d: report total mass before scaling  <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
21-mar-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.7: added mlow=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT+NCM
11-apr-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.8: added nmodel=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-sep-10<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.9: clarified rfrac and allow rfrac&lt;0<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
2-dec-2017<tt> </tt>&nbsp;<tt> </tt>&nbsp;documented mcluster<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
29-mar-2021<tt> </tt>&nbsp;<tt> </tt>&nbsp;benchmark<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
