<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>TABBLEND(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
tabblend - create (blended) gaussian profiles and bin them 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>tabblend</b>
[parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>tabblend</b> creates a blended line spectrum of
gaussians,  bins them, optionally with hanning smoothing and outputs a
table that can be compared with observations, or be fitted with <a href='tabnllsqfit.1.html'><i>tabnllsqfit(1NEMO)</i></a>
.
<p>
After a raw spectrum is computed on the grid specified by <b>s=</b>, it can be
optionally smoothed using <b>fwhm=</b>, after which it is binned on the grid specified
by <b>g=</b>.  This binning can be done in a number of ways (e.g. see <b>bin=</b> below).
Note that both grids need to be regular (use the notation <i>min:max:step</i>)
and <i>min&lt;max</i>. An optional simple (0.5,1,0.5) hanning smoothing can be applied.
As last step before output noise can be added. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters
are recognized in any order if the keyword is also given: 
<dl>

<dt><b>x=</b><i>x1,x2,...</i> </dt>
<dd>X coordinates
of the centroid(s) line(s). Multiple coordinates can be given here. There
is no default, at least one value needs to be specified here. </dd>

<dt><b>a=</b><i>a1,a2,...</i> </dt>
<dd>Amplitudes
for each line.  If not enough values are given, the last value repeats. 
The number of values should be the same as those in <b>x=</b>. [1] </dd>

<dt><b>d=</b><i>d1,d2,...</i> </dt>
<dd>FWHM
of the lines (FWHM=2.355*sigma). If not enough values are given, the last
value repeats.  The number of values should be the same as those in <b>x=</b>. [1]
  </dd>

<dt><b>s=</b><i>min:max:step</i> </dt>
<dd>Points where to sample the lines.  The values need to be
regular and increasing. Use Bmode=0 with specified <b>x,a,d,s</b> to look at the
raw spectrum. [Default: -16:16:0.01]     </dd>

<dt><b>g=</b><i>min:max:step</i> </dt>
<dd>Points where to lay
the grid for binning. The values need to be regular and increasing, these
values are the midpoint of their cells, not the edges. (see <b>bin=</b>). [Default:
-16:16:1]     </dd>

<dt><b>fwhm=</b> </dt>
<dd>If non-zero, smooth the raw points with a gaussian beam
with given FWHM. [0] </dd>

<dt><b>bin=t|f</b> </dt>
<dd>Use the simple way of binning by using a fine
sample grid and sprinkling  them into the bins? Or properly integrate the
sample grid onto the bins? The latter prevents edge effect if Sample and
Grid are commensurate. Default: t </dd>

<dt><b>hanning=t|f</b> </dt>
<dd>Optional hanning applied to
the gridded data. [Default: f] </dd>

<dt><b>fft=t|f</b> </dt>
<dd>Use FFT to compute observed spectrum?
(not implemented yet). </dd>

<dt><b>rms=</b> </dt>
<dd>RMS value for the noise added to the spectrum
before output. This can be done to either raw (mode=0) or binned (mode=1)
spectrum. [Default: 0] </dd>

<dt><b>seed=</b> </dt>
<dd>The usual random seed (see also <a href='xrandom.1.html'><i>xrandom(1NEMO)</i></a>
).
 [Default: 0] </dd>

<dt><b>mode=</b> </dt>
<dd>Output mode. 0 will output the raw spectrum before smoothing
 and binning etc.   1=will output the final spectrum, after  all binning
and noise addition.  [Default: 1] </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>
plotting triplet of gaussians,
moderately blended and binned : <br>
<pre>  tabblend x=-4,0,2 a=0.5,1,0.5 | tabplot - line=1,1 point=2,0.1
</pre>and fitting a single gaussian <br>
<pre>  tabblend x=0 d=2.355 | tabnllsqfit - fit=gauss1d
  ### Warning [tabnllsqfit]: No initial estimates for gauss1d, attempting
to get some
  Fitting a+b*exp(-(x-c)^2/(2*d^2)):  
  a= -2.28081e-05 1.99529e-05 
  b= 0.960098 9.51577e-05 
  c= 1.11565e-20 0.000118163
  d= 1.04196 0.000121485
  rms2/chi2= 3.1717e-07
</pre>Note the width d=1.04 is about 4% higher than expected due to some moderate
binning. <p>
To view a the line and the residuals from the fit: <br>
<pre>  tabblend x=0 d=2.355 rms=0.1 | tabnllsqfit - fit=gauss1d out=- | tabplot - 1
2,3 line=1,1 color=2,3
</pre>
<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='tabplot.1.html'>tabplot(1NEMO)</a>
, <a href='tabnllsqfit.1.html'>tabnllsqfit(1NEMO)</a>
, <a href='tabmath.1.html'>tabmath(1NEMO)</a>
 
<h2><a name='sect6' href='#toc6'>Files</a></h2>
NEMO/src/kernel/tab
: tabblend.c 
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Peter Teuben 
<h2><a name='sect8' href='#toc8'>Update History</a></h2>
<br>
<pre>21-dec-2011<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.1 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
30-dec-2011<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.5 added rms to both mode=0 and mode=1<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
1-jan-2012<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.8 added bin= <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Files</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Update History</a></li>
</ul>
</body>
</html>
