<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>CCDSTAT(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
ccdstat - statistics (1st through 4th moment) and chi2 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<p>
<b>ccdstat
in=</b>image [parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>ccdstat</b> calculates all moments (up
to fourth order) of the values in an image/cube,  and calculate some human
understandable numbers (mean, dispersion, skewness, curtosis) from them.
It can optionally use a weighting map, in case the  map needs to be weighted
per pixel. <p>
Optionally, if the map contains an error normalized difference
between an observation and model, it can also compute a chi2 goodness of
fit if the number of  of fitting parameters is given (<b>npar</b>, must be &gt; 0
to trigger this option), as well as the number of independant points per
beam (<b>nppb</b>): <br>
<pre>    chi2 = sum_{i,j}(map(i,j)^2)/nppb/(N/nppb-npar)
</pre>where N is the number of non-bad values in the map. The input  map is now
assumed to contain a dimensionless <i>(obs-mod)/sigma</i> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following
parameters are recognized in any order if the keyword is also given: 
<dl>

<dt><b>in=<i>in-file</i></b>
</dt>
<dd>input file, in <a href='Image.5.html'><i>Image(5)</i></a>
 format [no default] </dd>

<dt><b>min=<i>min_value</i></b> </dt>
<dd>If given, all
values below this value are ignored in the statistics.  By default no lower
limit is used. </dd>

<dt>max=<i>max_value</i> </dt>
<dd>If given, all values above this value are ignored
in the statistics. By default no upper limit is used. </dd>

<dt><b>bad=<i>bad_value</i></b> </dt>
<dd>If given,
all values identical to this value are ignored in the statistics. Note that,
apart for bad=0, it is dangerous to use equating to a real value as a masking
operating. </dd>

<dt><b>win=<i>weight-file</i></b> </dt>
<dd>optional input file, in <a href='Image.5.html'><i>Image(5)</i></a>
 format, of which
the mapvalues are used as a relative weight factor. Should be all positive,
with 0 meaning no weight. [no default] </dd>

<dt><b>npar=</b> </dt>
<dd>Number of fitting parameters.
If given &gt; 0, this will trigger the computation of chi2 goodness of fit,
instead of the normal statistics. </dd>

<dt><b>nppb=</b> </dt>
<dd>Number of (independant) points per
beam. Only used in the computation for chi2, and  </dd>

<dt><b>median=t|f</b> </dt>
<dd>Optional display
of the median value </dd>

<dt><b>robust=t|f</b> </dt>
<dd>Conmpute robust mean, median and dispersion.
Default: f </dd>

<dt><b>mmcount=t|f</b> </dt>
<dd>Count occurances of min and max  </dd>

<dt><b>half=f|t</b> </dt>
<dd>Only use
half (negative) values and symmetrize them  </dd>

<dt><b>maxmom=</b> </dt>
<dd>Maximum moments it
should compute. The current maximum is 4, moments up through the kurtosis
are computed. For maxmom&lt;0 no work is done, except for reading the file,
which can be used to benchmark your disk I/O for large NEMO images.  [Default:
4]. </dd>

<dt><b>ignore=t|f</b> </dt>
<dd>This will ignore the cell width when summing emission for
any axis that has only one cell (assumed infinity, or a result of <a href='ccdmom.1NEMO.html'><i>ccdmom(1NEMO)</i></a>
).
Setting this to false, will not ignore that cell width. [Default : t] </dd>

<dt><b>sort=t|f</b>
</dt>
<dd>Sorting routine (not activated yet)  </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Example</a></h2>
<br>
<pre>  % ccdstat image.ccd min=-2
Min=-1.879409  Max=2.265516
Number of points     : 95
Mean and dispersion  : 0.097891 0.956030
Skewness and kurtosis: -0.059936 -0.654776
5/100 out-of-range points discarded
</pre>Here is an example how to created a weight file which is a circular annulus:
<br>
<pre>  % ccdmath out=map1 "fie=iflt(%r,50,1,0)" size=200,200 crpix=100,100
  % ccdmath out=map2 "fie=iflt(%r,20,1,0)" size=200,200 crpix=100,100
  % ccdmath map1,map2 map3 %1-%2
</pre>Here is an two masking example: firstignoring the exact value of 0,  followed
by an example of a small range around 0: <br>
<pre>  % ccdstat map1 bad=0
  % ccdmath map1 - &rsquo;iflt(abs(%1),0.001,0,%1)&rsquo; | ccdstat - bad=0
</pre>Here is an example of calculating the chi2 goodness of fit for a gaussian
distribution: <br>
<pre>  % ccdmath "" - "rang(0,1)" | ccdstat - npar=1<tt> </tt>&nbsp;<tt> </tt>&nbsp;
Generating a map from scratch
chi2= 1.03431
df= 98
</pre>
<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='snapccd.1NEMO.html'>snapccd(1NEMO)</a>
, <a href='image.5NEMO.html'>image(5NEMO)</a>
 
<h2><a name='sect6' href='#toc6'>Author</a></h2>
Peter Teuben 
<h2><a name='sect7' href='#toc7'>Files</a></h2>
<br>
<pre>src/image/misc<tt> </tt>&nbsp;<tt> </tt>&nbsp;ccdstat.c
</pre>
<h2><a name='sect8' href='#toc8'>Update History</a></h2>
<br>
<pre> 4-Oct-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0: Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
9-may-03<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.3: added bad=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
5-jun-03<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.4: added win=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
14-nov-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.5: added the chi2 trigger with npar= and nppb=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
24-may-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.8: added mmcount<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-oct-11<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.10: added maxmom= and bench options<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
14-feb-13<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0:  ignore=t to properly handle units<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Example</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Author</a></li>
<li><a name='toc7' href='#sect7'>Files</a></li>
<li><a name='toc8' href='#sect8'>Update History</a></li>
</ul>
</body>
</html>
