<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>CCDCROSS(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
This HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A> for <A HREF=https://astronemo.readthedocs.io>NEMO</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
ccdcross - cross correlate images with a reference image 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>ccdcross</b>
[parameter=value] 
<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>ccdcross</b> finds the offset between a reference
image and one (or more) images based on the cross-correlation between two
images.  By selecting a specific <b>center=</b> and a <b>box=</b> size, one can save compute
time and focus on a specific area. All assuming the offset is less than
the box-size. <p>
The centroid is determined using an intensity weighted mean
in the correllated image. A future version may fit a 2D gaussian or appropriate
function to the correllation image. <p>
Some caution is warrented as the results
can depend on the size of the box (box=) and number of pixels (n=) to look
around the correllation peak. See also <b>clop=</b> below. 
<p> 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
 The following
parameters are recognized in order; they may be given in any order if the
keyword is also given. Use <b>--help</b> to confirm this man page is up to date. 

<dl>

<dt><b>in=</b><i>ref,im1,...</i> </dt>
<dd>Input image files, first image is the reference image. At least
two images need to be given. <br>
No default. </dd>

<dt><b>out=</b><i>im</i> </dt>
<dd>Output cross image. This image will be square and have
a smaller size, <b>2*box+1</b>. <br>
By default no image is written. </dd>

<dt><b>center=</b><i>x0,y0</i> </dt>
<dd>X-Y Reference center around
which a box (see <b>box=</b> below) is taken. These are 0-based integer pixels. 
<br>
Default: center of first input image. </dd>

<dt><b>box=</b><i>b_half</i> </dt>
<dd>(Half) Size of correlation
box. The output image is then forced to have an odd pixel size, 2*box+1.
The shift between the images should not exceed <b>box</b>, or it will not find
the center. <br>
Although <b>box=</b> and <b>center=</b> can be used to subset an image on the fly, another
approach is to use <a href='ccdsub.1.html'><i>ccdsub(1NEMO)</i></a>
 and make new images. This might be needed
for large shifts. <br>
By default half the mapsize is used, which can be computationally expensive.
</dd>

<dt><b>n=</b><i>n_half</i> </dt>
<dd>Half size of box inside correllation box to find the center. See
also <b>clop=</b> to limit the clip level in this correlation image. <br>
By default half the box is used. </dd>

<dt><b>clip=</b><i>clip_value</i> </dt>
<dd>Only use values above this
clip level in the input images will be used for the correlation. <br>
By default values are not clipped. </dd>

<dt><b>clop=</b><i>clip_value</i> </dt>
<dd>Only use values above
this clip level in the final correlation image. Units are loosely related
to those of the input image times the number of pixels squared in the comparison
area. <br>
By default values are not clipped. </dd>

<dt><b>bad=</b><i>bad_value</i> </dt>
<dd>bad value to ignore. <br>
By default there is no bad value recognized. 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Caveat</a></h2>
Only 2D images are handled.
<p>
The WCS of the output image is not meaningfull, and remains in pixel space.
Since the number of pixels is odd, the reported shift between the images
is the shift from the central pixel, which is made the reference pixel.
<p>
Images should ideally be the same size, but nothing will stop the program
from running off without that. The user is then responsible for computing
the true offsets as all bets are off. <p>
A wrong choice of box= and n= can
cause a bias in the center. Using clop= can help making it more robust. <p>
Only
one <b>clip=</b> value can be given, ideally each input image should have it&rsquo;s

<p>own clip 
<p> 
<h2><a name='sect5' href='#toc5'>Examples</a></h2>

<p> Here two gaussian shaped sources with noise are created
with a small 1 pixel offset from each other. 
<p>  
<p>     ccdgen - gauss 1,2 size=128,128
center=64,64 | ccdgen g64 noise spar=0,0.05 seed=64 in=-<br>
     ccdgen - gauss 1,2 size=128,128 center=65,65 | ccdgen g65 noise spar=0,0.05
seed=65 in=-<br>
     ccdcross g64,g65 shift.ccd box=16<br>
     ...<br>
     ### nemo Debug[0]: Using 2 images<br>
     ### nemo Debug[0]: Image 0: pixel size 1 1   minmax -0.22856 0.971157
[g64]<br>
     ### nemo Debug[0]: center=64,64<br>
     ### nemo Debug[0]: Full box size 33<br>
     ### nemo Debug[0]: Image 1: pixel size 1 1   minmax -0.20781 0.927271
[g65]<br>
     ### nemo Debug[0]: 128 128  16  0 1<br>
     ### nemo Debug[0]: New min and max in correlation image are: -0.597157
11.907974<br>
     ### nemo Debug[0]: Max cross 11.908 @ 17 17<br>
     ### nemo Debug[0]: MinMax in 49 pts: 3.40988 11.908, use clop= to clip
the corr out image<br>
     ### nemo Debug[0]: X,Y mean: -0.0561799 -0.0237276<br>
     ### nemo Debug[0]: X,Y sig:  1.81226 1.81864<br>
     ### nemo Debug[0]: Center at: 0.94382 0.976272<br>
 
<p>  
<p> 
<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='ccdblob.1.html'>ccdblob(1NEMO)</a>
, <a href='ccdsub.1.html'>ccdsub(1NEMO)</a>
, <a href='image.5.html'>image(5NEMO)</a>
 
<p> 
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Peter Teuben

<p> 
<h2><a name='sect8' href='#toc8'>Update History</a></h2>
<br>
<pre>11-Apr-2022<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.1 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
3-aug-2023<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.2 fix absolute coordinate<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
18-apr-2024<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.3 add peak flux in correlation map<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Caveat</a></li>
<li><a name='toc5' href='#sect5'>Examples</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Update History</a></li>
</ul>
</body>
</html>
