<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>bodyfunc(5falcON) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
bodiesfunc expression - used in generating <a href='bodiesfunc.1falcON.html'><i>bodiesfunc(1falcON)</i></a>
 functions:
functions taking a set of bodies, time and a set of parameters and returning
bool, int, real, or vector. 
<p> 
<h2><a name='sect1' href='#toc1'>Description</a></h2>
<i>bodiesfunc</i> expression are valid
C (in fact C++) expressions that evaluate to either a bool, an integer,
a real, or a vector.  On construction of a <i>bodiesfunc</i>, the C++ compiler
is employed to to generate on the fly (as the user runs the program) the
function together with type information and information on which body data
are required, see <a href='bodiesfunc.1falcON.html'><i>bodiesfunc(1falcON)</i></a>
. 
<p> 
<h2><a name='sect2' href='#toc2'>List of valid subexpressions</a></h2>
The
bodiesfunc expression may contain the following subexpressions <p>
<br>
<pre>Name<tt> </tt>&nbsp;<tt> </tt>&nbsp; Type      Description

 constants and global properties
Pi<tt> </tt>&nbsp;<tt> </tt>&nbsp;r<tt> </tt>&nbsp;<tt> </tt>&nbsp;3.14159265358979323846264338328
N<tt> </tt>&nbsp;<tt> </tt>&nbsp;i<tt> </tt>&nbsp;<tt> </tt>&nbsp;N, the total number of bodies
M<tt> </tt>&nbsp;<tt> </tt>&nbsp;r<tt> </tt>&nbsp;<tt> </tt>&nbsp;M, the total mass
t<tt> </tt>&nbsp;<tt> </tt>&nbsp;r<tt> </tt>&nbsp;<tt> </tt>&nbsp;t, the time of the snapshot
 operators
Sum{expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;i,r,v<tt> </tt>&nbsp;<tt> </tt>&nbsp;sum of expr over bodies satisfying cond
Mean{expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;i,r,v<tt> </tt>&nbsp;<tt> </tt>&nbsp;mean of expr over bodies satisfying cond
Mmean{expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;i,r,v<tt> </tt>&nbsp;<tt> </tt>&nbsp;mass-weighted mean of expr over bodies satisfying cond
Max{expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;i,r,v<tt> </tt>&nbsp;<tt> </tt>&nbsp;max of expr over bodies satisfying cond
Min{expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;i,r,v<tt> </tt>&nbsp;<tt> </tt>&nbsp;min of expr over bodies satisfying cond
And{expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;b<tt> </tt>&nbsp;<tt> </tt>&nbsp;AND of expr over bodies satisfying cond
Or {expr@cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;b<tt> </tt>&nbsp;<tt> </tt>&nbsp;OR  of expr over bodies satisfying cond
Num{cond}<tt> </tt>&nbsp;<tt> </tt>&nbsp;i<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Number of bodies satisfying cond
</pre>
<p> Note that <b>Mean{</b><i>X</i><b>}</b> is equivalent to (but more efficient than) <b>Sum{</b><i>X</i><b>}/N</b>.
Similarly, <b>Mmean{</b><i>X</i><b>}</b> is equivalent to <b>Sum{m*</b><i>X</i><b>}/M</b>. 
<p> 
<h2><a name='sect3' href='#toc3'>Operations and functions</a></h2>
The
subexpression arguments <i>cond</i> and <i>expr</i> to the operators can be bodiesfunc
expressions mixed with <a href='bodyfunc.5falcON.html'><i>bodyfunc(5falcON)</i></a>
 expressions. <i>cond</i> is defined as
the part after the separator &rsquo;<b>@</b>&rsquo; and constitutes a condition for a body to
be considered. If the argument of the operator contains no &rsquo;<b>@</b>&rsquo;, the condition
is omitted (all bodies are considered). The condition is converted to bool:
non boolean conditions are considered true if non-zero. <p>
In addition, the
expression may use any standard mathematical expressions, including math
functions. For vectors, all operations defined for tupel&lt;3,real&gt;, see <a href='tupel.5falcON.html'><i>tupel(5falcON)</i></a>
,
are allowed. The following lists some of these and additional functions
supported. <p>
<br>
<pre>Name<tt> </tt>&nbsp;<tt> </tt>&nbsp;Type<tt> </tt>&nbsp;<tt> </tt>&nbsp;Description
vector*vector<tt> </tt>&nbsp;<tt> </tt>&nbsp;real<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns the scalar product
vector^vector<tt> </tt>&nbsp;<tt> </tt>&nbsp;vector<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns the vector cross product
vector(x)<tt> </tt>&nbsp;<tt> </tt>&nbsp;vector<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;converts scalar to vector
real(x)<tt> </tt>&nbsp;<tt> </tt>&nbsp;real<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;converts integer to real
norm(x)<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns x*x for any type
abs(vector)<tt> </tt>&nbsp;<tt> </tt>&nbsp;real<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns sqrt(norm(vector))
abs(real)<tt> </tt>&nbsp;<tt> </tt>&nbsp;real<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns |real|
max(x,y)<tt> </tt>&nbsp;<tt> </tt>&nbsp;scalar<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns the greater of two scalars
max(vector)<tt> </tt>&nbsp;<tt> </tt>&nbsp;real<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns the greatest vector element<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;
min(x,y)<tt> </tt>&nbsp;<tt> </tt>&nbsp;scalar<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns the smaller of two scalars
min(vector)<tt> </tt>&nbsp;<tt> </tt>&nbsp;real<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;returns the smallest vector element<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;

ExamplesThe following lists some example bodiesfunc expressions: <tt> </tt>&nbsp;<tt> </tt>&nbsp;M and
Sum{m}
 
both evaluate the total mass of all bodies; <tt> </tt>&nbsp;<tt> </tt>&nbsp;Min{eps} and Min{eps@r&gt;#0}
 
evaluate the mininum softening length of, respectively, all bodies and
of all bodies with radius larger than parameter 0; <tt> </tt>&nbsp;<tt> </tt>&nbsp;Sum{m@E&lt;0} and 0.5*Sum{m*norm(vel)@E&lt;0}
 
evaluate, respectively, the mass and the kinetic energy of all bound bodies;
<tt> </tt>&nbsp;<tt> </tt>&nbsp;Num{r&lt;Min{eps}} and Sum{1@r&lt;Min{eps}}
 
both evaluate the number of bodies with radius less than the minimum softening
length (this demonstrates the usage of another bodiesfunc expression inside
a bodiesfunc operator); <tt> </tt>&nbsp;<tt> </tt>&nbsp;Sum{l*m}/M, Mean{l*m}/Mean{m} and Mmean{l}
 
are three ways to evaluate the mass-weighted mean of specific angular momentum.
 See Alsobodiesfunc(1falcON), bodyfunc(1falcON), snapprop(1falcON) AuthorWalter
Dehnen Update History
21-jul-2004 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;WD
20-aug-2004 nested expressions added<tt> </tt>&nbsp;<tt> </tt>&nbsp;WD
07-nov-2004 parameters added, changed cond#expr to expr@cond<tt> </tt>&nbsp;<tt> </tt>&nbsp;WD
12-jul-2006 Updated<tt> </tt>&nbsp;<tt> </tt>&nbsp;WD
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Description</a></li>
<li><a name='toc2' href='#sect2'>List of valid subexpressions</a></li>
<li><a name='toc3' href='#sect3'>Operations and functions</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Author</a></li>
<li><a name='toc7' href='#sect7'>Update History</a></li>
</ul>
</body>
</html>
