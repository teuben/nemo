<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>SMOOTH(2.01) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
<b>smooth</b> - Calculate smoothed quantities over all particles 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>smooth</b>
[-s &lt;nSmooth&gt;[dgs]] [-b &lt;nBucket&gt;] [-g] <br>
 <tt> </tt>&nbsp;<tt> </tt>&nbsp;[-o &lt;Output Name&gt;] [-p &lt;xyzPeriod&gt;] <br>
 <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;[-px &lt;xPeriod&gt;] [-py &lt;yPeriod&gt;] [-pz &lt;zPeriod&gt;]<br>
 <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;[-do &lt;MarkFile&gt;]<br>
 <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;[density] [meanvel] [speed] [veldisp] [phase] [mach]<br>
 <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;[all] [null]<br>
 <br>
<br>
Reads particles from stdin in the TIPSY BINARY format. 
<p> 
<h2><a name='sect2' href='#toc2'>Options</a></h2>
<b>[-s &lt;nSmooth&gt;[dgs]]:</b>
Default nSmooth = 64 (dgs) <br>
Specifies the number of neighbors to smooth over. Directly following the
integer any of the letters dgs may follow. A &rsquo;d&rsquo;  specifies that smooth consider
the dark matter in the input file in its calculations. A &rsquo;g&rsquo; sepecifies that
smooth consider  the gas in the input file and an &rsquo;s&rsquo; specifies that stars
are to be considered. For example -s 64dgs (-s 64) would smooth over 64 particles
considering all the matter in the simulation (the default). Specifying -s
32gs would consider only the gas and the stars and ignore any dark matter
in the input file. 
<p> <b>[-b &lt;nBucket&gt;]:</b> Default nBucket = 16 <br>
Specifies the number of particles in the leaves of the search tree. This
number can be changed to improve performance, but does not influence the
calculation. 
<p> <b>[-g]:</b> specifies that only the &rsquo;gather&rsquo; kernel be used in calculating
mean quantities. The default is to use the full SPH gather-scatter kernel.

<p> <b>[-o &lt;Output Name&gt;]:</b> Default output name is "smooth". <br>
This argument allows the user to specify an alternate output name to be
used for all the smooth outputs. For example -o dark would produce dark.den,
dark.mvl, dark.dsp, etc.  <br>
 <b>[-p &lt;xyzPeriod&gt;]:</b> Default non-periodic in x, y and z dimensions <br>
Specifies that smoothing take into account periodicity in the all three
dimensions given by the same period &lt;xyzPeriod&gt;. This is a shorthand to specifying
all three parameters given below. 
<p> <b>[-px &lt;xPeriod&gt;]:</b> Default non-periodic in
x dimension <br>
Specifies that smoothing take into account periodicity in the x-dimension
given by the period &lt;xPeriod&gt;. 
<p> <b>[-py &lt;yPeriod&gt;] [-pz &lt;zPeriod&gt;]:</b> As above. 
<p> <b>[-do &lt;Markfile&gt;]</b>
<br>
Specifies that smooth should calculate mean field quantities only for those
particles "marked" in the &lt;MarkFile&gt;. The MarkFile is in  TIPSY ARRAY format,
where a 1 signifies a marked particle and a  0 an unmarked particle (unmarked
particles not computed). Whereas the (dgs) specification of -s (see above)
ignores COMPLETELY particle types not selected, this takes into account
the EFFECT of unmarked  particles. The values of quantities for unmarked
particles are  simply zero (or null vector in the case of meanvel). The
kernel used is automatically the GATHER-ONLY kernel (-g)! This option is
useful when, for example, a fast density calculation is required for a
small subset of particles in a large simulation. Such a subset could be
 found with a group finder (see FOF and DENMAX) or from a minimum density
cut. 
<p> <b>[density]:</b> produces a density output file (smooth.den) in tipsy ascii

<p>array format 
<p> <b>[meanvel]:</b> produces a mean velocity output file (smooth.mvl)

<p>in tipsy ascii vector format 
<p> <b>[speed]:</b> produces a mean speed output file
(smooth.spd) in tipsy array format 
<p> <b>[veldisp]:</b> produces a velocity dispersion
output file (smooth.dsp) in tipsy array format 
<p> <b>[mach]:</b> produces a mach
number output file (smooth.mch) in tipsy array format 
<p> <b>[phase]:</b> produces
a phase density output file (smooth.phs) in tipsy array format 
<p> <b>[all]:</b> produces

<p>all of the above output files 
<p> <b>[null]:</b> produces no output files but searches
for nearest neighbors and then gathers the nearest neighbors (Smoothing
and Resmoothing). This is useful for gauging the performance of smooth. 
<p>

<h2><a name='sect3' href='#toc3'>Description</a></h2>
Smooth can calculate several mean quantities for all particles
in an  N-Body simulation output file. The program produces a file for each
type of output specified on the command line. This output file is in ascii
format with one smoothed quantity for each particle. The program uses a
symmetric SPH (Smoothed Particle Hydrodynamics) smoothing kernel to find
the mean quantities. 
<p> <tt> </tt>&nbsp;<tt> </tt>&nbsp;&lt;Ai&gt; = SUMj(Aj*Mj/Dj*W(i,j)) over all j<br>
 
<p> where &lt;Ai&gt; is the smoothed value for particle i of quantity A, Mj is the
Mass of particle j, Dj is the density of particle j and W(i,j) is the symmetric
smoothing kernel defined by, 
<p> <tt> </tt>&nbsp;<tt> </tt>&nbsp;W(i,j) = 1/2(w(Rij,Hi) + w(Rij,Hj)) and,<br>
 
<p> Rij is the distance from particle i to particle j. <br>
Hi is HALF the distance to the k&rsquo;th most distant neighbor of particle i.

<p> <tt> </tt>&nbsp;<tt> </tt>&nbsp;w(R,H) = 1/(PI*H^3)*(1 - 0.75*(2 - R/H)*(R/H)^2<br>
 <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;if (R/H) &lt; 1 and,<br>
 
<p> <tt> </tt>&nbsp;<tt> </tt>&nbsp;w(R,H) = 1/(PI*H^3)*0.25*(2 - R/H)^3<br>
 <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;if (R/H) &gt;= 1.<br>
 
<p> The density for particle i is simply, <br>
<tt> </tt>&nbsp;<tt> </tt>&nbsp;Di = SUMj(Mj*W(i,j))<br>
 <br>

<p> <br>
Quantities which smooth will calculate are density, mean velocity, mean
speed, velocity dispersion, mach number and phase density. For simulations
which have periodic boundary conditions, the periods in x, y, and z must
be specified using the -px, -py and -pz arguments for smooth to produce the
correct results at the boundaries. As a shorthand, if the periods in  the
three dimensions are the same (usual) the -p argument suffices. 
<p> 
<h2><a name='sect4' href='#toc4'>Examples</a></h2>

<p>
&gt; <b>smooth density &lt; tipsy.bin</b> 
<p> This produces a density output file called smooth.den
from the tipsy binary file tipsy.bin. The program has smoothed density over
64 (default) nearest neighbors and over all the particles in the tipsy.bin
file. 
<p> &gt; <b>smooth -s 32g -o tipsy_gas density veldisp mach &lt; tipsy.bin</b> 
<p> This produces
a density output file, tipsy_gas.den, a velocity dispersion output file,
tipsy_gas.dsp and a mach number output file, tipsy_gas.mch. Smoothing has
been done over 32 nearest neighbors and taking into account only the gas
particles. 
<p> &gt; <b>smooth -s 64d -px 256 -py 256 -pz 256 density &lt; <a href='tipsy.bin.or.html'>tipsy.bin</b> (or)</a>
 
<p> &gt;
<b>smooth -s 64d -p 256 density &lt; tipsy.bin</b> 
<p> This produces a density output file,
smooth.den, which has been smoothed over a periodic cube of 256 units to
a side. Only the dark matter has  been considered in calculating the density.

<p> 
<h2><a name='sect5' href='#toc5'>Note About Output</a></h2>

<p> It is important to note that the output arrays always
correspond to the input file. For example if an input file is given with
32000 dark matter, 32000 gas and 1000 star particles the output tipsy array&rsquo;s
will have 65000 entries, even if only the gas particles were smoothed over.
The  particles which were ignored have a value of zero in the array or
vector format. 
<p> 
<h2><a name='sect6' href='#toc6'>Warnings</a></h2>

<p> When using periodic boundary conditions assure
that the periodicity is  identical to that used during the N-Body simulation
which generated the input file being used. 
<p> Smooth output files can be quite
large since they are in ascii format. Make sure that sufficient disk space
is available. When running smooth on several input files make sure to specify
unique output names for the files otherwise these files will simply be
over-written. 
<p> Smoothing time scales slightly worse than linear with number
of particles and linear with nSmooth (number of nearest neighbors). 
<p> 
<h2><a name='sect7' href='#toc7'>Bugs</a></h2>

 <br>
 Bugs? Not! 
<p> 
<h2><a name='sect8' href='#toc8'>See Also</a></h2>
<a href='tipsy.1.html'><b>tipsy(1)</a>
, <a href='denmax.1.html'>denmax(1)</a>
, <a href='fof.1.html'>fof(1)</b></a>
 
<p> 
<p> 
<p> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Options</a></li>
<li><a name='toc3' href='#sect3'>Description</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Note About Output</a></li>
<li><a name='toc6' href='#sect6'>Warnings</a></li>
<li><a name='toc7' href='#sect7'>Bugs</a></li>
<li><a name='toc8' href='#sect8'>See Also</a></li>
</ul>
</body>
</html>
