<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>AMUSE(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
This HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A> for <A HREF=https://astronemo.readthedocs.io>NEMO</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Description</a></h2>
<b>AMUSE</b> is the Astrophysical MUltipurpose Software Environment,
with which you can simulate many types of astrophysical systems. Within
NEMO we focus on Gravitational Dynamics, as this is the prime focus in
NEMO. <p>
The user interacts with AMUSE in python, for example you can set up
an amuse profile in ipython that preloads some common imports  
<p>       
ipython --profile=amuse<br>
 
<p>  Internally many components in AMUSE are legacy codes (C,C++,Fortran)
running at fantastic speeds, but the user will interact via python interfaces.
<p>
An example is shown below, and within NEMO the script <b>amuse_convert.py</b> can
be used to convert between different snapshot formats that AMUSE supports.
See also <a href='unsio.3.html'><i>unsio(3NEMO)</i></a>
 for another approach to such snapshot conversion.

<p> 
<p> 
<h2><a name='sect1' href='#toc1'>Examples</a></h2>

<p> <b>1.</b> Here is an example snippet of AMUSE python code creating a
Plummer sphere (see also <a href='mkplummer.1.html'><i>mkplummer(1NEMO)</i></a>
), in <i>nbody units</i> and writing
the resulting snapshot as an ascii table: 
<p> 
<p>   from amuse.ic.plummer import
new_plummer_model<br>
  from amuse.io import write_set_to_file<br>
 
<p>  stars = new_plummer_model(10)<br>
  write_set_to_file(stars, &rsquo;plummer.txt&rsquo;, format=&rsquo;txt&rsquo;)<br>
 
<p>  
<p> This table has mass, radius, velocity and position, one star per row.
Notice velocity comes before position! Thus the following NEMO command
will convert it to a standard <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
 file: 
<p>  
<p>  nbody=$(tabcols
plummer.txt | wc -l)<br>
  tabcols plummer.txt |\<br>
       tabtos - plummer.snap block1=mass,skip,vx,vy,vz,x,y,z nbody=$nbody<br>
 
<p>  
<p> (the current version of <a href='tabtos.1.html'>tabtos(1NEMO)</a>
 is not smart enough to skip comment
lines. 
<p> <p>
<b>2.</b> Here is a more NEMO like example, running from the commandline.
If AMUSE is properly installed, the first example creates a Plummer model
in memory, the second example creates an output text file, of which the
first particle is displayed as the 3rd line in this table: 
<p>   amuse_convert.py<br>
  amuse_convert.py -o plummer.txt<br>
  head -3 plummer.txt<br>
  <br>
 #mass radius vx vy vz x y z #mass length length * time**-1 length * time**-1
length * time**-1 length length length 0.0078125 0.0 -0.256557735045 0.0863119421344
-0.0484937398944 -0.609540735858 -0.854122523728 0.736476012616  <br>
 
<p>  
<p> 
<p> <b>3.</b> Here is an not-yet-working example of creating initial conditions
in NEMO, using an integration method in AMUSE, and returning the data back
to NEMO for further analysis: 
<p>     mkplummer - 20 | snapprint - m,0.0,vx,vy,vz,x,y,z
format=%16.13f csv=t &gt; p20.csv<br>
    amuse_convert.py -i p20.csv -I csv -o p20.amuse -O amuse<br>
    amuse_integrate.py -i p20.amuse -o p20a.amuse -T 10 -t 1 -c hermite<br>
    amuse_convert.py -i p20a.amuse<br>
  
<p> 
<p> 
<p> 
<h2><a name='sect2' href='#toc2'>Bugs</a></h2>

<p> The follow round trip exercise on the <b>txt</b> format causes an error:
 
<p> fmt=txt amuse_convert.py -o junk1 -O $fmt -n 100 amuse_convert.py -i junk1
-I $fmt -o junk2 -O $fmt amuse.io.base.IoException: IO exception: Number of values
on line   &rsquo;0.01 0.0 -0.319149817818 0.911387278048 0.00131274766207 -1.22528821614
-0.310636170602 0.0257190619401&rsquo; is 8, expected 0<br>
 
<p>  
<p> formats like csv, amuse-txt, tsf, dyn all seem to work. 
<p> 
<h2><a name='sect3' href='#toc3'>Install</a></h2>

<p> Within
NEMO the command  
<p>    mknemo amuse<br>
 
<p>  will get you started on the install.  Note there is a user release that
does not need NEMO, which can be a series of <i>pip install</i>: 
<p>     pip install
amuse-framework<br>
    pip install amuse-bhtree<br>
 
<p>  
<p> A developer release is recommended with NEMO, the start of which will
likely look as follows:  
<p>    cd $NEMO/local/amuse<br>
    ./setup develop amuse-framework<br>
    ./setup develop bhtree<br>
    ./setup test bhtree<br>
     <br>
  The AMUSE <b>bhtree</b> code should be the same as the original program <a href='bhtree.1.html'><i>bhtree(1NEMO)</i></a>

in NEMO, allowing for a closer comparison was it not for some output timing
bug. AMUSE will also install the <b>BHTC</b> program, which should be the same
as our <a href='bhtree.1.html'><i>bhtree(1NEMO)</i></a>
. 
<p> 
<h2><a name='sect4' href='#toc4'>Snapshot</a></h2>
As described in the help (-h) of <b>amuse_convert.py</b>,
the following formats are supported by AMUSE: <br>
<pre>amuse<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;HDF5 file
amuse-txt<tt> </tt>&nbsp;<tt> </tt>&nbsp;text files with AMUSE header format
csv<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;comma separated files
dyn<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Starlab binary structured file
gadget<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Gadget binary data file
hdf5<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;HDF5 file
nemo<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;NEMO structured file, binary version?
starlab<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Starlab binary structured file
tsf<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;NEMO structured file, ascii version 
txt<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;text file containing a table of values separated by a predefined
vts<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;text file containing a table of values separated by a predefined character
vtu<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;text file containing a table of values separated by a predefined character
</pre>
<p> 
<h2><a name='sect5' href='#toc5'>Programs</a></h2>

<p> The following AMUSE scripts are available via NEMO: 
<p> 
<dl>

<dt><b>amuse_convert.py</b>
</dt>
<dd>converts snapshots using AMUSE,  optionally create a Plummer sphere if
only output is requested. 
<p> 
<p> </dd>

<dt><b>amuse_integrate.py</b> </dt>
<dd>integrates a snapshot using
AMUSE. Only a few codes are supported:  bhtree (default),  hermite, smalln
and  brutus. For convenience it will generate a Plummer sphere if no input
file (-i) is provided. 
<p> 
<p> </dd>
</dl>

<h2><a name='sect6' href='#toc6'>Files</a></h2>
<br>
<pre>$NEMO/src/scripts/mknemo.d/amuse - example install script (can be run via
mknemo)
$NEMO/usr/amuse - amuse_convert.py, amuse_integrate.py - also copied to $NEMOBIN
during install
$NEMO/usr/amuse/95-amuse.py - example ipython profile file for ~/.ipython/profile_amuse/startup/
$NEMO/local/amuse - root of AMUSE source code after install via mknemo (a.k.a.
$AMUSE_DIR to some)
95-amuse.py
</pre>
<p> 
<h2><a name='sect7' href='#toc7'>Ads</a></h2>
<br>
<pre>@ads 2013A&amp;A...557A..84P
@ads <A HREF=https://ui.adsabs.harvard.edu/abs/2013CoPhC.184..456P> 2013CoPhC.184..456P </A>
</pre>
<p> 
<h2><a name='sect8' href='#toc8'>See Also</a></h2>
<a href='nemo.1.html'>nemo(1NEMO)</a>
, <a href='zeno.1.html'>zeno(1NEMO)</a>
, <a href='starlab.1.html'>starlab(1NEMO)</a>
, <a href='bhtree.1.html'>bhtree(1NEMO)</a>
, <a href='tabtos.1.html'>tabtos(1NEMO)</a>
,
<a href='unsio.3.html'>unsio(3NEMO)</a>
 <p>
<br>
<pre>https://www.amusecode.org/
</pre>
<p> 
<h2><a name='sect9' href='#toc9'>History</a></h2>

<p> Geneology: arguably AMUSE is derived from <i>starlab</i>, which in itself
was an outcome of <i>NEMO</i>. 
<p> <br>
<pre>25-may-2025<tt> </tt>&nbsp;<tt> </tt>&nbsp;man page and amuse_convert.py written (MODEST25-SPZ)<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
27-mar-2025<tt> </tt>&nbsp;<tt> </tt>&nbsp;overhauled AMUSE installation method<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
14-jun-2025<tt> </tt>&nbsp;<tt> </tt>&nbsp;added scripts to $NEMO/usr/amuse<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Description</a></li>
<li><a name='toc1' href='#sect1'>Examples</a></li>
<li><a name='toc2' href='#sect2'>Bugs</a></li>
<li><a name='toc3' href='#sect3'>Install</a></li>
<li><a name='toc4' href='#sect4'>Snapshot</a></li>
<li><a name='toc5' href='#sect5'>Programs</a></li>
<li><a name='toc6' href='#sect6'>Files</a></li>
<li><a name='toc7' href='#sect7'>Ads</a></li>
<li><a name='toc8' href='#sect8'>See Also</a></li>
<li><a name='toc9' href='#sect9'>History</a></li>
</ul>
</body>
</html>
