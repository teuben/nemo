<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>AMUSE(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
This HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A> for <A HREF=https://astronemo.readthedocs.io>NEMO</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Description</a></h2>
<b>AMUSE</b> is the Astrophysical MUltipurpose Software Environment.
With it, you can simulate many astrophysical systems. <p>
The user interacts
with AMUSE in python, so there is currently no <b>amuse</b> command, though one
could imagine  
<p>        ipython --profile=amuse<br>
 
<p>  instead you will want to import this module (see example below) in your
python code and go from there. Internally many components in AMUSE are legacy
codes (C,C++,Fortran) running at fantastic speeds. <p>
An example is shown below,
and within NEMO there the script <b>amuse_convert.py</b> can be used to convert
between different snapshot formats, as long as the format is supported
by AMUSE.  See also <a href='unsio.3.html'><i>unsio(3NEMO)</i></a>
 for another approach to such snapshot conversion.

<p> 
<p> 
<h2><a name='sect1' href='#toc1'>Examples</a></h2>

<p> Here is an example snippet of AMUSE python code integrating
a Plummer sphere in <i>nbody units</i> and writing the resulting snapshot as a
table: 
<p>  
<p>  NBODY    = 128<br>
  TIME     = 10<br>
  FILENAME = &rsquo;p.txt&rsquo;<br>
 
<p>  from amuse.units import nbody_system<br>
  from amuse.ic.plummer import new_plummer_model<br>
  from amuse.community.bhtree import Bhtree<br>
  from amuse.io import write_set_to_file,read_set_from_file<br>
 
<p>  stars = new_plummer_model(NBODY)<br>
  gravity = Bhtree()<br>
 
<p>  eps   = 0.05 | nbody_system.length<br>
  tstop = 10   | nbody_system.time<br>
 
<p>  gravity.parameters.opening_angle   = 0.75<br>
  gravity.parameters.epsilon_squared = eps * eps<br>
  gravity.parameters.dt_dia          = 1.0      | nbody_system.time<br>
  gravity.parameters.timestep        = 0.015625 | nbody_system.time <br>
 
<p>  stars_in_gravity = gravity.particles.add_particles(stars)<br>
  gravity.evolve_model(tstop)<br>
  write_set_to_file(stars_in_gravity, FILENAME, format=&rsquo;txt&rsquo;)<br>
 
<p>  
<p> This table has mass, radius, velocity and position, one star per row.
Notice velocity comes before position! Thus the following NEMO command
will convert it to a standard <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
 file: 
<p>  
<p>  nbody=$(tabcols
p.txt | wc -l)<br>
  tabcols p.txt | tabtos - p.snap block1=mass,skip,vx,vy,vz,x,y,z nbody=$nbody<br>
 
<p>  
<p> 
<h2><a name='sect2' href='#toc2'>Bugs</a></h2>

<p> The follow round trip exercise on the <b>txt</b> format causes an error:
 
<p> fmt=txt amuse_convert.py -o junk1 -O $fmt -n 100 amuse_convert.py -i junk1
-I $fmt -o junk2 -O $fmt amuse.io.base.IoException: IO exception: Number of values
on line   &rsquo;0.01 0.0 -0.319149817818 0.911387278048 0.00131274766207 -1.22528821614
-0.310636170602 0.0257190619401&rsquo; is 8, expected 0<br>
 
<p>  
<p> formats like csv, amuse-txt, tsf, dyn all seem to work. 
<h2><a name='sect3' href='#toc3'>Install</a></h2>

<p> Within
NEMO the command  
<p>    mknemo amuse<br>
 
<p>  will get you started on the install.  Note there is a user release that
does not need NEMO, which can be a set of <i>pip install</i>. A developer release
is recommended with NEMO, the start of which will likely look as follows:
 
<p>    cd $NEMO/local/amuse<br>
    pip install -e .<br>
    make bhtree.code<br>
     <br>
  The AMUSE bhtree code should be the same as the original program <a href='bhtree.1.html'><i>bhtree(1NEMO)</i></a>

in NEMO, allowing for a closer comparison. 
<p> 
<h2><a name='sect4' href='#toc4'>Snapshot</a></h2>
As described in the
help (-h) of <b>amuse_convert.py</b>, the following formats are supported by AMUSE:
<br>
<pre>amuse<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;HDF5 file
amuse-txt<tt> </tt>&nbsp;<tt> </tt>&nbsp;text files with AMUSE header format
csv<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;comma separated files
dyn<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Starlab binary structured file
gadget<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Gadget binary data file
hdf5<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;HDF5 file
nemo<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;NEMO binary structured file
starlab<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;Starlab binary structured file
tsf<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;NEMO binary structured file
txt<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;text file containing a table of values separated by a predefined
vts<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;text file containing a table of values separated by a predefined character
vtu<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;text file containing a table of values separated by a predefined character
</pre>
<p> 
<h2><a name='sect5' href='#toc5'>Files</a></h2>
<br>
<pre>$NEMO/src/scripts/mknemo.d/amuse - example install script (can be run via
mknemo)
$NEMO/local/amuse - root of source code after install
$NEMO/src/scripts/python/amuse_convert.py - also copied to $NEMOBIN during
install
</pre>
<p> 
<h2><a name='sect6' href='#toc6'>Ads</a></h2>

<p> @ads 2013A&amp;A...557A..84P @ads 2013CoPhC.184..456P 
<p> 
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='nemo.1.html'>nemo(1NEMO)</a>
, <a href='zeno.1.html'>zeno(1NEMO)</a>
,
<a href='starlab.1.html'>starlab(1NEMO)</a>
, <a href='bhtree.1.html'>bhtree(1NEMO)</a>
 <p>
<br>
<pre>https://www.amusecode.org/
</pre>
<p> 
<h2><a name='sect8' href='#toc8'>History</a></h2>

<p> <br>
<pre>25-may-2025<tt> </tt>&nbsp;<tt> </tt>&nbsp;man page and amuse_convert.py written (MODEST25-SPZ)<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Description</a></li>
<li><a name='toc1' href='#sect1'>Examples</a></li>
<li><a name='toc2' href='#sect2'>Bugs</a></li>
<li><a name='toc3' href='#sect3'>Install</a></li>
<li><a name='toc4' href='#sect4'>Snapshot</a></li>
<li><a name='toc5' href='#sect5'>Files</a></li>
<li><a name='toc6' href='#sect6'>Ads</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>History</a></li>
</ul>
</body>
</html>
