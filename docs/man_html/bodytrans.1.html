<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>BODYTRANS(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
bodytrans - test and optionally save body to scalar mapping 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>bodytrans
expr=</b><i>expression</i> [parameter=value] ... 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>bodytrans</i> is a testbed for
saving/debugging a user-specified mapping from a <a href='body.3.html'><i>body</i>(3NEMO)</a>
 to a real or
integer value.  These mappings are given by an arbitrary C <i>expression</i> involving
any of the variables <b>m</b>, <b>x</b>, <b>y</b>, <b>z</b>, <b>vx</b>, <b>vy</b>, <b>vz</b>, <b>phi</b>, <b>ax</b>, <b>ay</b>, <b>az</b>, <b>aux</b>, <b>key</b>,
<b>t</b>, and <b>i</b>, using various math library functions,  <i>e.g.</i> <b>cbrt()</b>, <b>sqrt()</b>, <b>qbe()</b>,
<b>sqr()</b>,  <b>sin()</b>, <b>cos()</b>, <b>asin()</b>, <b>acos()</b>, <b>tan()</b>, <b>atan()</b>, <b>atan2()</b>, <b>exp()</b>, <b>dex()</b>,
<b>log()</b>, <b>log10()</b>, <b>pow()</b>, <b>fabs()</b>, <b>floor()</b>, <b>ceil()</b>, and <b>rint()</b>.   (assuming
3 dimensional body&rsquo;s, see ENVIRONMENT below). <p>
Given such an expression, <i>bodytrans</i>
invokes the C compiler, which is general but can be rather slow.  To speed
things up, an expression is first treated as a name and checked against
a collection of precompiled expressions stored as ".o" (see <a href='a.out.5.html'><i>a.out(5)</i></a>
)files.
 If the expression is a <i>real</i>/<i>int</i> expression, it will search for an object
file <b>btr</b>_<i>expr</i><b>.o</b>, <b>bti</b>_<i>expr</i><b>.o</b> resp. If a match is found, the precompiled object
is used instead.   If <i>bodytrans</i> has been compiled with auto-saving object
files a next search will be performed on the <b>$NEMOOBJ/bodytrans/BTNAMES</b>
 database. This contains a list of expressions and names of their object
files, these object files were previously generated by any program which
used the <a href='bodytrans.3.html'><i>bodytrans(3NEMO)</i></a>
 routines. <p>
A number of precompiled transformations
already exist, <i>e.g.</i>:  <b>x</b>, <b>y</b>, <b>z</b>, <b>vx</b>, <b>vy</b>, <b>vz</b>, <b>r</b>, <b>v</b>, <b>vr</b>, <b>vt</b>, <b>jtot</b>, <b>phi</b>, <b>etot</b>,
<b>t</b>, and <b>i</b>.  A complete list may be deduced by looking in <b>$NEMOOBJ/bodytrans/</b>,
which is the default repository.  It is possible to customize your own transformations
and collections; see <b> $NEMO/src/nbody/core/bodysub/</b> for model routines.
<p>
If <i>bodytrans</i> has been compiled with auto-saving (the default), the object
file will be saved in the standard repository directory <b>$NEMOOBJ/bodytrans</b>,
and the corresponding database file-list <b>BTNAMES</b> will be updated. When using
the same expression <i>expr</i> at a later time not only can the user then refer
to the expression by it&rsquo;s original expression, but also by its pseudo-name
<i>file</i> (see keyword <i>file</i> and examples below). <p>
For an alternative approach
to use dynamic analysis routines, see <a href='mkbodyfunc.1falcON.html'><i>mkbodyfunc(1falcON)</i></a>
 and  <a href='mkbodiesfunc.1falcON.html'><i>mkbodiesfunc(1falcON)</i></a>
.

<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters are recognized. 
<dl>

<dt><b>expr=</b><i>expression</i> </dt>
<dd>Scalar-valued
C-language expression specifying the transformation to test. If keyword <b>file</b>
is present (see below) a mapping file of the name <b>btX_file</b> is tried before
the expression is turned into a mapping file. Default: <b>x</b>. </dd>

<dt><b>type=</b><i>type_name</i>
</dt>
<dd>Type of value returned; currently either <b>real</b> or <b>int</b>. Default: <b>real</b>. </dd>

<dt><b>mass=</b><i>body_mass</i>
</dt>
<dd>Mass of body used to test mapping.  Default: <b>0.125</b>. </dd>

<dt><b>pos=</b><i>position_vector</i> </dt>
<dd>Position
of body, specified by a comma-separated list of components. Default: <b>0.5,-0.5,1.0</b>.
</dd>

<dt><b>vel=</b><i>velocity_vector</i> </dt>
<dd>Velocity of body.  Default: <b>0.1,0.2,-0.3</b>. </dd>

<dt><b>phi=</b><i>potential_value</i>
</dt>
<dd>Gravitational potential at position of body.  Default: <b>-1.2</b>. </dd>

<dt><b>acc=</b><i>acceleration_vector</i>
</dt>
<dd>Acceleration of body.  Default: <b>-0.5,0.7,0.1</b>. </dd>

<dt><b>aux=</b><i>auxiliary_value</i> </dt>
<dd>Real auxiliary
value associated with body.  Default: <b>3.141592</b>. </dd>

<dt><b>key=</b><i>key_value</i> </dt>
<dd>Integer key
value associated with body.  Default: <b>3</b>. </dd>

<dt><b>t=</b><i>time_value</i> </dt>
<dd>Time value available
to <i>expression</i>.  Default: <b>2.5</b>. </dd>

<dt><b>i=</b><i>index_value</i> </dt>
<dd>Body index available to <i>expression</i>.
 Default: <b>1</b>. </dd>

<dt><b>alias=</b><i>file_name</i> </dt>
<dd>Tail of the filename under which the <b>expr</b> transformation
is to be saved for later recovery. Note that the first four characters of
the filename are already fixed and will be <b>btX_</b>, where <b>X</b> is either <b>r</b> or
<b>i</b>, depending on the <b>type</b> (see above) of the expression. The full filename
will hence be <b>btX_file</b>. [default: not used]. </dd>

<dt><b>btnames=</b><i>file_name</i> </dt>
<dd>File containing
a database of expression and filenames under which they are to be saved.
When used, the program (re) creates all <a href='bodytrans.5.html'>bodytrans(5)</a>
 files and exits. [default:
no used]. </dd>

<dt><b>show=t|f</b> </dt>
<dd>Show the currently saved bodytrans functions (from the
BTNAMES files). [Default: <b>f</b>]. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Example</a></h2>
The following command <br>
<pre>    % bodytrans expr=x+y+z alias=sum
</pre>saves the mapping in an object file <i>btr_sum.o</i>, and can be  later used as
in: <br>
<pre>    % snapprint snap-file x+y+z
</pre>or using this alias <br>
<pre>    % snapprint snap-file sum
</pre>It is not necessary to provide a pseudonym using the keyword <b>alias</b>, although
recommended if <i>bodytrans</i> is used. As an example, the command <br>
<pre>    % bodytrans expr=x+y+z
</pre>could save the mapping in an object file <i>btr__24</i>, and can later be referred
to as <br>
<pre>    % snapprint snap-file x+y+z
</pre>or the more cryptic <br>
<pre>    % snapprint snap-file _24
</pre>The relationship between <i>_24</i> and <i>x+y+z</i> is saved in the file <b>BTNAMES</b> and
resolved at run-time. 
<h2><a name='sect5' href='#toc5'>BTclean</a></h2>
There is a shell script <b>BTclean</b> that selectively
cleans up object files listed in the BTNAMES file. A new &rsquo;BTNAMES&rsquo; file is
generated. You can run it interactively (have to be NEMO user though) and
answer some simple questions. 
<h2><a name='sect6' href='#toc6'>Environment</a></h2>
By default, body to scalar transformations
are applied to bodies which have vectors of lenght 3 (see also <a href='vectmath.3.html'>vectmath(3NEMO)</a>
).
By adding <b>-DTWODIM</b> to the environment variable <b>CFLAGS</b>, newly created bodytrans
variables are compiled with 2D bodies. Obviously it is very dangerous to
mix 2D and 3D bodies, but the possibility exists. 
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='body.3.html'>body(3NEMO)</a>
, <a href='bodytrans.3.html'>bodytrans(3NEMO)</a>
,
<a href='vectmath.3.html'>vectmath(3NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
, <a href='mkbodyfunc.1falcON.html'>mkbodyfunc(1falcON)</a>
, <a href='mkbodiesfunc.1falcON.html'>mkbodiesfunc(1falcON)</a>


<h2><a name='sect8' href='#toc8'>Author</a></h2>
Joshua E. Barnes, Peter Teuben 
<h2><a name='sect9' href='#toc9'>Files</a></h2>
<br>
<pre>~/src/nbody/core/bodytrans.c<tt> </tt>&nbsp;<tt> </tt>&nbsp;code
~/src/nbody/core/bodysub/*<tt> </tt>&nbsp;<tt> </tt>&nbsp;default standard bodytrans(5) files
</pre>
<h2><a name='sect10' href='#toc10'>History</a></h2>
<br>
<pre>xx-xxx-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 Created     <tt> </tt>&nbsp;<tt> </tt>&nbsp;JEB
8-jul-89<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1 saving bodytrans mappings into user files<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
19-nov-89<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2 BTNAMES database used for saving<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
10-dec-91<tt> </tt>&nbsp;<tt> </tt>&nbsp;some more doc<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
12-aug-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;documented CFLAGS usage <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
2-aug-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.3 add show=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Example</a></li>
<li><a name='toc5' href='#sect5'>BTclean</a></li>
<li><a name='toc6' href='#sect6'>Environment</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Files</a></li>
<li><a name='toc10' href='#sect10'>History</a></li>
</ul>
</body>
</html>
