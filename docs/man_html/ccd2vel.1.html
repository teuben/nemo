<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>CCD2VEL(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
ccd2vel - convert map of wave/freq/velocities to doppler velocities

<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>ccd2vel</b> [parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>ccd2vel</b> converts a map to
a doppler velocity map. The input map units can be in wavelength (<b>restwave=</b>
is needed), frequency (<b>restfreq=</b> is needed) or one of three doppler velocity
frames of reference (radio, optical, relativistic). The output map will
be in one of those three doppler velocity frames of reference (radio, optical,
relativistic). Output units are normally km/s. <p>
This program ignores references
to being in a Barycenric, Heliocentric or LSR frame. See comments below
in the CASA and MIRIAD sections. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters are
recognized in any order if the keyword is also given 
<dl>

<dt><b>in=</b> </dt>
<dd>Optional input
image file. No default. </dd>

<dt><b>out=</b> </dt>
<dd>Output image file. No Default. </dd>

<dt><b>from=rel|rad|opt</b>
</dt>
<dd>Frame of reference (relativistic, radio, optical). When using <b>restwave=</b>
or <b>restfreq=</b> this keyword is ignored. [rel]  </dd>

<dt><b>to=rel|rad|opt</b> </dt>
<dd>Frame of reference
(relativistic, radio, optical) [rel]  </dd>

<dt><b>restwave=</b> </dt>
<dd>Rest wavelength, in the
units of the map.   Only one of restwave of restfreq can be used. </dd>

<dt><b>restfreq=</b>
</dt>
<dd>Rest frequency, in the units of the map </dd>

<dt><b>clip=</b><i>min,max</i> </dt>
<dd>Clipping of output
(none, or two values needed). Default: no clipping. </dd>

<dt><b>units=km/s</b> </dt>
<dd>Desired output
units (km/s, m/s) [km/s] </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>
Here is how one converts a fits cube with
an optical wavelengths 3rd axis to a relatistic velocity field: <br>
<pre>   fitsccd Ha.cube.fits  - | ccdmom - - mom=3 | ccd2vel - Ha-3.vel opt rel 6562.80

</pre>and here an optical velocity field into a relativistic <br>
<pre>   NGC2347.VoptFromHa.fits - | ccd2vel - NGC2347.VrelFromHa.ccd opt rel
</pre>
<h2><a name='sect5' href='#toc5'>Casa</a></h2>
From the <b>tclean</b> documentation on the <b>veltype</b> keyword: 
<p> Velocity type
(radio, z, ratio, beta, gamma, optical) For start and/or width specified
in velocity, specifies the velocity definition 
<p> Options: &rsquo;radio&rsquo;,&rsquo;optical&rsquo;,&rsquo;z&rsquo;,&rsquo;beta&rsquo;,&rsquo;gamma&rsquo;

<p> NOTE: the viewer always defaults to displaying the &rsquo;radio&rsquo; frame,  but that
can be changed in the position tracking pull down. 
<p> The different types
(with F = f/f0, the frequency ratio), are: <br>
<pre>                       Z = (-1 + 1/F)
                      RATIO = (F) *
                      RADIO = (1 - F)
                      OPTICAL == Z
                      BETA = ((1 - F2)/(1 + F2))
                      GAMMA = ((1 + F2)/2F) *
                      RELATIVISTIC == BETA (== v/c)
                      DEFAULT == RADIO
                      Note that the ones with an &rsquo;*&rsquo; have no real interpretation

                      (although the calculation will proceed) if given
as a velocity.
</pre>
<h2><a name='sect6' href='#toc6'>Miriad</a></h2>
From the <b>VELSW</b> documentation: 
<p> VELSW is a Miriad task used to change
the type of a spectral axis. For example, a frequency axis could be changed
to redshift or relativistic velocity. 
<p> The resulting axis may be non-linear.
 If so, it will be marked by a code, e.g. VOPT-F2W, meaning that it is actually
linear in frequency (F) but is labelled as a spectral type that is linear
in wavelength (W).  Such non-linear axes are handled properly by the coordinate
routines.  However, when plotted, non-linear axes are only correct to first-order
at the reference point. 
<p> Switching between velocity and other spectral types,
via the Doppler formula, is only possible if a rest frequency is recorded
in the header.  It is also possible to change the Doppler reference frame
to barycentric or LSRK (only). 
<p> Note that velocity axes labelled as {VELO,FELO}-{HEL,LSR}
in Miriad have been Doppler-shifted to the specified frame (barycentric
or LSRK) as would be expected.  However, frequency axes labelled as FREQ-{HEL,LSR}
are actually topocentric, the Doppler frame here refers only to the value
of vobs recorded in the header.  This convention also applies to FITS images
written and read by Miriad - the presence of vobs with FREQ-{HEL,LSR} in
the header of a Miriad image read from such a FITS file is indicative. 
However, there is a potential inconsistency when FITS files generated by
other packages are read into Miriad. See option altspc below. 
<p> <br>
<pre>Keyword: axis
         The spectral type to change to:
           FREQ: frequency,
           ENER: photon energy (linear with frequency),
           WAVN: wavenumber (linear with frequency),
           VRAD: radio velocity (linear with frequency),
           WAVE: wavelength,
           VOPT: optical velocity (linear with wavelength),
           ZOPT: redshift (linear with wavelength),
           AWAV: air wavelength (applicable to optical regime only),
           VELO: apparent radial velocity (relativistic),
           BETA: relativistic beta factor (= VELO/c).
</pre>
<p> Note that there is no minimum-match on these four-letter spectral types.
 For backwards compatibility, &rsquo;frequency&rsquo;, &rsquo;radio&rsquo;, and &rsquo;optical&rsquo; (with min-match)
are understood as synonyms for &rsquo;FREQ&rsquo;, &rsquo;VRAD&rsquo;, and &rsquo;VOPT&rsquo;. 
<p> AIPS-convention types,
{FREQ,VELO,FELO}-{HEL,LSR}, are also understood and will be translated. 
Here VELO means radio velocity (VRAD), and FELO is optical velocity (VOPT-F2W).
However, these types are deprecated, and there is no way to switch to them
explicitly. 
<p> An optional second value defines the Doppler frame to transform
to (min-match applies): <br>
<pre>   BARYCENT: Solar System barycentre (aka BARYCENT{RE,ER,RIC}, or HEL),
   LSRK: Kinematic Local Standard of Rest.
</pre>The default for both the spectral type and the Doppler frame is to leave
them as is, performing only required translations. 
<p> </pre>
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='ccdsky.1.html'>ccdsky(1NEMO)</a>
,
<a href='ccdmath.1.html'>ccdmath(1NEMO)</a>
, <a href='fitsccd.1.html'>fitsccd(1NEMO)</a>
 
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Peter Teuben 
<h2><a name='sect9' href='#toc9'>Update History</a></h2>
<br>
<pre>27-Apr-17<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.3 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Casa</a></li>
<li><a name='toc6' href='#sect6'>Miriad</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Update History</a></li>
</ul>
</body>
</html>
