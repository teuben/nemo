<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>SNAPROTATE(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
snaprotate - rotate N-body snapshot file about principle axes. 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>snaprotate
in=</b>snap-file <b>out=</b>snap-file [parameter=value] ... 
<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>snaprotate</i> rotates
the positions and velocities of an N-body snapshot file. A maximum of 3 rotations
around either the x, y or z axes can be applied in any order. An Eulerian
rotation is a rotation around the z, y and z axes respectively. Some common
examples for projections of barred and unbarred galaxies are given in the
examples below. <p>
The rotation is counter clock-wise (i.e., mathematically positive,
unless  <b>invert=f</b> is used) as seen from the right-handed <i>xyz</i>-axes; a <b>z</b> rotation
will rotate the <b>x</b> axis towards the <b>y</b> axis; a <b>y</b> rotation will rotate the
<b>z</b> axis towards the <b>x</b> axis; a <b>x</b> rotation will rotate the <b>y</b> axis towards
the <b>z</b> axis. <p>
An alternate way to specify rotations is using the <b>spinvector=</b>
keyword, where all points are rotated around this vector. <p>
Although by default
all vectors are rotated by the same matrix, the keyword <b>select=</b> can be
used to select any set of Position, Velocity or Acceleration. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The
following parameters are recognized; they may be given in any order. 
<dl>

<dt><b>in=</b><i>snap-file</i>
</dt>
<dd>Input data is read from <i>snap-file</i>, which must be in snapshot format. </dd>

<dt><b>out=</b><i>snap-file</i>
</dt>
<dd>Output data is written to <i>snap-file</i>. </dd>

<dt><b>theta=</b><i>x-angle</i> </dt>
<dd>Angles (in degrees) to
rotate particles about the specified axes in the <b>order=</b> keyword. Up to 3
rotations can be applied.  Default: none. </dd>

<dt><b>order=</b><i>trans-order</i> </dt>
<dd>Order to apply
the rotations about the three coordinate axes. An Eulerian rotation would
be <b>order=zyz</b>. Default is none. See also the <b>spinvector</b> keyword below for
an alternate way to specify rotations. </dd>

<dt><b>invert=</b><i>invert-flag</i> </dt>
<dd>If <b>true</b>, invert
specified transformation. Useful for rotating something back to original
coordinate system. Default is <b>false</b>. </dd>

<dt><b>tscale=</b><i>t-scale-factor</i> </dt>
<dd>If used, this is
the degrees per time-unit that the <b>theta</b> angles are multiplied with in order
to calculate the actual rotation angle. This can give interesting effects
if used for simulations. Default not used. </dd>

<dt><b>spinvector=</b><i>x,y,z</i> </dt>
<dd>Use this vector
if you know the vector to rotate around instead of a set of euler angles.
Only one angle <b>theta=</b> is needed. Positive rotation is a counterclockwise
rotation as seen down the spin vector towards the origin. The vector does
not need to be normalized. **note this option still disables various other
options such as tscale, invert </dd>

<dt><b>select=</b><i>vec1,vec2,...</i> </dt>
<dd>Vector variables in a
snapshot that should be rotated. Valid options are: <b>pos</b>, <b>vel</b>,  and <b>acc</b>. Exact
match required for now. [Default:  <b>pos,vel,acc</b>] 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>

<p> For &rsquo;normal&rsquo; unbarred
spiral galaxies the following example shows how to project them into their
normaly sky view, taking the sense of rotation into account: <br>
<pre>   set pa=170             # M51, use pa=200 for M33
   set inc=22             # M51, use inc=30 for M33
   set sign=1             # M51, use sign=-1 for M33
   set sinc=&lsquo;nemoinp "iflt($sign,0,$inc,-$inc)"&lsquo;
   mkdisk - 1000 sign=$sign |\
      snaprotate - - theta=$sinc,$pa order=yz |\
      snapgrid - velfie.ccd mom=-1
   nds9 velfie.ccd        # view the velocity field using &rsquo;ds9&rsquo;.fi
</pre>With sign=1 it will create a counter clockwise rotating disk and project
it using <b>-$inc,$pa</b>, For a clock-wise rotating disk  <b>$inc,$pa</b>,  hence the
somewhat awkward looking expressing to compute <b>sinc</b>. <p>
Suppose you have a
barred galaxy model, <i>bar.dat</i>,  with the galactic plane at z=0 and the bar
along the y axis (<i>"position angle=0"</i>),  and want to project this (such
that z=0 will be the sky plane, and the positive z-axis pointed towards
the observer) with given final  position angle ($pa), inclination ($inc)
and angle from line of nodes to bar ($phi) the following rotations will
do the job: <br>
<pre>    set pa=39
    set inc=-45
    set phi=-34
    snaprotate bar.dat n7476.dat "atand(tand($phi)/cosd($inc)),$inc,$pa"
zyz
    snapplot n7476 psize="z&gt;0?0.03:0.0"
    
</pre>where <b>psize</b> was choosen such that &lsquo;&lsquo;near&rsquo;&rsquo; (z&gt;0)  particles were plotted a bit
bigger to accentuate the near side of the model. Flipping the sign if $inc
will flip the near and far side. 
<p> 
<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='snapshift.1.html'>snapshift(1NEMO)</a>
, <a href='snapscale.1.html'>snapscale(1NEMO)</a>
,
<a href='snapspin.1.html'>snapspin(1NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
 
<p> 
<h2><a name='sect6' href='#toc6'>Author</a></h2>
Joshua E. Barnes, Peter Teuben 
<p>

<h2><a name='sect7' href='#toc7'>History</a></h2>
<br>
<pre>xx-jan-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 original                   <tt> </tt>&nbsp;<tt> </tt>&nbsp;JEB
3-oct-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1 eulerian angles (order=zyz)<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
17-feb-89:      V2.1a new get+snap macros redef&rsquo;s<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
27-nov-89:<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1b cosmetic defv[]             <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-nov-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.0 theta is now an array keyword<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
1-jun-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;documented the rotation manner bit more precise     <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
11-jun-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.0 rotation now defined in math sense             <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
21-nov-98<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.0 added tscale= keyword<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
18-nov-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.1a added select=, also implemented select=acc<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
22-sep-08<tt> </tt>&nbsp;<tt> </tt>&nbsp;V6.0 added spinvector=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
18-jan-22<tt> </tt>&nbsp;<tt> </tt>&nbsp;fix sense of rotation example<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Author</a></li>
<li><a name='toc7' href='#sect7'>History</a></li>
</ul>
</body>
</html>
