<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>SCFM(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
scfm - N-body integrator using the self-consistent field method 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
scfm

<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>scfm</b> is a code to evolve self-gravitating systems using a self-consistent
field approach.  This version has been optimized for supercomputers and
is fully vectorized.  The code is written in standard FORTRAN, although
some CRAY-specific vector intrinsic routines have been used. <p>
The computational
system of units is determined by the input data. No explicit assumtions
about the value of the gravitational  constant have been made; it is read
in as a parameter. Particles are not required to have identical masses. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
Two
files (both in ascii) determine the input parameters and input condition,
and must be present at the start of the program. <p>
The first one is the input
parameter file with the name <b>SCFPAR</b>. It  contains, line by line, the input
parameters for this run. In the table  below the values for the benchmark
input parameter file are given in square brackets: <p>
<br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp; Comment  <tt> </tt>&nbsp;<tt> </tt>&nbsp;Private comment. (cannot be a null string)
<tt> </tt>&nbsp;<tt> </tt>&nbsp; headline  <tt> </tt>&nbsp;<tt> </tt>&nbsp;Identification string for the run (max 50 char) [test]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; nsteps    <tt> </tt>&nbsp;<tt> </tt>&nbsp;Number of timesteps [100]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; noutbod   <tt> </tt>&nbsp;<tt> </tt>&nbsp;Output system state (file SNAPxxx) once every noutbod steps
[100]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; noutlog   <tt> </tt>&nbsp;<tt> </tt>&nbsp;Output logfile data (file SCFMLOG) once every noutlog steps
[10]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; dtime     <tt> </tt>&nbsp;<tt> </tt>&nbsp;Integration timestep [0.01]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; gravconst<tt> </tt>&nbsp;<tt> </tt>&nbsp;Gravitional Constant [1]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; selfgrav   <tt> </tt>&nbsp;<tt> </tt>&nbsp;[.TRUE.]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; inptcoef   <tt> </tt>&nbsp;<tt> </tt>&nbsp;[.FALSE.]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; outpcoef      <tt> </tt>&nbsp;<tt> </tt>&nbsp;[.FALSE.]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; zeroodd   <tt> </tt>&nbsp;<tt> </tt>&nbsp;[.FALSE.]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; zeroeven   <tt> </tt>&nbsp;<tt> </tt>&nbsp;[.FALSE.]
<tt> </tt>&nbsp;<tt> </tt>&nbsp; fixacc   <tt> </tt>&nbsp;<tt> </tt>&nbsp;[.FALSE.]
</pre>Note that the first line is a redundant comment not used by the program,
but needs to be present. <p>
The second file has to be named <b>SCFBI</b>, and contains
the input  bodies. The first line must contain the number of bodies, and
the time of this snapshot, followed by  <p>
Output files created are <b>SNAP</b><i>xxx</i>,
which contains all the requested (see <b>noutbod</b>) output snapshots, one for
each  requested output time in ascii <a href='ntmpv.5.html'><i>ntmpv(5NEMO)</i></a>
 format. 
<p> which contains
a log (see <b>noutlog</b>) of the run and <b>SCFBO</b>, which contains a binary (machine
dependable) dump of the last snapshot. <i>Note that these output files must
not be present when the  program is to be run.</i> (ANSI FORTRAN)  <p>
To avoid
excessive overhead, <b>noutlog</b> should be larger than 1, typically ~ 10, depending
on total number of steps though. 
<h2><a name='sect4' href='#toc4'>Running</a></h2>
A shell script <b>runscfm</b> is available
to ease running this program slightly, and also prevents you from running
two versions of <b>scfm</b> in the same directory. Script usage: <p>
<b>runscfm</b> <i>input_snapshot
output_snapshot pars_file</i> <p>
The <i>input_snapshot</i> and  <i>output_snapshot</i> are now
in <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
 format, whereas the <i>pars_file</i> is in the format described
in the previous <b>PARAMETERS</b> section. 
<h2><a name='sect5' href='#toc5'>Examples</a></h2>
Preparing an input dataset for
scfm can be done as follows: <br>
<pre>    snapprint in=i.snap options=m,x,y,z,vx,vy,vz header=t &gt; i.tab
</pre><p>
Converting output tables made by scfm into <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
 can be done
as follows: <br>
<pre>tabtos in=p.tab out=o.snap header=nbody,time block1=mass,pos,vel
</pre>
<h2><a name='sect6' href='#toc6'>Make</a></h2>
May need another version of second.f on some systems. See also the source
code directory of <b>treecode3</b>. 
<h2><a name='sect7' href='#toc7'>Benchmarks</a></h2>
Timings are from 1000 integration
steps. <br>
<pre>machine <tt> </tt>&nbsp;<tt> </tt>&nbsp;cpu<tt> </tt>&nbsp;<tt> </tt>&nbsp;N-body
US-140     <tt> </tt>&nbsp;<tt> </tt>&nbsp;143"<tt> </tt>&nbsp;<tt> </tt>&nbsp;1000
US-140     <tt> </tt>&nbsp;<tt> </tt>&nbsp;269"<tt> </tt>&nbsp;<tt> </tt>&nbsp;2000
US-140     <tt> </tt>&nbsp;<tt> </tt>&nbsp;611"<tt> </tt>&nbsp;<tt> </tt>&nbsp;4000
US-140    <tt> </tt>&nbsp;<tt> </tt>&nbsp;1072"<tt> </tt>&nbsp;<tt> </tt>&nbsp;8000
US-140       <tt> </tt>&nbsp;<tt> </tt>&nbsp;....<tt> </tt>&nbsp;<tt> </tt>&nbsp;16000
US-2           <tt> </tt>&nbsp;<tt> </tt>&nbsp;380<tt> </tt>&nbsp;<tt> </tt>&nbsp;8000
</pre>
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Lars Hernquist 
<h2><a name='sect9' href='#toc9'>Files</a></h2>
<br>
<pre>SCFPAR                    <tt> </tt>&nbsp;<tt> </tt>&nbsp;input parameters (ascii)
SCFBI                    <tt> </tt>&nbsp;<tt> </tt>&nbsp;input bodies (ascii)
SCFLOG                    <tt> </tt>&nbsp;<tt> </tt>&nbsp;output logfile
SCFOUT                    <tt> </tt>&nbsp;<tt> </tt>&nbsp;output something (&rsquo;termfile&rsquo;)
SCFELxxx                  <tt> </tt>&nbsp;<tt> </tt>&nbsp;output something (1/body)
SNAPxxx                  <tt> </tt>&nbsp;<tt> </tt>&nbsp;output bodies
SCFICOEF                 <tt> </tt>&nbsp;<tt> </tt>&nbsp;input coefficients file
SCFOCOEF                 <tt> </tt>&nbsp;<tt> </tt>&nbsp;output coefficients file
~/usr/lars/scfm/        <tt> </tt>&nbsp;<tt> </tt>&nbsp;original LARS version
~/src/nbody/evolve/scfm/     <tt> </tt>&nbsp;<tt> </tt>&nbsp;original LARS version
</pre>
<h2><a name='sect10' href='#toc10'>Benchmark</a></h2>
Some timings for the standard benchmark (100 timesteps, 1024 particles):
<br>
<pre>Pentium-333<tt> </tt>&nbsp;<tt> </tt>&nbsp;6.93"
Pentium-500<tt> </tt>&nbsp;<tt> </tt>&nbsp;4.58
Pentium-933     2.76    
Ultra-10/300<tt> </tt>&nbsp;<tt> </tt>&nbsp;9.64<tt> </tt>&nbsp;<tt> </tt>&nbsp;(g77 -O)
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;7.20<tt> </tt>&nbsp;<tt> </tt>&nbsp;(f77 -O)
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;7.33<tt> </tt>&nbsp;<tt> </tt>&nbsp;(f77 -fast)
</pre>
<h2><a name='sect11' href='#toc11'>See Also</a></h2>
<a href='runscfm.1.html'>runscfm(1NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
, <a href='snapprint.1.html'>snapprint(1NEMO)</a>
, <a href='ntmpv.5.html'>ntmpv(5NEMO)</a>

<p>
Hernquist, L. &amp; Ostriker, J. (1992) <i>A Self-Constistent Field Method for Galactic
Dynamics</i>, ApJ. 386, 375. 
<h2><a name='sect12' href='#toc12'>History</a></h2>
<br>
<pre>1-jan-91<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1 Public release created<tt> </tt>&nbsp;<tt> </tt>&nbsp;Lars Hernquist (@UCB)
7-jul-97<tt> </tt>&nbsp;<tt> </tt>&nbsp;integrated in NEMO/usr tree         <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
20-jan-98<tt> </tt>&nbsp;<tt> </tt>&nbsp;integrated in NEMO/src tree          <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
18-dec-99<tt> </tt>&nbsp;<tt> </tt>&nbsp;fixed some Makefile bugs, added bench timings<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Running</a></li>
<li><a name='toc5' href='#sect5'>Examples</a></li>
<li><a name='toc6' href='#sect6'>Make</a></li>
<li><a name='toc7' href='#sect7'>Benchmarks</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Files</a></li>
<li><a name='toc10' href='#sect10'>Benchmark</a></li>
<li><a name='toc11' href='#sect11'>See Also</a></li>
<li><a name='toc12' href='#sect12'>History</a></li>
</ul>
</body>
</html>
