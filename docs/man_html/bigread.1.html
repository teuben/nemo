<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>BIGREAD(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
bigread - measure big buffered read speed of large files 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>bigread</b>
[parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
This program reads a file in fixed sized blocks,
choosen by the user, and reports the average speed (MB/sec) for each block.
 This is purely based on the system cpu clock, not the user cpu clock (which
is usually 0). The intent is to measure large blocked file I/O. <p>
A curious
statement about a QLC drive made me write this program:  <i>The read speed
is about 2000MB/sec, but with a full cache, or after about 140GB, the read
speed goes down to 185MB/sec.</i> The <i>truth</i> is far more complex, but perhaps
this program will come in handy one day. <p>
You may thus find out that depending
on the buffer size the read speed is fast in the beginning, but then later
drops. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters are recognized in any order if
the keyword is also given: 
<dl>

<dt><b>in=</b> </dt>
<dd>Input file [???]      </dd>

<dt><b>bufsize=</b> </dt>
<dd>Buffer size,
in (1024 style) GB [1]. </dd>

<dt><b>mode=0|1|2</b> </dt>
<dd>The cputime2(mode):  0:usr 1:sys (from
<a href='times.2.html'><i>times(2)</i></a>
 or 2:clock from <a href='clock.2.html'><i>clock(2)</i></a>
. [1] </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>
Here are a few examples how
to create large (binary) files in NEMO, with size 2GB, 20GB and 200GB resp.
Pick your poison: <br>
<pre>    mkspiral s1 1000000 nmodel=40  
    mkspiral s2 1000000 nmodel=400 
    mkspiral s3 1000000 nmodel=4000
</pre>and to time them <br>
<pre>    /usr/bin/time bigread s1 0.1
   0 602.353
   1 1706.67
   2 1706.67
   ...
   18 1280
   19 1024
   20 1470.61
   ### nemo Debug Info: End-time 1.73 sec
   Speed: n=21 min=602.353 max=1706.67 mean=1313.52 median=1280 rms=284.617
   0.00user 1.74system 0:02.17elapsed 80%CPU (0avgtext+0avgdata 107296maxresident)k
   4375016inputs+0outputs (0major+26364minor)pagefaults 0swaps
</pre>For benchmarking sometimes you want to make sure the I/O cache is empty.
On linux the following command will do this: (as root) <br>
<pre>     sync ; sync; sync; 
     sudo echo 1 &gt; /proc/sys/vm/drop_caches
     sync ; sync; sync;
     
</pre>
<h2><a name='sect5' href='#toc5'>Caveats</a></h2>
Benchmarking I/O operations on a linux (unix) system can be very
tricky to understand. Here is an example of reading from a file vs. from
a pipe: <br>
<pre>    bigread s1 0.1
    cat s1 | bigread - 0.1
</pre><p>
Obviously, making bufsize (which is in GB) too large, you can find out
how well your swap performs. <p>
For debug=1 the output also contains the <a href='timers.3.html'><i>timers(3NEMO)</i></a>
,
which is much harder to interpret on a mult-tasking system. 
<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='dd.1.html'>dd(1)</a>
,
<a href='clock.2.html'>clock(2)</a>
, <a href='iotop.1.html'>iotop(1)</a>
, <a href='bonnie++.1.html'>bonnie++(1)</a>
, <a href='iozone3.1.html'>iozone3(1)</a>
, <a href='cputime.3.html'>cputime(3NEMO)</a>
, <a href='mkspiral.1.html'>mkspiral(1NEMO)</a>


<h2><a name='sect7' href='#toc7'>Files</a></h2>
NEMO/src/kernel/io/bigread.c 
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Peter Teuben 
<h2><a name='sect9' href='#toc9'>Update History</a></h2>
<br>
<pre>11-Jul-20<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.1 created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Caveats</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
<li><a name='toc7' href='#sect7'>Files</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Update History</a></li>
</ul>
</body>
</html>
