<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>POTENTIAL(5NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
acceleration - format for accelerations description (functors) 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<br>
<pre>#include &lt;acceleration.h&gt;typedef void(*acc_pter)         /* return: void 
                          */(int,                      /* input:  number
of dimensions            */double,                   /* input:  simulation
time                 */int,                      /* input:  number bodies
= size of arrays  */const void*,              /* input:  masses:      
  m[i]            */const void*,              /* input:  positions    
  (x,y,z)[i]      */const void*,              /* input:  velocities   
  (u,v,w)[i]      */const int *,              /* input:  flags        
  f[i]            */void*,                    /* output: potentials   
  p[i]            */void*,                    /* output: accelerations
  (ax,ay,az)[i]   */int,                      /* input:  indicator    
                  */char);                    /* input:  type: &rsquo;f&rsquo; or &rsquo;d&rsquo; 
              */
acc_pter get_acceleration(const char*,   /* input:  acc_name
              */const char*,   /* input:  acc_pars               */const
char*,   /* input:  acc_file               */bool      *,   /* output:
need masses?           */bool      *);  /* output: need velocities?   
   */</pre>
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<a href='acceleration.5NEMO.html'><i>acceleration(5NEMO)</i></a>
 are implemented as an improvement to
the  nearly-compatible <a href='potential.5NEMO.html'><i>potential(5NEMO)</i></a>
 format. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The 4th argument
to get_acceleration() is boolean and returns whether masses are required
as input for acceleration(). If they are not required a NULL pointer may
be given. <p>
The 5th argument to get_acceleration() is boolean and returns
whether velocities are required as input for acceleration(). If they are
not required a NULL pointer may be given. Velocities may be used to compute
friction forces, such as the drag a gaseous disk is generating on stars
crossing it. <p>
arrays are passed as pointer to void. They must be either all
of type float or all of type double as indicated by the last argument being
&rsquo;f&rsquo; or &rsquo;d&rsquo;, respectively. <p>
arrays of vector quantities are in the order x0,y0,z0,
x1,y1,z1, ... <p>
if the pointer to flags is NULL, all bodies are supposed to
be active, otherwise only those for which (f[i] &amp; 1) is true. <p>
the argument
"indicator" of acceleration() indicates whether the accelerations and potential
shall be assigned or added. If bit 0 is set, the potential    is added,
otherwise assigned, If bit 1 is set, the acceleration is added, otherwise
assigned. So, 0 means both are assigned. 
<p> 
<p> 
<p> 
<p> 
<p> 
<h2><a name='sect4' href='#toc4'>Examples</a></h2>
The following table
lists the non-pattern speed parameters  for a few example potentials found
in <b>$NEMOOBJ/potential</b>. <i>Note: the pattern speed is not listed here</i> <p>
<br>
<pre>harmonic<tt> </tt>&nbsp;<tt> </tt>&nbsp;wx,wy,wz<tt> </tt>&nbsp;<tt> </tt>&nbsp;1,1,1
plummer<tt> </tt>&nbsp;<tt> </tt>&nbsp;m,a      <tt> </tt>&nbsp;<tt> </tt>&nbsp;1,1
log  <tt> </tt>&nbsp;<tt> </tt>&nbsp;mc,rc,q  <tt> </tt>&nbsp;<tt> </tt>&nbsp;1,1,1
bar83<tt> </tt>&nbsp;<tt> </tt>&nbsp;fm,fx,ca<tt> </tt>&nbsp;<tt> </tt>&nbsp;1.334697416,8.485281374,0.2
hackforce<tt> </tt>&nbsp;<tt> </tt>&nbsp;tol,eps,rsize,fcells<tt> </tt>&nbsp;<tt> </tt>&nbsp;1,0.025,4,0.75
ccd<tt> </tt>&nbsp;<tt> </tt>&nbsp;Iscale,Xcen,Ycen,Dx,Dy<tt> </tt>&nbsp;<tt> </tt>&nbsp;1,0,0,1,1
</pre>A full listing, including their mathematical expression can be found in
the NEMO manual, see also <i>$NEMO/text/manuals/potential.inc,</i>, and of course
in <i>$NEMO/src/orbit/potential/data</i>. 
<h2><a name='sect5' href='#toc5'>Bugs</a></h2>
Since the later introduction of a
third character valued parameter in <i>inipotential()</i> a Fortran-to-C interface
cannot be used in as portable a way as before. A small Fortran-to-C interface
is however available, but is not guaranteed to work on all machines. Also
keep in mind if you write your potentials in fortran: common blocks and
other used routines get loaded into the executable, with the potential
for duplicate symbol names. 
<p> Most likely <a href='loadobj.3NEMO.html'><i>loadobj(3NEMO)</i></a>
 will break under
such circumstances. <p>
Second: no I/O should be done. In practise this also
means that this third parameter, <b>potfile</b>, of <i>inipotential</i> cannot be used,
as is mostly serves as a filename. The reason is that we didn&rsquo;t want the
programs to have to link in huge fortran I/O libraries, including various
portability problems.  <p>
There is one exception: <a href='potlist.1NEMO.html'><i>potlist(1NEMO)</i></a>
 is allowed
to  load <a href='potential.5NEMO.html'><i>potential(5NEMO)</i></a>
 files with FORTRAN WRITE statements. After you
have made sure the function works as you think,  these statements must
be Commented out and can then be reloaded by most other potential/orbit
programs. 
<p> 
<h2><a name='sect6' href='#toc6'>Environment</a></h2>
The environment variable <b>ACCPATH</b> can be used to search
for accelerations in other than the local directory.  
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='acceleration.3NEMO.html'>acceleration(3NEMO)</a>
,
<a href='potential.5NEMO.html'>potential(5NEMO)</a>
, <a href='manipulator.5NEMO.html'>manipulator(5NEMO)</a>
,<a href='gyrfalcON.1NEMO.html'>gyrfalcON(1NEMO)</a>
 
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Peter Teuben

<h2><a name='sect9' href='#toc9'>Files</a></h2>
<br>
<pre>~/src/orbit/potential   potential.c, potential.h potentialf.c
~/text/manuals      <tt> </tt>&nbsp;<tt> </tt>&nbsp;potential.inc (latex description)
</pre>
<h2><a name='sect10' href='#toc10'>Update History</a></h2>
<br>
<pre>28-oct-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;man page finally written<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Bugs</a></li>
<li><a name='toc6' href='#sect6'>Environment</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Files</a></li>
<li><a name='toc10' href='#sect10'>Update History</a></li>
</ul>
</body>
</html>
