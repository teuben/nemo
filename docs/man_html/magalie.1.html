<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>MKKD95(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
magalie - Boily et al. composite disk-bulge-halo model 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>magalie</b>
[parameter=value] <p>
<b>magalie.exe</b>  
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>magalie</b> creates a composite Disk-Bulge-Halo
galaxy in  near equilibrium following the procedure described in Boily
et al.(2000), adapted from Hernquist&rsquo;s (1993) BUILDGAL  procedure. This program
is merely a NEMO wrapper to Version 1 of the fortran program <i>magalie.exe</i>.
It assembles all the correct parameters, runs the fortran namesake program
in a temporary rundirectory and converts the ascii output to a NEMO <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>
.
<p>
The galaxy is scaled based on the disk with mass=1 and  (exponential) scalelength=1.
In addition, a selection of the solar radius (2.43 scale lenghts is the
current default) will fix the rotation speed at the IAU value of 220 km/s,
though the velocity is also normalized to this value. <p>
This NEMO frontend
only controls a number of parameters, to match the functionality of <a href='mkkd95.1.html'><i>mkkd95(1NEMO)</i></a>
,
however there are quite a few more options in the original program, e.g..
adding a gas disk, satellited, individual smoothing lengths. These will
be implemented in a future release. It is easy for the user to manually
create such models those, by setting <b>cleanup=f</b> and editing the input parameter
file <i>magalie.in</i> in the temporary run directory, and running the <i>make-it</i> shell
script. Careful not to change the number of particles, or modify the corresponding
keyword in this script. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters are recognized
in any order if the keyword is also given: 
<dl>

<dt><b>out=</b> </dt>
<dd>output snapshot (a rundirectory
$out.tmpdir is also created).  No default. </dd>

<dt><b>ndisk=</b> </dt>
<dd>Number of particles in disk.
Set them to 0 to leave out this component. Notice these are the first set
of particles in the final snapshot.  [20000]  <br>
 </dd>

<dt><b>nbulge=</b> </dt>
<dd>Number of particles in bulge [5000]   </dd>

<dt><b>nhalo=</b> </dt>
<dd>Number of particles
in halo.  Notice these are the last set of particles in the final snapshot.
[40000]   </dd>

<dt><b>hdisk=</b> </dt>
<dd>Scaleheight of the disk (in units of scale </dd>

<dt><b>rsolar=</b> </dt>
<dd>Solaris
radius for calibration of Vsolar=220 [2.43] </dd>

<dt><b>Qtoomre=</b> </dt>
<dd>Toomre stability parameter
[1.5] </dd>

<dt><b>cdisk=</b> </dt>
<dd>Cutoff radius of disk [10] </dd>

<dt><b>zdisk=</b> </dt>
<dd>Height cutoff of disk [2]
</dd>

<dt><b>mbulge=</b> </dt>
<dd>Mass of bulge (in units of disk mass) </dd>

<dt><b>rbulge=</b> </dt>
<dd>Scalelength of bulge
[2] </dd>

<dt><b>cbulge=</b> </dt>
<dd>Cutoff radius of bulge [10] </dd>

<dt><b>zbulge=</b> </dt>
<dd>Cutoff height of bulge
[1] </dd>

<dt><b>qbulge=</b> </dt>
<dd>Axis ratio C/A of bulge [1] </dd>

<dt><b>fbulge=</b> </dt>
<dd>Streaming fraction of bulge
[0] </dd>

<dt><b>mhalo=</b> </dt>
<dd>Mass of halo (in units of disk mass) </dd>

<dt><b>rhalo=</b> </dt>
<dd>Scalelength of halo
[2] </dd>

<dt><b>chalo=</b> </dt>
<dd>Cutoff radius of halo [20] </dd>

<dt><b>c2halo=</b> </dt>
<dd>Cutoff radius of halo for
ISO (for LH </dd>

<dt><b>qhalo=</b> </dt>
<dd>Axis ratio C/A of halo [1] </dd>

<dt><b>type=</b> </dt>
<dd>Type of halo: LH or
ISO [LH] </dd>

<dt><b>seed=</b> </dt>
<dd>Random seed [0] </dd>

<dt><b>cleanup=</b> </dt>
<dd>cleanup run directory after use
(not used yet) </dd>

<dt><b>seed=</b> </dt>
<dd>Random seed. [Default: 0] </dd>

<dt><b>cleanup=t|f</b> </dt>
<dd>Cleanup runtime
working directory? [Default: t] </dd>

<dt><b>header=|4|8</b> </dt>
<dd>Size of the header uses in unformatted
fortran data. This used to be 4, but modern compilers (e.g. gfortran) may
very well use 8. By default it is not specified, and the value determined
to be the correct one during install (UNFIO_HDR_SIZE) is used. This keyword
can be used to force another value, for example if you have compiled magalie
with another  than the default compiler. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Inputfile</a></h2>
<b>magalie</b> calls the actual
<b>magalie.exe</b> by reading an input file of parameters. Here is an annotated
example of such a file (the comments can be left in when read) <br>
<pre>543216789       ! Random generator seed (ran1)
n               ! Output particles smooth length?
20000           ! Number of disc particles (M_d=1)
3.              ! Mass of disk (reset = 1 for default)
1.              ! Disc scalelength
2.43            ! Solar radius
1.5             ! Toomre Q parameter @ Sun ( was 3/2 -&gt; close to 1)
2.              ! z-max (= 10.*scale height)
10.             ! Max disc part radius
n               ! Gas in disc?
0               ! Number of disc gas particles
0.              ! mass of disc gas particles
0.              ! temperature of gas in disc
0.              ! scale height of gas in disc z0gas
0.              ! max z value of gas in disc (= 10 z0gas)
0.              ! max cylindrical radius of gas in disc
0.              ! min    "          "    "   "   "  "
n               ! include gas self-gravity (in disc)? [y/n]
n               ! Add bulge?
0.75            ! Mass of bulge
2.              ! Bulge scale length (hernquist &rsquo;a&rsquo;)
y               ! bulge self-gravity?
5000            ! N part in  bulge
10.             ! max radius for bulge particles
n               ! Non-spherical bulge?
1.              ! Z-max value for bulge particles
5               ! Number of Simpson integration steps
n               ! Include rotation ? (flip z-momentum component)
n               ! Include a halo?
y               ! halo self-gravity ?
20.             ! max radius of halo
40000           ! Halo particle number
0.01            ! halo particle softening length
LH              ! Halo type (LH or IS)
10.             ! Halo mass
2.              ! Halo core radius  (need two lengths if IS halo)
2.              ! Second length : dummy (LH) or truncation radius (IS)
n               ! Non-spherical halo?
n               ! Galactic satellite
1.              ! Satellite scale length (LH model only)
5.,0.,0.        ! xyz position of the satellite in Galaxy frame of reference
5.              ! maximum satellite size (compare with sat length scale)
y               ! Include satellite self-gravity ? (yes = live model only)
0               ! number of satellite particles
0.1             ! smoothing length for satelllite particles
b               ! data format for output (a)scii or (b)inary
nbody           ! formatted as LH, nbody
roundbulge      ! name of dataset (note - truncated at cr character)
</pre>
<h2><a name='sect5' href='#toc5'>Performance</a></h2>
The bulk of the CPU is in creating the disk particles, the bulge
and halo are  a much smaller fraction of the cpu. On a 3 GHz Pentium-4 the
cpu cost is about (Ndisk/630) secs for the gnu compiler. On a 1.6 P4 laptop
this was about (Ndisk/420) secs. 
<h2><a name='sect6' href='#toc6'>Bugs</a></h2>
There have been reported cases where
magalie just seems to continue to compute in an infinite loop. <p>
Does not
work on the linux/intel compiler yet. 
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<br>
<pre>mkkd95(1NEMO), tabtos(1NEMO), unfio(1NEMO)
https://ui.adsabs.harvard.edu/abs/2001NewA....6...27B/  (Boily et al. 2001; magalie)
https://ui.adsabs.harvard.edu/abs/1993ApJS...86..389H/abstract (Hernquist 1993)
https://ui.adsabs.harvard.edu/abs/2015MNRAS.452.2367Y/abstract (Yurin &amp; Springel
2015; GalIC)
Files
NEMO/src/nbody/init/magalie.c
NEMO/usr/boily/Magalie/
</pre>
<h2><a name='sect9' href='#toc9'>Author</a></h2>
<br>
<pre>Christian Boily, Pavel Kroupa, Jorge Penarrubia-Garrido (fortran code)
Peter Teuben (NEMO interface) -
</pre>
<h2><a name='sect10' href='#toc10'>Update History</a></h2>
<br>
<pre>dark ages<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 See their NewA paper<tt> </tt>&nbsp;<tt> </tt>&nbsp;Boily et al.
21-Mar-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1 Created at the Nbody school<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
24-mar-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2 added most primary keywords, at 37,000ft<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
25-jan-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2a fixed bulge mass encoding problem
24-mar-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2b fixed bulge size encoding problem,updated docs<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
19-jul-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.3 add header= for 64 bit compilers<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
5-aug-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;merged CVS doc versions<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
feb-2020<tt> </tt>&nbsp;<tt> </tt>&nbsp;added refs<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre>
<p> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Inputfile</a></li>
<li><a name='toc5' href='#sect5'>Performance</a></li>
<li><a name='toc6' href='#sect6'>Bugs</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Files</a></li>
<li><a name='toc9' href='#sect9'>Author</a></li>
<li><a name='toc10' href='#sect10'>Update History</a></li>
</ul>
</body>
</html>
