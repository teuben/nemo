<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>SNAPIDL(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
snapidl - tabulate a snapshot for IDL in binary mode 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>snapidl<b>
[parameter=value] 
<h2><a name='sect2' href='#toc2'></b></b>Description</a></h2>
<b>snapidl</b> outputs selected particle variables
in binary format (e.g. for IDL or fortran unformatted read&rsquo;s) The output format
is a local host binary  format(see <a href='snapprint.1.html'><i>snapprint(1NEMO)</i></a>
 for an ascii table
version), and should only be used on that local host to prevent endianism
and floating point format conversion problems. See examples below on how
to read the binary data into IDL and fortran. <p>
Note that this program write
all variables as float (single precision), including integers. <p>
For an alternative
approach, use <a href='snappat.1.html'><i>snappat(1NEMO)</i></a>
 to create a Particle-Attribute-Time datacube,
convert this to FITS using <a href='ccdfits.1.html'><i>ccdfits(1NEMO)</i></a>
 and read this into IDL. For simulations
with a large number of snapshots this can be significantly faster. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The
following parameters are recognized in any order if the keyword is also
given: 
<dl>

<dt><b>in=</b><i>file</i> </dt>
<dd>Input file (snapshot). No default. </dd>

<dt><b>options=</b> </dt>
<dd>Things to output
[x,y,z,vx,vy,vz]     </dd>

<dt><b>times=</b><i>t1,t2,...</i> </dt>
<dd>Times to select snapshot [all]    </dd>

<dt><b>out=</b><i>file</i>
</dt>
<dd>Output file - normally a pipe for IDL. [Default: -] </dd>

<dt><b>fortran=t|f</b> </dt>
<dd>Attempt to
format the binary data suitable for a series of FORTRAN unformatted READ&rsquo;s.
 [Default: <b>f</b>] </dd>

<dt><b>header=0|4|8|</b> </dt>
<dd>Header size in bytes that unformatted files use.
Default: 4 </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Format</a></h2>
The output format is binary encoded, and only meant to
be transported to other machines (e.g. is uses the local host format). <br>
<pre>Nb,T1,Nv,v1,v2,v3,....v_Nv,Nb,T2,Nv,v1,v2,v3,....v_Nv,....
</pre>where <i>Nb</i> is the number of bodies and <i>Nv</i> the number of vectors of length
<i>Nb</i> each. 
<p> 
<h2><a name='sect5' href='#toc5'>Examples</a></h2>
Here is an example to dump all positions of the particles
at time 1.0 to a pipe, which is then read by IDL into arrays <i>x,y,z</i>. <br>
<pre>mkplummer snap000 100
idl
IDL&gt; SPAWN, [&rsquo;snapidl&rsquo;,&rsquo;snap000&rsquo;,&rsquo;x,y,z&rsquo;], UNIT=LUN, /NOSHELL
IDL&gt; nbody=0L
IDL&gt; nvec=0L 
IDL&gt; READU,LUN,nbody,nvec,tsnap
IDL&gt; PRINT,"Found a snapshot with ",nbody," particles at time", tsnap
IDL&gt; x=FLTARR(nbody)
IDL&gt; y=FLTARR(nbody)
IDL&gt; z=FLTARR(nbody)
IDL&gt; READU,LUN,x,y,z
IDL&gt; FREE_LUN, LUN
</pre>
<p> And here is an example writing the data in a format that can be read with
a fortran program: <br>
<pre>mkplummer snap111 100 
snapidl snap111 x,y,z out=snap111.dat fortran=t
idl
IDL&gt; OPENR,LUN,&rsquo;snap111.dat&rsquo;,/F77_UNFORMATTED,/GET_LUN
IDL&gt; nbody=0L
IDL&gt; nvec=0L 
IDL&gt; READU,LUN,nbody,nvec,tsnap
IDL&gt; PRINT,"Found a snapshot with ",nbody," particles at time", tsnap
IDL&gt; x=FLTARR(nbody)
IDL&gt; y=FLTARR(nbody)
IDL&gt; z=FLTARR(nbody)
IDL&gt; READU,LUN,x
IDL&gt; READU,LUN,y
IDL&gt; READU,LUN,z
IDL&gt; FREE_LUN, LUN
</pre>In fortran, without any error control and array overflow checking, <i>snap111.dat</i>
can also be read as follows: <br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;program snapread
<tt> </tt>&nbsp;<tt> </tt>&nbsp;real x(1000),y(1000),z(1000),tsnap
<tt> </tt>&nbsp;<tt> </tt>&nbsp;integer nbody,nvec,i
<tt> </tt>&nbsp;<tt> </tt>&nbsp;open(1,file=&rsquo;snap111.dat&rsquo;,form=&rsquo;unformatted&rsquo;)
<tt> </tt>&nbsp;<tt> </tt>&nbsp;read(1) nbody,nvec,tsnap
<tt> </tt>&nbsp;<tt> </tt>&nbsp;read(1) (x(i),i=1,nbody)
<tt> </tt>&nbsp;<tt> </tt>&nbsp;read(1) (y(i),i=1,nbody)
<tt> </tt>&nbsp;<tt> </tt>&nbsp;read(1) (z(i),i=1,nbody)
<tt> </tt>&nbsp;<tt> </tt>&nbsp;end
</pre>
<h2><a name='sect6' href='#toc6'>Caveat</a></h2>
Some versions of IDL (e.g. 6.3) do not properly read/write 8 byte headers
where needed on 64 bit systems. See also <a href='unfio.1.html'><i>unfio(1NEMO)</i></a>
 for a description.
<p>
Careful cutting and pasting examples from man pages, hidden characters
can  slip unseen into your session. 
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='snapprint.1.html'>snapprint(1NEMO)</a>
, <a href='snappat.1.html'>snappat(1NEMO)</a>
,
<a href='unfio.1.html'>unfio(1NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
,  
<h2><a name='sect8' href='#toc8'>Files</a></h2>
src/nbody/io<tt> </tt>&nbsp;<tt> </tt>&nbsp;- snapidl.c 
<h2><a name='sect9' href='#toc9'>Author</a></h2>
Peter
Teuben 
<h2><a name='sect10' href='#toc10'>Update History</a></h2>
<br>
<pre>26-Nov-02<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
5-aug-09<tt> </tt>&nbsp;<tt> </tt>&nbsp;it seems IDL now needs /GET_LUN in the 2nd example
6-aug-09<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.2 added header=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Format</a></li>
<li><a name='toc5' href='#sect5'>Examples</a></li>
<li><a name='toc6' href='#sect6'>Caveat</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Files</a></li>
<li><a name='toc9' href='#sect9'>Author</a></li>
<li><a name='toc10' href='#sect10'>Update History</a></li>
</ul>
</body>
</html>
