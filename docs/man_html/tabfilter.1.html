<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>TABFILTER(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
tabfilter - flux derived from convolving a filter with a spectrum 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>tabfilter</b>
[parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>tabfilter</b> convolves a filter (in the form
of a simple table of the instrumental spectral response as function of
wavelength) with a model or observed spectrum, and computes the resulting
flux. <p>
Example filters are in $NEMODAT/filter, and for good measure  should
contain a 0 response at the lower and upper end of the filter. <p>
Currently
the program just integrates int{<a href='S.l.html'>S(l)</a>
*<a href='F.l.html'>F(l)</a>
*dl} and ignores any units, though
filters <a href='F.l.html'>F(l)</a>
 are typically between 0 and 1 (but not necessarely peaked
at 1), and wavelength l in Angstrom. The spectrum <a href='S.l.html'>S(l)</a>
 has arbitrary units.
<p>
Using <b>xscale=</b> and <b>yscale=</b> the input spectrum can be scaled to match that
of the filter.  <p>
Using <b>out=</b> the filtered spectrum can be output to a table,
the resulting flux is still computed but only output in debug level 0. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The
following parameters are recognized in any order if the keyword is also
given: 
<dl>

<dt><b>filter=</b> </dt>
<dd>Filter mnemonic (e.g. U,B,V,R,I,u,g,r,i,z,H,J,K) or full filter
file name.  See $NEMODAT/filter for current filters. No Default. </dd>

<dt><b>spectrum=</b>
</dt>
<dd>Input spectrum table file (column 1 must contain the wavelength (in  Angstrom),
column 2 the flux. Default: not used. </dd>

<dt><b>xcol=</b> </dt>
<dd>Column for wavelength in the
spectrum [Default: 1] </dd>

<dt><b>ycol=</b> </dt>
<dd>Column for flux in the spectrum [Default: 2]
</dd>

<dt><b>xscale=</b> </dt>
<dd>Scale factor applied to input spectrum wavelength in order to match
that of the filter. [Default 1] </dd>

<dt><b>yscale=</b> </dt>
<dd>Scale factor applied to input spectrum
flux for your preferred  flux scaling. [Default: 1] </dd>

<dt><b>xmin=</b> </dt>
<dd>(Wavelength) value
below which no data are printed or used.  This is useful if your input spectrum
has a broad range you are not interested in, but can be dangerous if this
cuts into your filter. Default: not used </dd>

<dt><b>xmax=</b> </dt>
<dd>(Wavelength) value above
which no data are printed or used.  Default: not used </dd>

<dt><b>step=</b> </dt>
<dd>Integration
step in Angstrom. If too large compared to the width of the filter, the
program will stubbornly decrease it to 1/100 of the filterwidth. Default:
1. </dd>

<dt><b>tbb=</b> </dt>
<dd>Black Body temperature. This is needed if no spectrum is given. Default:
not used. </dd>

<dt><b>normalize=t|f</b> </dt>
<dd>Normalize the flux by the integral over the filter
shape? [no]. </dd>

<dt><b>out=</b> </dt>
<dd>If specified, the integral (flux calculation) isn&rsquo;t performed,
the output contains a table of the filtered spectrum. Although the flux
is still output, it is now redirected to <i>stderr</i> instead of <i>stdout</i>. Default:
none. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>
What is the SDSS "g-r" color for a T=5000 star? <br>
<pre>   % tabfilter g tbb=5000
   5000 1.46959e+10 -25.418
   % tabfilter r tbb=5000
   5000 2.15063e+10 -25.8314
   % nemoinp -25.41--25.8314 format=%.2f
   0.42
</pre>here the output of tabfilter are 3 numbers: the input Black Body temperature,
 the linear flux and the "astronomical" (-2.5log(Flux)) magnitude. <p>
Here&rsquo;s a
snippet of csh code to tabulate the colors for a range of BB temperatures:
<br>
<pre>  % foreach t (&lsquo;nemoinp 2000:9000:1000&lsquo;)
  ?   set g=(&lsquo;tabfilter g tbb=$t&lsquo;)
  ?   set r=(&lsquo;tabfilter r tbb=$t&lsquo;)
  ?   echo $t &lsquo;nemoinp $g[3]-$r[3]&lsquo;
  ? end
2000 2.5357
3000 1.3928
4000 0.7875
5000 0.4134
6000 0.1615
7000 -0.018
8000 -0.151
9000 -0.2529
</pre><p>
Here&rsquo;s a neat way to plot a Black Body spectrum. We are using a flat filter
spectrum (the alias filter=1 is available for this, which is defined as
1 from 1 Angstrom to 1e9 Angstrom) and redefining xmin and xmax with out=
to produce a spectrum. Since the output is an ASCII file, it can be piped
into for example  <a href='tabplot.1.html'><i>tabplot(1NEMO)</i></a>
 for visual inspection: <br>
<pre>  % tabfilter 1 tbb=1000 xmin=10 xmax=80000 step=10 out=- |\
<tt> </tt>&nbsp;<tt> </tt>&nbsp;tabplot - xmin=0 xmax=80000
</pre>The same could be done to a spectrum and re-interpolate it (simular to 
<a href='tabspline.1.html'><i>tabspline(1NEMO)</i></a>
) <br>
<pre>  % tabfilter 1 data.tab xmin=4000 xmax=5000 step=1 out=- | tabplot - 
</pre>
<h2><a name='sect5' href='#toc5'>Caveats</a></h2>
Absolute units are not taken into account, though with xscale=,yscale=
some flexibility is possible. <p>
The integration is a simple eulerian one,
though 1A should be sufficient  for most application. In case of doubt,
check with a smaller or bigger value. 
<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='tabmath.1.html'>tabmath(1NEMO)</a>
, <a href='tabspline.1.html'>tabspline(1NEMO)</a>
,
<a href='tabint.1.html'>tabint(1NEMO)</a>
, <a href='filter.5.html'>filter(5NEMO)</a>
 <p>
Filters: <a href='http://voservices.net/filter/'>http://voservices.net/filter/</a>
 <p>
<a href='http://arxiv.org/abs/1407.6095'>http://arxiv.org/abs/1407.6095</a>

: Synthetic Stellar Photometry. 
<h2><a name='sect7' href='#toc7'>Files</a></h2>
</pre><br>
<pre>NEMODAT/filter/ <tt> </tt>&nbsp;<tt> </tt>&nbsp;directory with filters
NEMODAT/filter/Fnames<tt> </tt>&nbsp;<tt> </tt>&nbsp;translation file between short and full names
NEMODAT/vega.sed<tt> </tt>&nbsp;<tt> </tt>&nbsp;Vega&rsquo;s SED useful for absolute color calibration
</pre>
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Peter Teuben 
<h2><a name='sect9' href='#toc9'>Update History</a></h2>
<br>
<pre>11-May-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.1 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
16-may-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.6 added xmin/xmax<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
25-may-06<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.8 added out=, and Vega info<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Caveats</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
<li><a name='toc7' href='#sect7'>Files</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Update History</a></li>
</ul>
</body>
</html>
