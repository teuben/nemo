<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>STROPEN(3NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
stropen, strclose, strdelete, strname, strseek - file-stream enhanced
utilities 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<br>
<pre>#include &lt;stdinc.h&gt;stream stropen(string filename, string mode)void strclose(stream
str)void strdelete(stream str, bool scratch)string strname(stream str)bool
strseek(stream str)
Descriptionstropen() opens a file by filename and associates
a stream with it, much like fopen(3) does. It has a few additional features:
(1) existing files cannot be opened for writing unless  mode=w! (mode=a!
is also permitted), 
(2) names of form - map to stdin/stdout, depending on
mode, 
(3) names of the form -num for some small num set up a stream to read/write
file descriptor num. 
(4) With mode=s a file is opened in write-scratch mode.
Whenever strclose is called, the file is also deleted. When the filename
does not start with a "/", a unique temporary filename is automatically
created. 
(5) Output file with the name "." (dot) are equivalent to a bit
sink (/dev/null). 
(6) Input files that look like a URL (http://.., ftp://..
etc) are opened with popen(3) and data directly passed back to the client

Note that fopen(3) itself officially recognizes the following  modes:r,
w, a, r+, w+, a+. 
strclose() closes a stream, which is the recommended practice
 within NEMO (formally, an exit from the program using exit(3) also closes
all open files properly). Each opened stream uses additional space in internal
tables that are free&rsquo;d when strclose is called.  
strdelete() deletes the
file associated with the stream str  previously opened with stropen.  If
scratch is set TRUE it will always delete the file, if set to  FALSE the
file must have been opened in scratch mode to be deleted. This routine also
clears the internal filetable, that was used  when stropen was called. 
strname()
returns the name of the file that had been opened by stropen. Note it returns
a pointer to an internal static table, and should not be overwritten. See
also scopy(3NEMO). 
strseek returns seekability of a stream. This is primarely
useful for filestruct, which might need to know if stream i/o can be optimized
with deferred input. 
CaveatsFiles that are given as URLs can easily cause
confusion, because a malformed or mistyped URL can give either no output
or whatever the server  decides to return on non-existing names. Since this
is often a webpage with an error message, perfectly legal output,  the
client on the NEMO side will get no error message. 
       % tsf http://bima.astro.umd.edu/nemo/test/p10-a
       ### Fatal error [tsf]: gethdr: bad magic: 20474
</pre>
<h2><a name='sect4' href='#toc4'>See Also</a></h2>
<a href='fopen.3.html'>fopen(3)</a>
, <a href='fclose.3.html'>fclose(3)</a>
, <a href='filestruct.3.html'>filestruct(3NEMO)</a>
, <a href='strlib.3.html'>strlib(3NEMO)</a>
, <a href='getparam.3.html'>getparam(3NEMO)</a>
,
<a href='mstropen.3.html'>mstropen(3NEMO)</a>
 
<h2><a name='sect5' href='#toc5'>Author</a></h2>
Joshua Barnes, Peter Teuben 
<h2><a name='sect6' href='#toc6'>Files</a></h2>
<br>
<pre>~/src/kernel/io  <tt> </tt>&nbsp;<tt> </tt>&nbsp;stropen.c, filesecret.c
</pre>
<h2><a name='sect7' href='#toc7'>Update History</a></h2>
<br>
<pre>23-jul-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;created            <tt> </tt>&nbsp;<tt> </tt>&nbsp;Josh
5-oct-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;added strdelete and strname; man page written<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
1-mar-91<tt> </tt>&nbsp;<tt> </tt>&nbsp;fixed bug in stropen - improved doc<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
19-may-92<tt> </tt>&nbsp;<tt> </tt>&nbsp;added strseek - fixed verbosity in strdelete<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
5-nov-93<tt> </tt>&nbsp;<tt> </tt>&nbsp;added special "." filename mode for /dev/null<tt> </tt>&nbsp;<tt> </tt>&nbsp;pjt
22-mar-00<tt> </tt>&nbsp;<tt> </tt>&nbsp;scratch files cannot exist, otherwise error<tt> </tt>&nbsp;<tt> </tt>&nbsp;pjt
9-dec-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;add simple ability to grab URL-based files<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Caveats</a></li>
<li><a name='toc4' href='#sect4'>See Also</a></li>
<li><a name='toc5' href='#sect5'>Author</a></li>
<li><a name='toc6' href='#sect6'>Files</a></li>
<li><a name='toc7' href='#sect7'>Update History</a></li>
</ul>
</body>
</html>
