<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>CCDGEN(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
ccdgen - create or add objects to an image 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>ccdgen</b> <b>out=</b><i>image-file</i>
[parameter=value] 
<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>ccdgen</b> creates or <a href='modified.2D.html'>modified (2D)</a>
 images by
 adding simple parameterized two-dimensional objects. For arbitrary expressions
use <a href='ccdmath.1.html'><i>ccdmath(1NEMO)</i></a>
 instead.  <p>
An added feature is that the objects can be
added as if they are in a "galactic" disk with given inclination and position
angle. The default is a "face-on" view (<b>inc=0</b>).  No corrections for brightness
due to inclination are made however. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
 The following parameters
are recognized in order; they may be given in any order if the keyword
is also given. Use --help to confirm this man page is up to date.  
<dl>

<dt><b>in=</b> </dt>
<dd>Input
file (optional) to be added to the output file. Default: none, map is generated.
</dd>

<dt><b>out=</b> </dt>
<dd>Output file, in standard <a href='image.5.html'><i>image(5NEMO)</i></a>
 format. No default.      </dd>

<dt><b>object=</b>
</dt>
<dd>Object type. Valid are flat, exp, gauss, bar, spiral, noise, test, blobs.
See below for an explanation and their parameters. Default: flat </dd>

<dt><b>spar=</b> </dt>
<dd>Parameters
for this object. The first parameter is often the peak  value, and the second
one a scale length. Some object have more complex geometries and require
more parameters. The meaning of the peak value can be modified by setting
<b>totflux=t</b> (see below). The defaults are defined per object, but are typically
1,1... <br>
For certain objects, the multiple objects can be given, and the sequence
of parameters can be repeated. Currently <b>object=blobs</b> has this option for
3D cubes. </dd>

<dt><b>center=</b> </dt>
<dd>Center of object (in 0-based pixel coordinates). The lower
left corner is counted as (0,0) here. Default: mapcenter. </dd>

<dt><b>size=</b> </dt>
<dd>Mapsize. It
is allowed to have a different size in X and Y. </dd>

<dt><b>cell=</b> </dt>
<dd>Cellsize [1]     
*not used yet* </dd>

<dt><b>pa=</b> </dt>
<dd>Position Angle of disk in which the object lives. Counted
positive starting at North through East in the standard astronomical fashion.
Default: 0 </dd>

<dt><b>inc=</b> </dt>
<dd>Inclination Angle of disk in which object lives. 0 is face
on. Default: 0 </dd>

<dt><b>totflux=t|f</b> </dt>
<dd>If set to true, the amplitude (always the first
parameter in <b>spar</b>) is interpreted as the total integrated intensity instead
of the peak value of the object. Default: <b>f</b>. </dd>

<dt><b>factor=</b> </dt>
<dd>The factor by which
an image is multiplied before the object is added. Warning: if the amplitude
(usually the first of the spar= numbers) is 0, this will not apply, and
the output would equal the input. Default: 1 </dd>

<dt><b>crpix=</b> </dt>
<dd>Override/Set crpix (1,1,1)
 </dd>

<dt><b>crval=</b> </dt>
<dd>Override/Set crval (0,0,0)  </dd>

<dt><b>cdelt=</b> </dt>
<dd>Override/Set cdelt (1,1,1) 
</dd>

<dt><b>seed=</b> </dt>
<dd>Random seed [0]     </dd>

<dt><b>headline=</b> </dt>
<dd>Random verbiage added to the image.
Default: none 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Object</a></h2>
The <b>object=</b> keyword allows for the following objects,
and <b>spar=</b> for their parameters <br>
<pre>OBJECT<tt> </tt>&nbsp;<tt> </tt>&nbsp;-<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;SPAR
flat<tt> </tt>&nbsp;<tt> </tt>&nbsp;A<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;A
exp<tt> </tt>&nbsp;<tt> </tt>&nbsp;A.exp(-r/h)<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,h
gauss<tt> </tt>&nbsp;<tt> </tt>&nbsp;A.exp(-r^2/(2h^2))<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,h
bar<tt> </tt>&nbsp;<tt> </tt>&nbsp;A.exp(-r/h)<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,h,e,b   (e=1-minor/major   b=bar position angle w.r.t. disk)
noise<tt> </tt>&nbsp;<tt> </tt>&nbsp;gaussian(m,s)<tt> </tt>&nbsp;<tt> </tt>&nbsp;mean,sigma
spiral<tt> </tt>&nbsp;<tt> </tt>&nbsp;A.exp(-r/h)<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,h,k,p,m,r0,p0
ferrers<tt> </tt>&nbsp;<tt> </tt>&nbsp;A.(1-r^2)^p<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,h,e,b,p (h=size of bar, p=power to 1-r^2)
isothermal<tt> </tt>&nbsp;<tt> </tt>&nbsp;A.(1+r^2)^p<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,h,p
test<tt> </tt>&nbsp;<tt> </tt>&nbsp;x+10y+100z<tt> </tt>&nbsp;<tt> </tt>&nbsp;-
blobs<tt> </tt>&nbsp;<tt> </tt>&nbsp;A,x,y,z,size<tt> </tt>&nbsp;<tt> </tt>&nbsp;they can be repeated for many blobs
maybe to be implemented:
j1x<tt> </tt>&nbsp;<tt> </tt>&nbsp;J1(x)/x
comet<tt> </tt>&nbsp;<tt> </tt>&nbsp;2d proj
jet<tt> </tt>&nbsp;<tt> </tt>&nbsp;jet model w/ power law brightness
shell<tt> </tt>&nbsp;<tt> </tt>&nbsp;2d proj of shell
poisson 
</pre>A few object that are in MIRIAD&rsquo;s <a href='imgen.1MIRIAD.html'><i>imgen(1MIRIAD)</i></a>
 program and not listed
 here directly, can be simulated or replaced by: <br>
<pre>level<tt> </tt>&nbsp;<tt> </tt>&nbsp;same as our flat
cluster<tt> </tt>&nbsp;<tt> </tt>&nbsp;same as isothermal, except we also allow p different from -0.5
noise<tt> </tt>&nbsp;<tt> </tt>&nbsp;notice we have a mean, miriad doesn&rsquo;t, also miriad has a crude low
approximation
point<tt> </tt>&nbsp;<tt> </tt>&nbsp;use exp with a very small scale length h
gaussian<tt> </tt>&nbsp;<tt> </tt>&nbsp;our gauss, but bmin/bmaj via inc
gauss3<tt> </tt>&nbsp;<tt> </tt>&nbsp;no equivalent, ccdgen does not support 3D models yet
disk<tt> </tt>&nbsp;<tt> </tt>&nbsp;use ferrers with p=0
</pre><p>
Most of these objects have a peak or representative intensity value as
the first argument, and a scale length as the second parameter. The next
parameters are sometimes scale free  <p>
Bars have an additional axis ratio
(we mostly use e=1-b/a here) and position angle of the bar w.r.t. the disk
in the disk plane (see <a href='snaprotate.1.html'><i>snaprotate(1NEMO)</i></a>
 for an approach if you know the
angle of the bar in the sky plane). A Ferrers bar also needs to know the
power (usuall an integer) to which 1-r^2 is raised. <p>
Spirals are yet more complex:
A and h are the usual peak and exponential scale-length. k is the wavenumber
(related to the pitch angle as <a href='tan.pitch.html'>tan(pitch)</a>
=1/(2.pi.k.r),  see also <a href='mkspiral.1.html'><i>mkspiral(1NEMO)</i></a>
),
p controls the relative width of the spiral (assumed to be cos^p(m*phi),
 r0 the starting radius of the spiral (defaults to 0), p0 the phase of
the spiral at radius r0, and m the number of spiral arms. In particular,
since the <a href='pow.3.html'><i>pow(3)</i></a>
 function is used internally for non-integer values of <b>p</b>,
the behavior of <b>m</b> for integer and non-integer values of <b>p</b> is different:
for integer values our own internal <a href='powi.3.html'><i>powi(3NEMO)</i></a>
 is used, and correctly
represents. For example, for m=1 and p=1 you&rsquo;ll get a one armed spiral, but
with negative counter-arm. With p=2 it becomes a 2-armed spiral, as they will
get progressively narrower as p remains even and gets higher. For odd values
of p you will again have a positive and negative spiral, and as p gets
larger, the arms get narrower.   By making sure <b>p</b> becomes non-integer, e.g.
p=2.0001, the negative arm becomes 0. 
<p> 
<h2><a name='sect5' href='#toc5'>Examples</a></h2>
Here&rsquo;s how to make a simple
barred galaxy by adding an exponential disk and a (smaller) exponential
bar: <br>
<pre>ccdgen out=- object=exp spar=1,40 pa=60 inc=45 size=256 |\
 ccdgen - bar.ccd object=bar spar=10,6,0.5,70 pa=60 inc=45
</pre>or if you want them to be a bit more astronomical, you&rsquo;ll need to make the
units come out in degrees for the conversion to FITS, viz.: <br>
<pre>ccdgen out=- object=exp spar=1,40/3600 pa=60 inc=45 size=256 cdelt=-1/3600,1/3600
|\
 ccdgen - - object=bar spar=10,6/3600,0.5,70 pa=60 inc=45 |\
 ccdfits - bar.fits radecvel=t
</pre>and the option to fill your cube with some random blobs and noise is a
bit more involved: <br>
<pre>nemoinp 1:100 |\
  tabmath - - &rsquo;ranu(0,1),ranu(10,100),ranu(10,100),ranu(10,100),ranu(0,5)&rsquo;
all &gt; b100.tab
ccdgen "" - blobs @b100.tab size=128,128,128 |\
  ccdgen - - noise 0,0.02 |\
  ccdsmooth - - 5   |\
  ccdsky - -  |\
  ccdfits - junk2.fits radecvel=t ndim=4
</pre>Here is an example of making a new data section (in this case just noise)
by stealing the header from existing <a href='fits.5.html'><i>fits(5NEMO)</i></a>
 file.  In <i>bash</i> notation:
<br>
<pre>  fitshead NGC5194_91112.fits &gt; tmp.fitshead
  nx=$(grep NAXIS1 tmp.fitshead|awk &rsquo;{print $3}&rsquo;)
  ny=$(grep NAXIS2 tmp.fitshead|awk &rsquo;{print $3}&rsquo;)
  nz=$(grep NAXIS3 tmp.fitshead|awk &rsquo;{print $3}&rsquo;)
  ccdgen in= out=- object=noise spar=0,1 size=$nx,$ny,$nz |\
     ccdfits - noise.fits fitshead=NGC5194_91112.fits
  
</pre>
<p> 
<h2><a name='sect6' href='#toc6'>Caveats</a></h2>
Seting the WCS is not working well. There is cell=, there is crpix,cdelt,crval

<p> 
<p> 
<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='ccdmath.1.html'>ccdmath(1NEMO)</a>
, <a href='snaprotate.1.html'>snaprotate(1NEMO)</a>
, <a href='image.5.html'>image(5NEMO)</a>
 
<p> <p>
<a href='https://github.com/GalSim-developers/GalSim'>https://github.com/GalSim-developers/GalSim</a>

<p>
There are also good simulators in starlab  and amuse 
<p> 
<h2><a name='sect8' href='#toc8'>Files</a></h2>
src/image/trans

<p> 
<h2><a name='sect9' href='#toc9'>Author</a></h2>
Peter Teuben 
<p> 
<h2><a name='sect10' href='#toc10'>Update History</a></h2>
<br>
<pre>4-Jan-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.1 Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-jan-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.7 added (many features and) factor=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
8-jan-05<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.8 add #arms parameter to spiral<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
31-jan-12<tt> </tt>&nbsp;<tt> </tt>&nbsp;V0.9 added object=test<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
12-mar-2020<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 added object=blobs<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Object</a></li>
<li><a name='toc5' href='#sect5'>Examples</a></li>
<li><a name='toc6' href='#sect6'>Caveats</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Files</a></li>
<li><a name='toc9' href='#sect9'>Author</a></li>
<li><a name='toc10' href='#sect10'>Update History</a></li>
</ul>
</body>
</html>
