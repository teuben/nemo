<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>CCDFITS(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
ccdfits - convert an image to a fits file  
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<p>
<b>ccdfits in=</b>image
<b>out=</b>fits [parameter=value] 
<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>ccdfits</b> writes a fits file to disk.
The input must be in  <a href='image.5.html'><i>image(5NEMO)</i></a>
 format, the output will be in standard
<a href='fits.5.html'><i>fits(5NEMO)</i></a>
 format on disk. <p>
An experimental version of this program that
uses the standard <a href='cfitsio.3.html'><i>cfitsio(3)</i></a>
 library is known as <a href='ccdfitsio.1.html'><i>ccdfitsio(1NEMO)</i></a>
. <p>
A peculiar
option is the use of the <b>fitshead=</b> keyword. In this mode the header of the
output fits file will be replaced with that of the filename in the  <b>fitshead=</b>
keyword. This is dangerous, it is the responsility of the user to ensure
the dimensions (NAXIS,1,2,3) and BITPIX of the two are the same, or else
an illegal FITS file will be created. The program <a href='scanfits.1.html'><i>scanfits(1NEMO)</i></a>
 is used
behind the scenes to achieve this feat. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
 The following parameters
are recognized in order; they may be given in any order if the keyword
is also given. Use --help to confirm this man page is up to date.  
<dl>

<dt><b>in=<i>image-file</i></b>
</dt>
<dd>input file, in <a href='image.5.html'><i>image(5NEMO)</i></a>
 format [no default]. </dd>

<dt><b>out=<i>fits-file</i></b> </dt>
<dd>output file,
will be in <a href='fits.5.html'><i>fits(5NEMO)</i></a>
 format [no default]. </dd>

<dt><b>bitpix=<i>number</i></b> </dt>
<dd>Bitpix applied
for scaling. Options are 16, 32 or -32.  [default: -32]. </dd>

<dt><b>scale=<i>number</i></b> </dt>
<dd>Scaling
factors for CDELT keyword. If the second or third number is omitted, it
is repeated from the previous number. [default: <b>1,1,1</b>]. </dd>

<dt><b>iscale=<i>bscale,bzero</i></b>
</dt>
<dd>Scaling factors for intensity (should only be used for BITPIX &gt; 0) [default:
<b>1,0</b>]. </dd>

<dt><b>object=<i>name</i></b> </dt>
<dd>Name of your object/image. By default, the Object name
inherited from the original. [default: none]. </dd>

<dt><b>comment=<i>comments</i></b> </dt>
<dd>Comment using
the COMMENT keyword. [default: none] </dd>

<dt><b>cdmatrix=t|f</b> </dt>
<dd>Use CD matrix instead of
CDELT? [t/f]. Default: f. </dd>

<dt><b>blocking=<i>factor</i></b> </dt>
<dd>Blocking factor (multiplicity of
blocksize in terms of 2880 bytes) used when writing the fits file. [default:
<b>1</b>]. </dd>

<dt><b>refmap=</b> </dt>
<dd>Reference map or cube (a fits file) from which the WCS is inherited.
 It has to match the output cube which is created. <i>Deprecated</i>. By default
none is used.  </dd>

<dt><b>crpix=</b> </dt>
<dd>Use these pixels (2 or 3 need to be given, depending
if a map or cube is output) as reference pixel, instead of the one defined
in the reference map. By default not used. </dd>

<dt><b>crval=</b> </dt>
<dd>Use these values (2 or
3 need to be given, depending if a map or cube is output) as value at the
reference pixel,  instead of the one defined in the reference map or defined
by the input. By default not used. </dd>

<dt><b>cdelt=</b> </dt>
<dd>Use these values (2 or 3 need to
be given, depending if a map or cube is output) as pixel increments, instead
of the one defined in the reference map or defined by the input. By default
not used. </dd>

<dt><b>radecvel=t|f</b> </dt>
<dd>If no reference map used, this can be used to enforce
a more reasonable axis descriptor (RA/DEC/VEL) for astronomical data packages
which  cannot handle theory data too well (e.g. miriad, karma etc.). We also
add CUNITn and BUNIT (albeit in JY/PIXEL). See also <a href='ccdsky.1.html'><i>ccdsky(1NEMO)</i></a>
 for a
smart scaling placing the object at a computed distance. [Default: <b>f</b>]. </dd>

<dt><b>dummy=t|f</b>
</dt>
<dd>Write dummy (NAXISn=1) axes too?  If not, axes with length 1 are written
last. Default: t </dd>

<dt><b>nfill=0</b> </dt>
<dd>Number of dummy comment lines to add to a fits
header to test I/O routines. Default: 0 </dd>

<dt><b>ndim=</b> </dt>
<dd>This is a hack. If used, this
will be the value of NAXIS written to the FITS file. Only useful of <b>dummy=f</b>
and your FITS reader still cannot handle  dummy trailing axes. For <b>ndim=4</b>
the axis will be labeled as <i>STOKES</i>, which is useful for packages such as
CASA. Default: not used. </dd>

<dt><b>select=1</b> </dt>
<dd>Select this image (1 being the first) to
grab in an file with multiple Image&rsquo;s. [Default: 1] </dd>

<dt><b>fitshead=</b> </dt>
<dd>If used, the
header of this fitsfile will be used instead of the one from the converted
input image. Default; not used. 
<p> </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>
To convert an image to unsigned
16 bit integers use the following math: <br>
<pre>        a = "(a &lt; 0 ? a+65536 : a)" 
</pre>or using <i>ccdmath</i>: <br>
<pre>        ccdmath in=map1 out=map2 fie="iflt(%1,0,%1+65536,%1)"
</pre><p>
A reference map (<b>refmap=</b>) does not have to be a full FITS cube. If the NEMO
<a href='fitsio.3.html'><i>fitsio(3NEMO)</i></a>
 routines are used, the header will suffice, since the data
is never needed. You can see <a href='scanfits.1.html'><i>scanfits(1NEMO)</i></a>
 for this: <br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;scanfits in=cube.fits out=cube.fitshdr select=header
<tt> </tt>&nbsp;<tt> </tt>&nbsp;ccdfits ... refmap=cube.fitshdr ...
</pre>
<p> 
<h2><a name='sect5' href='#toc5'>Fits Tapes</a></h2>
For historic amusement, but completely irrelevant for the 21st
Century: <p>
In the old days (somewhere before the 90s) there were actually
software systems that could only directly read FITS files from tape, not
from disk. The disk-fits file must be written to tape in &rsquo;raw&rsquo; format with
a block length of 2880 bytes, which can be done with <a href='dd.1.html'><i>dd(1)</i></a>
 : <p>
<br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;% dd if=fits.dat of=/dev/rmt0 obs=2880
</pre><p>
Under VMS the tape has to be mounted with the blocksize: <p>
<br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;$ MOUNT MT:/FOREIGN/BLOCK=2880/RECORD=2880
<tt> </tt>&nbsp;<tt> </tt>&nbsp;$ COPY MT: FITS.DAT
</pre><p>
and the file on disk must be recorded to have a 2880 blocksize: <p>
<br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;$ FIXATR/RFM=FIX:2880 FITS.DAT
</pre><p>
In case FTP is used to transfer files, remember that FTP cannot handle
files with this format (some FTP&rsquo;s at least). So it&rsquo;s best to have them in
regular 512 byte blocks before moving, and at 2880 blocksize when using
programs such as DISKFITS in the VMS version of GIPSY. <p>
You could also try
the following command procedure on VMS (Bob Hanisch, ST ScI): <br>
<pre> $!----------------------------------------------------------------------
 $!   FIXFITS filename
 $!   FIXFITS CONVERTs a file to the desired AIPSFITS disk format
 $!----------------------------------------------------------------------
 $ create/fdl=sys$input: temp.dat
 RECORD
       CARRIAGE_CONTROL        NONE
       SIZE                    2880
       FORMAT                  FIXED
 $!                                      now convert - old fails some
 $! convert/append &rsquo;P1&rsquo; TEMP.DAT
 $!                                      now convert - new method
 $ copy &rsquo;P1&rsquo; TEMP.DAT/overlay
 $ rename temp.dat &rsquo;P1&rsquo;
 $!                                      clean up
 $ purge &rsquo;P1&rsquo;
 $!
</pre>
<p> 
<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='ccdsky.1.html'>ccdsky(1NEMO)</a>
, <a href='ccdfitsio.1.html'>ccdfitsio(1NEMO)</a>
, <a href='scanfits.1.html'>scanfits(1NEMO)</a>
, <a href='snapccd.1.html'>snapccd(1NEMO)</a>
,
<a href='ccdmath.1.html'>ccdmath(1NEMO)</a>
, <a href='iofits.1.html'>iofits(1NEMO)</a>
, <a href='image.5.html'>image(5NEMO)</a>
, <a href='fits.5.html'>fits(5NEMO)</a>
, <a href='dd.1.html'>dd(1)</a>
 
<p> 
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Peter

<p>Teuben 
<p> 
<h2><a name='sect8' href='#toc8'>Files</a></h2>
<br>
<pre>~/src/pjt/image  <tt> </tt>&nbsp;<tt> </tt>&nbsp;ccdfits.c ccdfits.1
</pre>
<p> 
<h2><a name='sect9' href='#toc9'>Update History</a></h2>
<br>
<pre>29-apr-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0: created, calling WERONG fortran subroutines<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
2-jun-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1: new filestruct, renamed wfits to ccdfits   <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
1-oct-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1: new fitsio and keyword comment=, scale now 1<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
11-oct-90<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.2: added blocking= factor                     <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
nov-92     <tt> </tt>&nbsp;<tt> </tt>&nbsp;documented the FITFITS VMS procedure            <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
dec-99     <tt> </tt>&nbsp;<tt> </tt>&nbsp;some more documentation             <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
apr-01<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.0 reference map/pixel to inherit a WCS from  <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-may-02<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.0b properly implemented dummy= <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
4-jan-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.2 docomented the recent changes to crval/cdelt/crpix=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
20-jun-09<tt> </tt>&nbsp;<tt> </tt>&nbsp;V5.4 added select= to grab not the first image  <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
26-may-2016     V5.8 added CUNITn and BUNIT and better parameters for radecvel=true<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
27-dec-2020<tt> </tt>&nbsp;<tt> </tt>&nbsp;V6.3 added fitshead=<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
22-may-2021<tt> </tt>&nbsp;<tt> </tt>&nbsp;V6.3d:  object inherited from Image<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Fits Tapes</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Files</a></li>
<li><a name='toc9' href='#sect9'>Update History</a></li>
</ul>
</body>
</html>
