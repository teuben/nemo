<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>HDFGRID(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
hdfgrid - Regrid a polar HDF4 SDS to cartesian image 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>hdfgrid</b>
[parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>hdfgrid</b> regrids HDF (SDS) files that are assumed
to be in polar (rad-phi) coordinates. This program was initially developed
 for the bar-hydro project (Piner, Stone &amp; Teuben, ApJ - nov 1995) using a
version of <b>cmhog</b>, though it can now also handle rank=3 SDS files for which
the last dimension (in HDF the first) is 1, as long as the first two dimensions
are radius and angle. Another constraint is that the data must fill half
the plane (mirror=t) or a full plane (mirror=f), otherwise interpolation
errors will dominate the gaps in the region of missing data. There are some
 keywords (<b>phi1, scale2, phi3</b>) that allow you to rotate and scale your
data around the positive X-axis into either -pi/2:pi/2 (mirror=t) or -pi:pi
(mirror=f). <p>
<a href='The.2D.html'>The (2D)</a>
 four-point interpolation that is used in regridding
is based on the one in <i>cmhog/movie.src</i>, but includes correct interpolations
for points near the Y axis that need contributions from the phantom "mirror"
points (recall that the files are assumed to contain X&gt;0 information only,
the X&lt;0 plane is assumed from point symmetry around the origin).  <p>
It is also
possible to simply average the polar grid values into cartesian cells,
using the <b>pic=t</b> method, but this will generally result in variable amount
of smoothing and depending on the distribution of points in Rad-Phi can
cause moire patterns. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters are recognized
in any order if the keyword is also given: 
<dl>

<dt><b>in=</b><i>hdf_sds</i> </dt>
<dd>Input file (HDF SD).
No default. </dd>

<dt><b>out=</b><i>image</i> </dt>
<dd>Output file, in <a href='image.5NEMO.html'><i>image(5NEMO)</i></a>
 format. </dd>

<dt><b>select=</b><i>frame_no</i>
</dt>
<dd>Select which SDS from the file (1=first). See also <b>zvar=</b> below. [Default:
<b>1</b>]. </dd>

<dt><b>nx=</b><i>X_pixels</i> </dt>
<dd>Number of pixels in X. [Default: <b>256</b>] </dd>

<dt><b>ny=</b><i>Y_pixels</i> </dt>
<dd>Number
of pixels in Y    [Default: <b>256</b>]. </dd>

<dt><b>xrange=</b><i>xmin:xmax</i> </dt>
<dd>Range in X      [Default:
<b>-16:16</b>]. </dd>

<dt><b>yrange=</b><i>ymin:ymax</i> </dt>
<dd>Range in Y      [Default: <b>-16:16</b>]. </dd>

<dt><b>zvar=</b><i>grid_var</i>
</dt>
<dd>Gridding variable. Normally left alone, unless certain allowed mathematical
expressions on the direct griddable variables (as defined by <b>select=</b>) need
to be overriden. Allowed are <b>vr</b> (select=1), <b>vt</b> (select=2), <b>den</b> (select=3),
<b>vx</b>, <b>vy</b>,  <b>vm</b> and <b>vp</b>. Note that <b>vm</b> and <b>vp</b> are special cases of a linear combination
of <b>vx</b>, <b>vy</b> <i>vm =  (vx-vy)/<a href='sqrt.2.html'>sqrt(2)</i></a>
 and <i>vp = (vx+vy)/<a href='sqrt.2.html'>sqrt(2)</i></a>
, just to get an
idea of the velocity field under a "middle" position angle. Default: not
used, select= is used. </dd>

<dt><b>pic=t|f</b> </dt>
<dd>Use the Particle In Cell method of gridding?
This method is similar, but not as sophisticated as <a href='snapgrid.1NEMO.html'><i>snapgrid(1NEMO)</i></a>
. The
alternative, and also the default method, is 4-point interpolation from
the corner cell in polar coordinates in which the cartesian cell center
lies. [Default: <b>t</b>]. </dd>

<dt><b>mirror=t|f</b> </dt>
<dd>Mirror points? [Default: <b>t</b>]. </dd>

<dt><b>symmetry=odd|even|automatic</b>
</dt>
<dd>Override symmetry properties of the variable to be gridded.  This option
is not used yet. See also <b>mirror=</b> </dd>

<dt><b>it0=</b> </dt>
<dd>Shifts the values in theta by <b>it0</b>
pixels. This is equivalent  by rotating the image counterclockwise by that
many pixels. Useful for double bars and manually rotating the frame of reference
(Maciejewski et al). [Default: <b>0</b>] </dd>

<dt><b>phi1=</b> </dt>
<dd>The first operation is a rotation.
This angle (in radians) will be added to the  angles. Do not ues for serious
work, as it only applies to density fields. Default: 0 </dd>

<dt><b>scale2=</b> </dt>
<dd>The second
operation is a scaling. All angles are multiplies by this number. </dd>

<dt><b>phi3=</b> </dt>
<dd>The
third, and last, operation is a rotation again.  This angle (in radians)
will be added to the angles after the previous two. It was added for convenience,
since in principle <b>phi1</b> and  scale2 can get you anywhere on the plane. The
resulting formulae is: <br>
<pre><tt> </tt>&nbsp;<tt> </tt>&nbsp;phi_out = (phi  + phi1) * scale2  + phi3
</pre>Default: 0 </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Examples</a></h2>
Often used in scripts, here is a snippet from a script
that regrids an HDF file into TIFF for movie recording, but applying a
non-linear scaling to the data.  <br>
<pre>  hdfgrid hdf001 - select=3 nx=256 ny=256 xrange=-8:8 yrange=-8:8 |\
     ccdmath - - "log(%1)" |\
     ccdmath - - "ifeq(%1,0.0,$dmin,%1)" |\
     ccdfits - tmp$$
  fitstiff tmp$$ movie1.$i.tiff datamin=-1 datamax=2 lut=ds
</pre>Several interesting peculiarities are to be noted: (1) ccdmath is called
twice, because of a bug in combining the two; <b>ifeq(%1,0.0,$dmin,log(%1))</b>
could not be used. (2) fitstiff cannot read from a pipe,  hence the extra
annoying disk file <b>tmp$$</b>. (3) Lookup RGB color tables are in  <b>$NEMODAT/lut</b>.

<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='hdfwedge.1NEMO.html'>hdfwedge(1NEMO)</a>
 
<h2><a name='sect6' href='#toc6'>Files</a></h2>
src/image/hdf/cmhog  <tt> </tt>&nbsp;<tt> </tt>&nbsp;hdfgrid.c 
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Peter
Teuben 
<h2><a name='sect8' href='#toc8'>Update History</a></h2>
<br>
<pre>25-May-95<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0 Created for IAU157 movie<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
12-dec-99<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.3 added it0= shifting arrays to fake a rotation, for Witold<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
27-aug-02<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.5 added mirror= to allow for full grid simulations<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
3-dec-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0 increased MAXRANK to handle 2+1 dim input files<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
15-dec-04<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1 added pic=, and documented the new phi1,scale2,phi3 transformations<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Files</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Update History</a></li>
</ul>
</body>
</html>
