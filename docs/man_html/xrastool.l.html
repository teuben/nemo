<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>xrastool(n) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
<i>xrastool</i> - animate rasterfiles in an <i>XView</i> window 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<i>xrastool</i> [generic_options]
[other_options] [filename...] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>xrastool</i> is an animation package
written in XView.  Currently only the 8-bit Sun Rasterfile (RLE or standard)
image format is supported, but many other formats can be converted to 8-bit
rasterfiles using the <i>PBMplus</i> image utilities or <i>xv</i>.  <i>xrastool</i> provides
the user with an <i>XView</i> panel interface for convenient access to animation,
display, and colormap functions.  There are a number of options to help
maximize the display rate.  On an unloaded Sparc IPX running <i>twm</i> under X11R5,
a display rate of 50 frames/sec can be achieved with 400x400 8-bit images.
 These speeds are obtained by first loading the rasterfiles into client-resident
Ximages then transferring them to server-resident pixmaps.  Consequently,
the maximum number of frames displayable (and hence the duration of the
animation) is limited only by the core memory available to the server. 
<h2><a name='sect3' href='#toc3'>Layout</a></h2>
<i>xrastool</i>
consists of two panels, a canvas frame for displaying images, and a pop-up
info window.  When invoked without any options or filenames specified, <i>xrastool</i>
displays the Main Panel in its default state.  If any images were specified
and at least one was loaded successfully, the first will be displayed in
the Canvas frame, also in the default state.  The cursor is moved automatically
to point to the <b>More...</b> button (see below) on the Main Panel for convenience.
 This also ensures that the colormap is displayed correctly for the first
image by forcing the window manager to load <i>xrastool</i>&rsquo;s colormap segment.
 The Sub Panel and Info window can be called up from the Main Panel.  The
following two sections describe the control panels in detail. 
<h2><a name='sect4' href='#toc4'>Section 1:
The Main Panel</a></h2>
The Main Panel contains all the controls needed to prepare
and run an animation.  Features include image loading facilities, sizing
controls, timer controls, and cycling buttons.  All the controls are described
in detail in what follows.  Note that any equivalent command-line options
are given in parentheses beside the control name (see Section 4). 
<dl>

<dt><b>Image
#</b> (-<i>start</i>)</dt>
<dd>The current image number is shown here and may be modified, either
using the text field or the incremental buttons.  Only numbers in the range
1 to N, where N is the number of images loaded, are accepted as input,
although the value N + 1 may be displayed prior to loading a new image
(see <b>New</b> button). </dd>

<dt><b>New</b></dt>
<dd>Click on this button to clear the image filename field
and set the image number to N + 1 in preparation for a new image.  Any displayed
image will be replaced with the current background. </dd>

<dt><b>Load</b></dt>
<dd>Clicking this button
will cause <i>xrastool</i> to load the image shown in the <b>Image</b> field.  The image
will be assigned the image number shown in the <b>Image #</b> field, so <b>Load</b> can
be used to replace existing images if desired.  Note that if there is insufficient
server memory to store the image, the functions XCreateImage() or XCreatePixmap()
function may abort with an error. </dd>

<dt><b>Logical Functions</b></dt>
<dd>The buttons at the top
right of the main panel are used to change the logical function of the
main Graphics Context (GC).  The logical function is applied to the next
and all subsequent images to be displayed on the Canvas.  Use <b>Refresh</b> to
apply the function to the current image.  Choices are: <blockquote></dd>

<dt><b>+</b> (-<i>logical</i> SRC)</dt>
<dd>This
applies the GXcopy function to the images so that any existing image (destination)
is entirely replaced with each new image (source). This is the default behavior.
</dd>

<dt><b>|</b> (-<i>logical</i> OR)</dt>
<dd>This applies GXor between the source and destination images,
effectively merging them together (color behavior may be surprising). </dd>

<dt><b>&amp;</b> (-<i>logical</i>
AND)</dt>
<dd>Applies GXand between the source and destination. </dd>

<dt><b>x</b> (-<i>logical</i> XOR)</dt>
<dd>Applies
GXxor.  Two invocations of GXxor on the same image returns the original
image. </dd>

<dt><b>e</b> (-<i>logical</i> ERA)</dt>
<dd>Applies GXandInverted. </dd>

<dt><b>-</b> (-<i>logical</i> NEG)</dt>
<dd>Applies GXcopyInverted,
giving the negative of the image. </dd>
</dl>
</blockquote>

<dl>

<dt><b>Image</b></dt>
<dd>The filename of the current image
is displayed in the text field. Typing a new filename and pressing RETURN
or clicking on <b>Load</b> instructs <i>xrastool</i> to replace the current image with
the contents of the specified rasterfile.  A new image can be appended to
the existing set by first clicking on <b>New</b>, then supplying the new filename.
</dd>

<dt><b>W</b> (-<i>w</i> (width))</dt>
<dd>This is the image width field.  Changing this number either
using the text field or the incremental buttons causes the current <b>Sizing</b>
option to change to <b>Fixed</b>.  Any existing image will have its frame adjusted
to accommodate the new size. </dd>

<dt><b>H (-<i>h</i></b> (height))</dt>
<dd>The height of the Canvas frame
can be adjusted with this control, in the same way as the width (<b>W</b>). </dd>

<dt><b>Sizing</b></dt>
<dd>There
are three sizing options that can be used for displaying images. <blockquote></dd>

<dt><b>Auto</b> (-<i>auto</i>)</dt>
<dd>With
this option, images are displayed up to a specified maximum size, by default
640x480.  The maximum size can be changed by first setting <b>W and <b>H, then
clicking on <b>Auto</b></b></b>.  The display frame will shrink to accommodate images with
dimensions smaller than the maximum dimensions.  For larger images, the
scrollbars can be used to view hidden portions of the image. </dd>

<dt><b>Full</b> (-<i>full</i>)</dt>
<dd>With
this option, the entire image is displayed as long as it can be accommodated
on the default screen.  The <b>W</b> and <b>H</b> fields show the displayed image dimensions.
</dd>

<dt><b>Fixed</b> (-<i>fixed</i>)</dt>
<dd>This option fixes the image size to the current values displayed
in the <b>W</b> and <b>H</b> fields.  Fixed canvases are the fastest to draw, so this
is the preferred option when maximizing display rates.  Hidden portions
of images can still be viewed with the scrollbars.  Images that are smaller
than the fixed size are padded with the current background (see the <b>Backdrops</b>
item in the Sub Panel) and may be centered in the frame by choosing <b>Centering</b>
from the Sub Panel. </dd>
</dl>
</blockquote>

<dl>

<dt><b>Set</b></dt>
<dd>This button is used to set the <b>W</b> and <b>H</b> fields to
the currently displayed size.  This means the frame size can be adjusted
by first using the mouse (e.g. dragging the resize corners if the window
manager is olwm) and then clicking on <b>Set</b>.  This button also causes <b>Fixed</b>
to be selected automatically. </dd>

<dt><b>Timer Scale</b></dt>
<dd>The MINIMUM delay between displaying
one frame and the next during animation is set by the <b>Timer Scale</b> and <b>Timer
Slider</b>.  The former is a coarse adjustment and the latter a fine adjustment.
 It is possible to select delay ranges between 1 microsecond and 999 seconds
(about 15 min), though 20 milliseconds (i.e. 50 frames/sec) is about the
best achievable on a Sparc IPX.  The practical lower limit is set by hardware
CPU and I/O rating.  Note that at the fastest speeds, the <i>xrastool</i> controls
may become very sluggish -- be patient! Ideally, all display options should
be set PRIOR to animating at top speed. <blockquote></dd>

<dt><b>us</b> (-<i>timerscale</i> us)</dt>
<dd>This control selects
the microseconds timer scale. </dd>

<dt><b>ms</b> (-<i>timerscale</i> ms)</dt>
<dd>Use this for the milliseconds
timer scale, which is the practical range for animations. </dd>

<dt><b>sec</b> (-<i>timerscale</i>
sec)</dt>
<dd>The seconds scale can be used for slideshows. </dd>
</dl>
</blockquote>

<dl>

<dt><b>Timer Slider</b> (-<i>timervalue</i>
(timer))</dt>
<dd>This slider is used for fine adjustments of the delay timer for
animations.  The range is 1 to 999 in the units selected on the <b>Timer Scale</b>.
 The value can be set using the text field or by dragging the slider control.
 Unit increments or decrements can be performed by clicking either side
of the control. </dd>

<dt>Fast (-<i>fast</i>)</dt>
<dd>Fast mode can be selected by pressing this button.
 This sets <b>Fixed</b> sizing, <b>us</b> timer scale, unit timer value, and many of
the options on the Sub Panel.  In this mode, <i>xrastool</i> will display frames
at the fastest possible rate.  Any default fast setting can be overridden
by adjusting the appropriate control in the usual way. </dd>

<dt>Direction (-<i>fwd</i> -<i>rev</i>)</dt>
<dd>Cycling
direction can be toggled between forward (FWD) and reverse (REV) using
this control.  <b>Blink</b> mode and the <b>Loop Back</b> and <b>One Way</b> cycling options
will take over direction control when invoked. </dd>

<dt>Step</dt>
<dd>Clicking on this button
will display either the next or previous image depending on the current
Direction.  The step function is called internally when animating. </dd>

<dt><b>Blink</b>
(+|-<i>blink</i>)</dt>
<dd>This button toggles blinking on and off.  The current image and
the next or previous image are blinked at the current display rate. </dd>

<dt><b>Cycle</b>
(+|-<i>cycle</i>)</dt>
<dd>This button displays the stored images in sequence, subject to
the current Direction, <b>Cycling Option</b>, and display rate.  The animation
can be stopped by clicking on <b>Cycle</b> again. </dd>

<dt><b>Cycling Option</b></dt>
<dd>There are three
choices of cycling option: <blockquote></dd>

<dt><b>Loop</b> (-<i>loop</i>)</dt>
<dd>This is the default.  When the end
of the current sequence of images is reached, cycling continues from the
beginning ad infinitum. </dd>

<dt><b>Loop Back</b> (-<i>loopback</i>)</dt>
<dd>When the end of the current
sequence of images is reached, the current <b>Direction</b> is reversed and cycling
continues. </dd>

<dt><b>One Way</b> (-<i>oneway</i>)</dt>
<dd>When the end of the current sequence of images
is reached, cycling is terminated.  Clicking on <b>Cycle</b> again will repeat
the sequence, starting with the first or last image depending on the current
<b>Direction</b>. </dd>
</dl>
</blockquote>

<dl>

<dt><b>Refresh</b></dt>
<dd>Clicking here redisplays the current image.  This can be
used on an image to apply a <b>Logical Function</b> to itself.  It is also useful
if the window manager has corrupted the image display for whatever reason.
</dd>

<dt><b>More...</b> (+|-<i>subpanel</i>)</dt>
<dd>This pops up the Sub Panel. </dd>

<dt><b>Info...</b></dt>
<dd>Use this button for info
relating to the author and copyright. </dd>

<dt><b>Quit</b></dt>
<dd>Clicking here terminates the <i>xrastool</i>
session. </dd>
</dl>

<h2><a name='sect5' href='#toc5'>Section 2: The Sub Panel</a></h2>
When selected using <b>More...</b> on the Main Panel
or by including the -<i>subpanel</i> option on the command line, the Sub Panel
is displayed. The user can perform various fine-tuning operations, including
colormap manipulation, using the Sub Panel. 
<dl>

<dt><b>No Scrolling</b> (+|-<i>scrolling</i>)</dt>
<dd>Selecting
this removes the scrollbars from the image.  Deselecting replaces them. </dd>

<dt><b>No
Resizing</b> (+|-<i>sizing</i>)</dt>
<dd>This option overrides all sizing requests.  The frame
size can still be adjusted manually using the mouse, but a new size cannot
be <b>Set</b> until <b>No Resizing</b> is deselected. </dd>

<dt><b>No Moving</b> (+|-<i>moving</i>)</dt>
<dd>When an image
is to be displayed, <i>xrastool</i> attempts to reposition the frame so that no
part of the image will be off-screen.  Selecting <b>No Moving</b> disables this
behavior. </dd>

<dt><b>No Scaling</b> (+|-<i>scaling</i>)</dt>
<dd>Selecting this option disables all color
<b>Scaling</b> effects. </dd>

<dt><b>No Updates</b> (+|-<i>updates</i>)</dt>
<dd>Normally when cycling, the <b>Image #</b>
and <b>Image</b> fields, as well the size fields and Main Panel footer, are updated
between images. Selecting <b>No Updates</b> disables this behavior when cycling.
Updates when using <b>Step</b> manually cannot be suppressed. </dd>

<dt><b>No Backdrops</b> (+|-<i>backdrops</i>)</dt>
<dd>By
default when cycling, images smaller than a <b>Fixed</b> frame will have undefined
regions painted with the current backdrop.  <b>No Backdrops</b> disables this feature
when cycling. </dd>

<dt><b>Lock Colors</b> (+|-<i>lockcolors</i>)</dt>
<dd>Selecting this locks the current
image colormap so that all subsequently displayed images use the locked
colormap rather than their own.  This feature results in interesting effects
between images with very different colormaps, but significantly improves
the display rate for images with identical or nearly identical colormaps.
 If the command line option -<i>onecmap</i> is used, the <b>Lock Colors</b> control is
made redundant. </dd>

<dt><b>Centering</b> (+|-<i>centering</i>)</dt>
<dd>When selected, and if the <b>Sizing</b> is
<b>Fixed</b>, the current image and all subsequently displayed images will be
centered in the display frame, assuming the frame is larger than the image.
 Any gaps will be filled with the current backdrop. </dd>

<dt><b>Live Cursor</b> (+|-<i>livecursor</i>)</dt>
<dd>With
a live cursor, the mouse can be used to examine the current color <b>Scaling</b>
of an image.  Simply moving the mouse across the image will display the
cursor coordinates with respect to the top left corner of the image, the
value of the pixel at that location, the original color RGB triad to which
the pixel value corresponded (after compression -- see below), and the current
color at that location.  For example: 
<p> <blockquote></dd>

<dt>(122,36) = 53 (96,96,96) --&gt; (255,0,0)</dt>
<dd></dd>
</dl>
</blockquote>

<dl>

<dt>shows
that the pixel at x = 122, y = 36 on the image has a value of 53, </dt>
<dd>which
originally corresponded to the gray-scale value (96,96,96) but has since
been mapped into the color red (255,0,0).  The coordinates and mapping information
are displayed in the footer of the Canvas frame. </dd>

<dt><b>Backdrops</b> (-<i>backdrop</i> (index))</dt>
<dd>Various
bitmap backdrops can be selected for filling gaps left when an image is
smaller than its frame.  The patterns available are displayed on the choice
buttons (blank means white). </dd>

<dt><b>Scaling</b></dt>
<dd>There are six color scaling options
available with <i>xrastool</i>.  The RGB color sliders below the options allow
fine tuning of the scaling. If the code was compiled with LIVE_SLIDERS,
changing one color slider may instantaneously affect the other sliders,
depending on the option. Otherwise the other sliders will be updated after
the slider control of the first is released.  The <b>x</b> and <b>/</b> buttons to the
right of each slider are only used with the <b>Color</b> option.  Each scaling
option has a default slider setting built in which is used when the option
is first selected. <blockquote></dd>

<dt><b>BW</b> (-<i>bw</i>)</dt>
<dd>The slider controls a fractional cutoff: colormap
entries with a total intensity less than (slider/100) * 255 are mapped
to black while the remainder are mapped to white.  The default setting is
50.  Any slider can be used to change the setting. </dd>

<dt><b>Gray</b> (-<i>gray</i>)</dt>
<dd>The sliders
control the fractional contributions of each color in the image to a gray
scale map R_new = (R/100) * R_old + (G/100) * G_old + (B/100) * B_old,
B_new = G_new = R_new.  The sum of the slider values R + G + B is fixed
at 100 unless any two sliders have a zero setting.  The default setting
is R = 30, G = 59, B = 11 which is the map used by <i>ppmtopgm</i> in the <i>PBMplus</i>
package. </dd>

<dt><b>Color</b> (-<i>color</i>)</dt>
<dd>This is the default scaling option.  With this option,
the sliders move independently, controlling the fractional intensity of
their respective colors in the image.  Selecting <b>x</b> or <b>/</b> for each slider
determines whether the color contribution is diminished (former) or enhanced
(latter). </dd>

<dt><b>Cutoff</b> (-<i>cutoff</i>)</dt>
<dd>With this option, the sliders control the pixel
value above which no colors are displayed.  Hence the first color in the
colormap can be displayed by setting a slider to 1.  All colors are displayed
for a setting of 100 (the default).  In a future release, the colormap will
be sorted in order of usage, so that the most or least "important" colors
can be screened out using the <b>Cutoff</b> option. </dd>

<dt><b>Contour</b> (-<i>contour</i>)</dt>
<dd>This option
maps the image colors by intensity into 10 repeating colors, with the total
number of contours controlled by the sliders (from 1 to 100, default 25).
 The contour colors have been selected in order of intensity so that the
brightest colors in the image get the brightest contours. </dd>

<dt><b>Random</b> (-<i>random</i>)</dt>
<dd>This
option simply maps the image colors into random values.  The values can
be changed with the sliders. </dd>
</dl>
</blockquote>

<h2><a name='sect6' href='#toc6'>Section 3: Keyboard Accelerators</a></h2>
Limited keyboard
support is provided on the Canvas window.  Pressing the spacebar while the
cursor is on the Canvas is equivalent to pushing the <b>Step</b> button.  Pressing
RETURN performs a <b>Set operation. Press &rsquo;c&rsquo; to toggle cycling, and &rsquo;q&rsquo; to quit
the program. 
<h2><a name='sect7' href='#toc7'></b>Section 4: Command Line Options</a></h2>
Most of the panel controls have
command-line equivalents so that an <i>xrastool</i> session can be started with
various options already set.  The usage is: 
<dl>

<dt><i>xrastool</i></dt>
<dd>[-fast] [+|-onecmap] [+|-subpanel]
[-start (index)]  [-private|-hist|-pair] [-logical (function)]  [-w (width)] [-h
(height)] [-auto|-full|-fixed]  [-timerscale us|ms|sec] [-timervalue (timer)]  [-fwd|-rev]
[-blink|-cycle] [-loop|-loopback|-oneway]  [+|-scrolling] [+|-resizing] [+|-moving] [+|-scaling]
 [+|-updates] [+|-backdrops] [+|-lockcolors]  [+|-centering] [+|-livecursor] [-backdrop
(index)]  [-bw|-gray|-color|-cutoff|-contour|-random]  [-red (value)] [-green (value)]
[-blue (value)]  [filename...]. 
<p> Most of these options have been described in
the previous sections. Note that the "+" prefix is used to override defaults
or previous values.  For example, -<i>fast</i> invokes many of the Sub Panel options;
if it was desired to retain scrollbars, then +<i>scrolling</i> should be placed
after -<i>fast</i> on the command line.  Options appearing last take precedence
over those appearing first.  The options that have not yet been described
are: </dd>

<dt>-<i>onecmap</i></dt>
<dd>Instructs <i>xrastool</i> to store only the first image&rsquo;s colormap
and automatically <b>Lock Colors</b> to it.  This speeds up the image loading considerably
as it bypasses any colormap compression (see below).  Of course, the colormaps
of all the images loaded should be similar, or, ideally, the same.  The
-<i>fast</i> option automatically invokes -<i>onecmap</i>. </dd>

<dt>-<i>start</i> (index)</dt>
<dd>Instructs <i>xrastool</i>
to display image (index) first.  If image (index) does not exist, the first
image will be displayed. </dd>

<dt>-<i>private</i></dt>
<dd>Instructs <i>xrastool</i> to use a private colormap
for each image so that no attempt at colormap compression is made.  Window
colors, including those of the <i>xrastool</i> control panels, may be severely
affected when viewing these images. </dd>

<dt>-<i>hist</i></dt>
<dd>Constructs a histogram of color
usage for each image (or just the first in the case of -<i>onecmap</i>), and eliminates
those colors that are least used until the image colormap can be melded
with the existing USED portion of the default display colormap.  Currently
<i>xrastool</i> reserves 30 colors for this purpose, so at most 226 colors from
any image can be displayed.  If more colors are added to the window session
after xrastool has started up, they may be "switched out" when viewing
the images.  (NOTE: under twm, the panels and canvas "black out" when they
no longer have the keyboard focus; under olwm, all colors can be seen at
all times). </dd>

<dt>-<i>pair</i></dt>
<dd>Determines which colors are most alike in pair-wise fashion
for each image until 30 colors are eliminated.  This method is much slower
than -<i>hist</i>, but it has the advantage that it does not rely on the same colors
being used in EACH image for a multi-image animation (under -<i>hist</i> it is possible
that a color in one image may not be used in a second -- even though they
have the same colormaps -- and hence be eliminated from the latter and not
the former, resulting in noticeable flickering when animating).  The -<i>pair</i>
option is recommended when using -<i>onecmap</i>. </dd>

<dt>-<i>red</i> (value) -<i>green</i> (value) -<i>blue</i>
(value)</dt>
<dd>These options allow the user to override the initial default color
<b>Scaling</b> settings.  For <b>Gray</b> scale, the images may be "burned out": it is
up to the user to ensure R + G + B = 100 if desired. Changing the color
sliders, however, will restore the constraint.  For <b>Color</b>, the <b>+</b> and <b>-</b> choices
can be selected by supplying positive or negative color values, respectively.
</dd>
</dl>

<h2><a name='sect8' href='#toc8'>Hints</a></h2>
For best results, never exceed the core memory of the server when
loading images.  Swapping will make the animator painfully slow.  Even with
more careful use of memory, <i>xrastool<b> may need to perform one or even two
cycles through the images before the animation becomes smooth.  Once everything
is up to speed, the animator controls should respond better as well.  Also,
to load animations that consist of a large number of files, it is best
to use the Unix wildcard facility (e.g. <i>xrastool</i></b></i> -fast movie*.ras), so be sure
that the image sequence is the same chronologically as alphabetically. 
<h2><a name='sect9' href='#toc9'>History</a></h2>
<i>xrastool<b>
replaces its Sunview predecessor <i>rastool<b>, which was never officially released.
 These tools were designed to aid in visualization of gravitational N-body
problems carried out at the Institute of Astronomy, Cambridge in partial
fulfillment of the author&rsquo;s Ph.D. thesis. 
<h2><a name='sect10' href='#toc10'></b></i></b></i>Copyright</a></h2>
<i>xrastool</i> is Copyright (C)
1993 Derek C. Richardson under the terms and conditions of the GNU General
Public License (included with the source distribution). 
<h2><a name='sect11' href='#toc11'>Author</a></h2>
Derek C. Richardson,
Institute of Astronomy, Cambridge U.K. 
<h2><a name='sect12' href='#toc12'>Bugs</a></h2>
All bug reports, comments, praise,
and criticism should be e-mailed to dcr@mail.ast.cam.ac.uk.  Enjoy! <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Layout</a></li>
<li><a name='toc4' href='#sect4'>Section 1: The Main Panel</a></li>
<li><a name='toc5' href='#sect5'>Section 2: The Sub Panel</a></li>
<li><a name='toc6' href='#sect6'>Section 3: Keyboard Accelerators</a></li>
<li><a name='toc7' href='#sect7'>Section 4: Command Line Options</a></li>
<li><a name='toc8' href='#sect8'>Hints</a></li>
<li><a name='toc9' href='#sect9'>History</a></li>
<li><a name='toc10' href='#sect10'>Copyright</a></li>
<li><a name='toc11' href='#sect11'>Author</a></li>
<li><a name='toc12' href='#sect12'>Bugs</a></li>
</ul>
</body>
</html>
