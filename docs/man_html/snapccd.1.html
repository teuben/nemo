<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>SNAPCCD(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
snapccd - top view integrated velocity moment ccd-like image 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<p>
<b>snapccd
in=</b>snapshot <b>out=</b>image [parameter=value] 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<b>snapccd</b> makes a ccd
frame from an N-body snapshot, by binning the (projected) x-y coordinates
of all stars on a regular  rectangular (square) grid and assigning a mean
integrated &rsquo;surface density&rsquo; (integrated along z-axis, i.e.  the line of sight,
The ccd frame is written to a standard <a href='Image.5NEMO.html'><i>Image(5NEMO)</i></a>
 output file, and can
be accessed by various other programs for smoothing, display etc. <p>
Stellar
astronomers refer to this type of 2-d histogram as a "Hess diagram" when
it is used to plot a color-magnitude diagram of stars.  <p>
<b>snapccd</b> can also
create channel maps, where only signal near a specified velocity is copied.
See the <b>vrange</b> and <b>moment</b> keywords below. One can use either an exact velocity
window, or a gaussian beam in velocity space. <p>
Note that the radial velocity
has the astronomical convention. The observer is located at infinity at
the positive Z-axis: a positive z velocity (<b>vz</b>) means stars are approaching,
i.e. negative radial velocity. <p>
<a href='snaprotate.1NEMO.html'><i>snaprotate(1NEMO)</i></a>
 has to be used first to do
any other than a top-view, probably the more general version <a href='snapgrid.1NEMO.html'><i>snapgrid(1NEMO)</i></a>

should be used. 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following parameters are recognized in any
order if the keyword is also given: 
<dl>

<dt><b>in=<i>in-file</i></b> </dt>
<dd>input file, must be in <a href='SnapShot.5NEMO.html'><i>SnapShot(5NEMO)</i></a>

format [no default]. </dd>

<dt><b>out=<i>out-file</i></b> </dt>
<dd>output file, will be in <a href='Image.5NEMO.html'><i>Image(5NEMO)</i></a>
 format
[no default]. </dd>

<dt><b>origin=<i>x,y</i></b> </dt>
<dd>The origin <i>(x,y)</i> of the center of the ccd [default:
<b>0,0</b>]. </dd>

<dt><b>size=<i>value</i></b> </dt>
<dd>Full size of the CCD frame in &rsquo;physical&rsquo; units. Note that
the picture  is forced to be square [default: <b>4.0</b>]. </dd>

<dt><b>cell=<i>value</i></b> </dt>
<dd>Cell- or pixel
size. Again they will be square. For a 2D matrix this value will be set by
the header of that dataset. [default: <b>0.1</b>]. </dd>

<dt><b>vrange=<i>vmin:vmax | vmean,vsig</i></b> </dt>
<dd>Range
in (astronomical) radial velocity (<b>-vz</b>) to be used only while binning the
data. One can also give a mean and dispersion in velocity space to weigh
the data with. In this case the range in velocity space is somewhat arbitrarely
taken from <i>vmean-3*vsig:vmean+3*vsig</i>. This last procedure is somewhat more
realistic for astronomical applications, unless the package where the data
will be transported to has decent smoothing utilities in velocity space
also.  The default of this keyword is to take all data along the vz axis.
It does not make sense to select data along the z-axis when the <b>moment</b> (see
below) is non-zero. [default: <b>-infinity:infinity</b>]. </dd>

<dt><b>moment=<i>number</i></b> </dt>
<dd>Order of the
velocity moment: must be a non-negative number. Most commonly choosen are:
<b>0</b> (total intensity), <b>1</b>  (velocity weighted intensity) and <b>2</b> (velocity square
weighted intensity), where &rsquo;intensity&rsquo; should really be read as surface density
per square unit length. [default: <b>0</b>]. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Example</a></h2>
The following example makes
(three) CCD frames from an N-body snapshot, smoothes the three moment maps
and combines them into an &rsquo;intensity&rsquo; (<b>int</b>), &rsquo;mean velocity&rsquo; (<b>vel</b>) and &rsquo;velocity
dispersion&rsquo; (<b>sig</b>) map.  <p>
Note that the moment maps must be smoothed <i>before</i>
they can be combined to the proper velocity and dispersion maps. <br>
<pre>   % snapccd in=nbody.dat out=map0 moment=0
   % snapccd in=nbody.dat out=map1 moment=1
   % snapccd in=nbody.dat out=map2 moment=2
   % ccdsmooth in=map0 out=map00 gauss=0.1
   % ccdsmooth in=map1 out=map11 gauss=0.1
   % ccdsmooth in=map2 out=map22 gauss=0.1
   % mv map00 int
   % ccdmath in=int,map11     out=vel  fie=%2/%1
   % ccdmath in=int,vel,map22 out=sig  fie="sqrt(%3/%1-%2*%2)"
   % rm map11 map22

</pre>
<h2><a name='sect5' href='#toc5'>Units</a></h2>
Units are maintained in the same way as in snapshots, they don&rsquo;t have
a specific name, but carry their normal meaning &rsquo;length&rsquo;, &rsquo;velocity&rsquo; and &rsquo;mass&rsquo;.
Since <i>snapccd</i> calculates surface densities, its units are formally &rsquo;mass&rsquo;
per square &rsquo;length&rsquo; times &rsquo;velocity&rsquo; to the power <b>moment</b>.  <p>
When channel maps
are produced (<b>moment=0</b>),  the data are not normalized w.r.t. the convolving
velocity beam. For a rectangular beam (<b>vrange=vmin:vmax</b>) the data should
formally be divided by <b>(vmax-vmin)</b>, for a  gaussian beam (<b>vrange=vmean,vsig</b>)
by <b>vsig*sqrt(2*pi)</b>. Also remember that a gaussian beam has <b>FWHM = 2.355*sigma</b>.

<h2><a name='sect6' href='#toc6'>Future</a></h2>
<a href='snapccd.1NEMO.html'><i>snapccd(1NEMO)</i></a>
&rsquo;s function is rather similar to that of <a href='snapplot.1NEMO.html'><i>snapplot(1NEMO)</i></a>
,
except of plotting the position of the stars, its bins the data. It would
be a nice idea to combine both programs. 
<h2><a name='sect7' href='#toc7'>Bugs</a></h2>
Large snapshots (of order 4k
or more) will have problems when also large images (512 square) or so are
used. Need larger memory machine. <p>
The program gracefully allows the user
to use nonzero <b>moment</b> and a non-infinite <b>vrange</b>. No warnings here. 
<h2><a name='sect8' href='#toc8'>See Also</a></h2>
<a href='snapgrid.1NEMO.html'>snapgrid(1NEMO)</a>
,
<a href='snapmap.1NEMO.html'>snapmap(1NEMO)</a>
, <a href='snaprotate.1NEMO.html'>snaprotate(1NEMO)</a>
, <a href='snapslit.1NEMO.html'>snapslit(1NEMO)</a>
, <a href='snapsmooth.1NEMO.html'>snapsmooth(1NEMO)</a>
,
<a href='snapaxsym.1NEMO.html'>snapaxsym(1NEMO)</a>
,  <a href='tsf.1NEMO.html'>tsf(1NEMO)</a>
, <a href='ccdgrid.1NEMO.html'>ccdgrid(1NEMO)</a>
, <a href='ccdsky.1NEMO.html'>ccdsky(1NEMO)</a>
 
<h2><a name='sect9' href='#toc9'>Author</a></h2>
Peter
Teuben 
<h2><a name='sect10' href='#toc10'>Files</a></h2>
<br>
<pre>src/pjt/image<tt> </tt>&nbsp;<tt> </tt>&nbsp;snapccd.c, snapccd.1
</pre>
<h2><a name='sect11' href='#toc11'>Update History</a></h2>
<br>
<pre>17-Jun-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.0: Created<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
25-jun-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V1.1: grayscale possibility added<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
29-jun-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.0: image-format + three programs: ccd, smooth, look<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
30-Jun-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.1: improved &rsquo;struct&rsquo; filestructure<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
 1-Jul-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.2: added velocity-moments option <tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
 8-jul-87<tt> </tt>&nbsp;<tt> </tt>&nbsp;V2.4: proper defn. of cell position<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
 9-Mar-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V3.0: added data history<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
 1-jun-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.0: new filestruct, renamed programname<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
22-dec-88<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.1: channel maps can be produces, keyword vrange<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
30-jan-89<tt> </tt>&nbsp;<tt> </tt>&nbsp;V4.2: vel is now Zmin, also proper dimensions<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Example</a></li>
<li><a name='toc5' href='#sect5'>Units</a></li>
<li><a name='toc6' href='#sect6'>Future</a></li>
<li><a name='toc7' href='#sect7'>Bugs</a></li>
<li><a name='toc8' href='#sect8'>See Also</a></li>
<li><a name='toc9' href='#sect9'>Author</a></li>
<li><a name='toc10' href='#sect10'>Files</a></li>
<li><a name='toc11' href='#sect11'>Update History</a></li>
</ul>
</body>
</html>
