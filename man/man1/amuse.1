.TH AMUSE 1NEMO "24 May 2025"

.SH "DESCRIPTION"
\fBAMUSE\fP is the Astrophysical Multipurpose Software Environment.
With it, you can simulate many astrophysical systems.
.PP
It is written
in python, so there is currently no \fBamuse\fP command, instead you
will want to import this module in python and go from there.
.PP
A NEMO script \fBamuse_convert.py\fP can be used to convert between
snapshot format, as long as the format is supported by AMUSE.


.SH "EXAMPLES"

Here is an example snippet of python code integrating a Plummer sphere
and writing the resulting snapshot as a table

.EX

 N=128
 TIME=10
 FILENAME='p.txt'

 from amuse.units import nbody_system
 from amuse.ic.plummer import new_plummer_model
 from amuse.community.bhtree import Bhtree
 from amuse.io import write_set_to_file,read_set_from_file

 stars = new_plummer_model(N)
 gravity = Bhtree()

 eps = 0.025 | nbody_system.length
 tstop = 10  | nbody_system.time

 gravity.parameters.opening_angle  = 0.75
 gravity.parameters.epsilon_squared = eps * eps
 gravity.parameters.dt_dia          = 1.0      | nbody_system.time
 gravity.parameters.timestep        = 0.015625 | nbody_system.time 

 stars_in_gravity = gravity.particles.add_particles(stars)
 gravity.evolve_model(tstop)
 write_set_to_file(stars_in_gravity, FILENAME, format='txt')

.EE

This table has mass, radius, velocity and position, one per star. Notice velocity comes before position!
Thus the following NEMO command will convert it to a standard \fIsnapshot(5NEMO)\fP file:

.EX

 nbody=$(tabcols p.txt | wc -l)
 tabcols p.txt | tabtos - p.snap block1=mass,skip,vx,vy,vz,x,y,z nbody=$nbody

.EE


.SH "INSTALL"

Within NEMO the command
.EX

   mknemo amuse

.EE
will get you started on the install.  More to come.  Note there is a user release, which
can be a set of \fIpip install\fP only, as well as a developer install. A developer release
is recommended, the start of which will likely look as follows:
.EX

    cd $NEMO/local/amuse
    pip install -e .
    make bhtree.code
    
.EE

.SH "SNAPSHOT"
As described in the help (-h) of amuse_convert.py, the following formats are supported by AMUSE:
.nf
.ta +1.5i
amuse		HDF5 file
amuse-txt	text files with AMUSE header format
csv		comma separated files
dyn		Starlab binary structured file
gadget		Gadget binary data file
hdf5		HDF5 file
nemo		NEMO binary structured file
starlab		Starlab binary structured file
tsf		NEMO binary structured file
txt		text file containing a table of values separated by a predefined
vts		text file containing a table of values separated by a predefined character
vtu		text file containing a table of values separated by a predefined character

.fi

.SH "FILES"
.nf
$NEMO/src/scripts/mknemo.d/amuse - example install script (can be run via mknemo)
$NEMO/local/amuse - root of source code after install
$NEMO/src/scripts/python/amuse_convert.py - also copied to $NEMOBIN during install
.fi

.SH "SEE ALSO"
nemo(1NEMO), zeno(1NEMO), starlab(1NEMO)
.PP
.nf
https://www.amusecode.org/
.fi

.SH "HISTORY"

.nf

may-2025 - man page written
.fi
