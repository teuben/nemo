.TH TABCLIP 1NEMO "28 December 2025"

.SH "NAME"
tabclip \- clip a table

.SH "SYNOPSIS"
\fBtabclip\fP [parameter=value]

.SH "DESCRIPTION"
\fBtabclip\fP removes points from a table based on some "smoothness"
criteria. Examples are when there is a jump larger than a
critical amount it can be flagged. Or when the derivative exceeds
a certain amount.
.PP
Fitting programs, such \fItabnllsqfit(1NEMO)\fP can also be used
to remove points that are not close to a global model.
.PP


.SH "PARAMETERS"
.so man1/parameters
.TP 20
\fBin=\fP
Input file name (an ascii table).
.br
No default
.TP
\fBout=\fP
Output table
.br
No default
.TP
\fBxcol=\fP
x coordinate column
.br
[1]    
.TP
\fBycol=\fP
y coordinate column
.br
[2]    
.TP
\fBclip=\fP
Clipping if abs(derivative) exceeds this value
.TP
\fBeta=\fP
Clipping if the value predicted from a 2nd order polynomial value exceeds
the Y value by more than \fIeta\fP.  This mode only works well on smooth
data, and should not be applied to noisy data.
.br
Default: not used.
.TP
\fBlogic=and|or\fP
When a left and right side criteria is applied, this determines
the outcome of the clipping. \fBand\fP requires both to be satisfied,
\fBor\fP requires only one. \fIdeprecated\fP
.br
[Default: \fBand\fP].
.TP
\fBnmax=\fP
Hardcoded allocation space, if needed for piped data.
.TP
\fBcomment=t|f\fP
Keep the clipped points as comments in the output file?
.br
By default they are shown as comments. [t]

.SH "CAVEATS"
The value of \fBclip=\fP is very important. It should be a few times the sigma in the \fIsignal\fP variation
(see e.g. \fItabtrend(1NEMO)\fP how to obtain this). Here we mean the \fIsignal\fP to be all but the outliers.
When this clip value is too high, you will see the reported sigma increase
as outliers are now taken into the \fIsignal\fP.  If too low, sigma will also decrease and too much
\fIsignal\fP is removed.  Recall the sigma in the differences is sqrt(2) the value of the original
sigma. Thus there is an optimal value for \fBclip=\fP.

.EX
tabclip cliptest.tab  . clip=1  
### nemo Debug[0]: X: min/max = 0 99
### nemo Debug[0]: Y: min/max = -11.0065 11.8708
### nemo Debug[0]: Min/Max for deriv = -0.353729 0.279371 (with clip=1)
### nemo Debug[0]: Sigma = 0.136388    clip/sigma=7.33205
### nemo Debug[0]: Wrote 89/100 points
.EE

.SH "SEE ALSO"
tabmath(1NEMO), tabnllsqfit(1NEMO)

.SH "AUTHOR"
Peter Teuben

.SH "HISTORY"
.nf
.ta +1.25i +4.5i
23-Nov-02	V0.1 Created	PJT
27-nov-02	V0.3 added eta=	PJT
28-dec-2025	V0.5 ANSI C clean up, use clip=	PJT
.fi
